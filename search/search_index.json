{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u672c\u4e66\u7b80\u4ecb \u672c\u4e66\u4e3a\u5e94\u5b66\u6821\u6240\u9700\uff0c\u4ee5\u5168\u56fd\u804c\u4e1a\u6280\u80fd\u5927\u8d5b\u4e3a\u4e3b\u8981\u8303\u56f4\uff0c\u6240\u5199\u7684\u4e00\u672c Debian \u7cfb Linux \u5feb\u901f\u5165\u95e8\u4e0e\u53c2\u8003\u4e66\u3002 \u672c\u4e66\u4ece\u57fa\u672c\u7cfb\u7edf\u5b89\u88c5\u8bb2\u8d77\uff0c\u5e76\u7740\u91cd\u8bb2\u8ff0\u7f51\u7edc\u670d\u52a1\u914d\u7f6e\u4e0e\u7cfb\u7edf\u7ef4\u62a4\uff0c\u9002\u5408 Linux \u5b66\u4e60\u548c\u8fd0\u7ef4\u5b66\u4e60\u8005\u9605\u8bfb\u3002 \u672c\u4e66\u5c06\u4e0d\u518d\u91cd\u590d\u8bb2\u8ff0 Linux \u901a\u7528\u77e5\u8bc6\uff0c\u5c24\u5176\u524d\u51e0\u7ae0\uff0c\u66f4\u9002\u5408\u5177\u6709\u4e00\u4e9b Linux \u4f7f\u7528\u7ecf\u9a8c\u7684\u4eba\u9605\u8bfb\u3002 \u672c\u4e66\u4e3b\u8981\u53c2\u8003 Debian \u7ba1\u7406\u5458\u624b\u518c \u5199\u6210\uff0c\u5e76\u6309\u7167\u539f\u6587\u9700\u6c42\u4f7f\u7528 GPL \u4e0e CC-BY-SA 3.0 \u65b9\u5f0f\u653e\u51fa\u3002 \u7531\u4e8e\u7b14\u8005\u80fd\u529b\u6709\u9650\uff0c\u4e66\u4e2d\u6709\u8bef\u7684\u5730\u65b9\u5728\u6240\u96be\u514d\uff0c\u5982\u6709\u8bfb\u8005\u53d1\u73b0\u95ee\u9898\uff0c\u53ef\u5230 GitHub \u9879\u76ee \u4e2d\u63d0 Issue \uff0c\u6211\u4f1a\u5728\u529b\u6240\u80fd\u53ca\u7684\u8303\u56f4\u5185\u5c3d\u529b\u6539\u6b63\u3002 \u4e00\u4e9b\u7ea6\u5b9a \u5728\u672c\u4e66\u4e2d\uff0c\u4f1a\u51fa\u73b0\u5927\u91cf\u7684\u4ee3\u7801\u5757\u6765\u4e66\u5199\u547d\u4ee4\u4e0e\u914d\u7f6e\u6587\u4ef6\u3002 \u4e3a\u4e0d\u9020\u6210\u9605\u8bfb\u65f6\u7684\u56f0\u6270\uff0c\u7279\u7ea6\u5b9a\u5982\u4e0b\uff1a \u5728\u4ee3\u7801\u5757\u4e2d\u4f7f\u7528 $ \u524d\u7f00\u60c5\u51b5\uff0c\u4ee3\u8868\u5f53\u524d\u4f7f\u7528\u666e\u901a\u7528\u6237\uff0c $ \u540e\u7684\u4e3a\u8f93\u5165\u7684\u547d\u4ee4\uff0c\u5982\uff1a $ uname Linux \u5728\u4ee3\u7801\u5757\u4e2d\u4f7f\u7528 # \u4ee3\u8868\u5f53\u524d\u4f7f\u7528 root \u7528\u6237\uff0c\u5982 # systemctl restart ssh \u5728\u4ee3\u7801\u5757\u4e2d\u4f7f\u7528 $ # \u7684\u5f62\u5f0f\u4ee3\u8868 # \u540e\u9762\u90e8\u5206\u4e3a\u6ce8\u91ca\uff0c\u5982 $ # \u67e5\u770b hosts \u6587\u4ef6 $ cat /etc/hosts \u5982\u679c\u5185\u5bb9\u4e3a\u914d\u7f6e\u6587\u4ef6\uff0c\u5219\u4f1a\u5728\u7b2c\u4e00\u884c\u7528\u6ce8\u91ca\u6ce8\u660e\u662f\u4ec0\u4e48\u6587\u4ef6\uff0c\u5e76\u4e14\u4e0e\u6b63\u6587\u5185\u5bb9\u7a7a\u51fa\u4e00\u884c\uff0c\u5982\uff1a # /etc/network/interfaces # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). source /etc/network/interfaces.d/* # The loopback network interface auto lo iface lo inet loopback # The primary network interface allow-hotplug ens33 iface ens33 inet dhcp \u6709\u4e00\u90e8\u5206\u4e3a\u5b9e\u9a8c\u65f6\u5b8c\u6574\u590d\u5236\u7684\u663e\u793a\u5185\u5bb9\uff0c\u4e0d\u505a\u53e6\u5916\u8bf4\u660e\u3002","title":"\u672c\u4e66\u7b80\u4ecb"},{"location":"#_1","text":"\u672c\u4e66\u4e3a\u5e94\u5b66\u6821\u6240\u9700\uff0c\u4ee5\u5168\u56fd\u804c\u4e1a\u6280\u80fd\u5927\u8d5b\u4e3a\u4e3b\u8981\u8303\u56f4\uff0c\u6240\u5199\u7684\u4e00\u672c Debian \u7cfb Linux \u5feb\u901f\u5165\u95e8\u4e0e\u53c2\u8003\u4e66\u3002 \u672c\u4e66\u4ece\u57fa\u672c\u7cfb\u7edf\u5b89\u88c5\u8bb2\u8d77\uff0c\u5e76\u7740\u91cd\u8bb2\u8ff0\u7f51\u7edc\u670d\u52a1\u914d\u7f6e\u4e0e\u7cfb\u7edf\u7ef4\u62a4\uff0c\u9002\u5408 Linux \u5b66\u4e60\u548c\u8fd0\u7ef4\u5b66\u4e60\u8005\u9605\u8bfb\u3002 \u672c\u4e66\u5c06\u4e0d\u518d\u91cd\u590d\u8bb2\u8ff0 Linux \u901a\u7528\u77e5\u8bc6\uff0c\u5c24\u5176\u524d\u51e0\u7ae0\uff0c\u66f4\u9002\u5408\u5177\u6709\u4e00\u4e9b Linux \u4f7f\u7528\u7ecf\u9a8c\u7684\u4eba\u9605\u8bfb\u3002 \u672c\u4e66\u4e3b\u8981\u53c2\u8003 Debian \u7ba1\u7406\u5458\u624b\u518c \u5199\u6210\uff0c\u5e76\u6309\u7167\u539f\u6587\u9700\u6c42\u4f7f\u7528 GPL \u4e0e CC-BY-SA 3.0 \u65b9\u5f0f\u653e\u51fa\u3002 \u7531\u4e8e\u7b14\u8005\u80fd\u529b\u6709\u9650\uff0c\u4e66\u4e2d\u6709\u8bef\u7684\u5730\u65b9\u5728\u6240\u96be\u514d\uff0c\u5982\u6709\u8bfb\u8005\u53d1\u73b0\u95ee\u9898\uff0c\u53ef\u5230 GitHub \u9879\u76ee \u4e2d\u63d0 Issue \uff0c\u6211\u4f1a\u5728\u529b\u6240\u80fd\u53ca\u7684\u8303\u56f4\u5185\u5c3d\u529b\u6539\u6b63\u3002","title":"\u672c\u4e66\u7b80\u4ecb"},{"location":"#_2","text":"\u5728\u672c\u4e66\u4e2d\uff0c\u4f1a\u51fa\u73b0\u5927\u91cf\u7684\u4ee3\u7801\u5757\u6765\u4e66\u5199\u547d\u4ee4\u4e0e\u914d\u7f6e\u6587\u4ef6\u3002 \u4e3a\u4e0d\u9020\u6210\u9605\u8bfb\u65f6\u7684\u56f0\u6270\uff0c\u7279\u7ea6\u5b9a\u5982\u4e0b\uff1a \u5728\u4ee3\u7801\u5757\u4e2d\u4f7f\u7528 $ \u524d\u7f00\u60c5\u51b5\uff0c\u4ee3\u8868\u5f53\u524d\u4f7f\u7528\u666e\u901a\u7528\u6237\uff0c $ \u540e\u7684\u4e3a\u8f93\u5165\u7684\u547d\u4ee4\uff0c\u5982\uff1a $ uname Linux \u5728\u4ee3\u7801\u5757\u4e2d\u4f7f\u7528 # \u4ee3\u8868\u5f53\u524d\u4f7f\u7528 root \u7528\u6237\uff0c\u5982 # systemctl restart ssh \u5728\u4ee3\u7801\u5757\u4e2d\u4f7f\u7528 $ # \u7684\u5f62\u5f0f\u4ee3\u8868 # \u540e\u9762\u90e8\u5206\u4e3a\u6ce8\u91ca\uff0c\u5982 $ # \u67e5\u770b hosts \u6587\u4ef6 $ cat /etc/hosts \u5982\u679c\u5185\u5bb9\u4e3a\u914d\u7f6e\u6587\u4ef6\uff0c\u5219\u4f1a\u5728\u7b2c\u4e00\u884c\u7528\u6ce8\u91ca\u6ce8\u660e\u662f\u4ec0\u4e48\u6587\u4ef6\uff0c\u5e76\u4e14\u4e0e\u6b63\u6587\u5185\u5bb9\u7a7a\u51fa\u4e00\u884c\uff0c\u5982\uff1a # /etc/network/interfaces # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). source /etc/network/interfaces.d/* # The loopback network interface auto lo iface lo inet loopback # The primary network interface allow-hotplug ens33 iface ens33 inet dhcp \u6709\u4e00\u90e8\u5206\u4e3a\u5b9e\u9a8c\u65f6\u5b8c\u6574\u590d\u5236\u7684\u663e\u793a\u5185\u5bb9\uff0c\u4e0d\u505a\u53e6\u5916\u8bf4\u660e\u3002","title":"\u4e00\u4e9b\u7ea6\u5b9a"},{"location":"config/","text":"\u672c\u7ae0\u5c06\u8bb2\u89e3\u4e00\u4e9b\u7cfb\u7edf\u5b89\u88c5\u540e\u7684\u57fa\u7840\u914d\u7f6e\uff0c\u4e5f\u4f1a\u9002\u5f53\u5f15\u5165\u4e00\u4e9b\u540e\u7eed\u7ae0\u8282\u7684\u5185\u5bb9 \u672c\u7ae0\u5c06\u8bb2\u89e3\u5982\u4f55\u914d\u7f6e\u7f51\u7edc\uff0c\u4e3b\u673a\u540d\uff0cNTP\uff0c\u65f6\u533a\u7b49\u57fa\u7840\u914d\u7f6e\uff0c\u4e5f\u662f\u6bcf\u4e2a Linux \u5b89\u88c5\u540e\u5fc5\u505a\u7684\u4e00\u4e9b\u4e8b\u60c5\u3002","title":"\u672c\u7ae0\u524d\u8a00"},{"location":"diff-with-redhat/","text":"\u4e0e RedHat \u7cfb\u7684\u4e3b\u8981\u533a\u522b \u5982\u679c\u4f60\u6709\u4f7f\u7528\u8fc7 Red Hat \u4e00\u7c7b\u7684 Linux \u53d1\u884c\u7248\u7684\u7ecf\u9a8c\u8bdd ( \u5305\u62ec CentOS \u7b49 )\uff0c\u5b9e\u9645\u4e0a Debian \u4e0e Red Hat \u5e76\u65e0\u975e\u5e38\u5de8\u5927\u7684\u533a\u522b\uff0c\u6bd5\u7adf\u4ed6\u4eec\u90fd\u53ea\u662f\u4e00\u79cd\u666e\u901a\u7684 Linux \u53d1\u884c\u7248\u800c\u5df2\u3002 \u591a\u6570\u65f6\u5019\uff0c\u6211\u4eec\u4f7f\u7528 Linux \u662f\u5e0c\u671b\u4f7f\u7528\u8fd9\u4e2a\u751f\u6001\u73af\u5883\u4e0b\u7684\u670d\u52a1 ( \u5982 apache , docker \u7b49 )\uff0c\u8fd9\u4e9b\u670d\u52a1\u7684\u914d\u7f6e\u65e0\u8bba\u662f\u5728 Debian \u4e0b\u6291\u6216\u662f Red Hat \u7cfb\u7684\u53d1\u884c\u7248\u4e0b\u5e76\u65e0\u592a\u5927\u533a\u522b\u3002 \u7531\u4e8e\u5e95\u5c42\u5185\u6838\u4e00\u81f4 ( Debian \u591a\u6570\u65f6\u5019\u4f7f\u7528 Linux \u5185\u6838\uff0c Red Hat \u4e5f\u4e3a Linux \u5185\u6838 )\uff0c\u8f6f\u4ef6\u5305\u5927\u591a\u4e5f\u4e00\u81f4\uff0c\u56e0\u6b64\u4e24\u8005\u5176\u5b9e\u5e76\u4e0d\u5b58\u5728\u6280\u672f\u4e0a\u7684\u5dee\u522b\u3002 \u5b9e\u9645\u4e0a\uff0c\u4e0d\u540c\u7684\u53d1\u884c\u7248\u53ea\u662f\u96c6\u6210\u4e86\u4e0d\u540c\u7684\u8f6f\u4ef6\u5305\uff0c\u4f7f\u7528\u7cfb\u7edf\u65f6\u6211\u4eec\u4f7f\u7528\u7684\u4e5f\u53ea\u662f\u8fd9\u4e9b\u8f6f\u4ef6\u5305\u3002 \u4f46\uff0c Debian \u4e0e Red Hat \u6700\u5927\u7684\u533a\u522b\u5728\u4e8e\u4ed6\u4eec\u7684\u8f6f\u4ef6\u5305\u7ba1\u7406\u65b9\u5f0f\u3002 \u9879\u76ee Debian Red Hat \u4e8c\u8fdb\u5236\u8f6f\u4ef6\u5305 deb rpm \u5305\u7ba1\u7406\u7a0b\u5e8f dpkg rpm \u8f6f\u4ef6\u4ed3\u5e93 apt yum ( RHEL 7 \u4e4b\u524d ) dnf ( RHEL 8 \u4e4b\u540e ) \u9664\u6b64\u4ee5\u5916\uff0c Debian \u4e0e Red Hat \u8fd8\u5b58\u5728\u4e00\u4e9b\u7ec6\u5fae\u5dee\u522b \u9879\u76ee Debian Red Hat \u7ef4\u62a4\u65b9 \u793e\u533a \u4f01\u4e1a ( \u7531 Red Hat \u516c\u53f8\u7ef4\u62a4 ) \u67e5\u770b\u7cfb\u7edf\u7248\u672c /etc/debian_version ( \u4f46\u591a\u6570\u65f6\u5019\u4f7f\u7528 lsb_release ) /etc/redhat-release SELinux \u652f\u6301 \u652f\u6301\uff0c\u4f46\u9ed8\u8ba4\u4e0d\u5b89\u88c5 \u652f\u6301\uff0c\u4e14\u9ed8\u8ba4\u5b89\u88c5\u5e76\u542f\u7528\u5f3a\u5236\u6a21\u5f0f \u5b89\u5168\u6027 \u9ed8\u8ba4\u542f\u7528 AppArmor \u4f7f\u7528 SELinux \u5b98\u65b9\u7ef4\u62a4\u8f6f\u4ef6\u5305\u6570\u91cf \u591a \u5c11 ( \u4e0d\u4f7f\u7528 EPEL \u6216 ELRepo \u7b49\u793e\u533a\u7ef4\u62a4\u6e90 ) \u8f6f\u4ef6\u5305\u66f4\u65b0\u901f\u5ea6 \u5feb (\u5bf9\u4e8e unstable \u4e0e test \u7248\u672c ) \u6162 (\u5bf9\u4e8e stable \u7248\u672c) \u975e\u5e38\u6162 (\u591a\u6570\u65f6\u5019\u9700\u8ddf\u968f\u5927\u7248\u672c\u66f4\u65b0) \u6280\u672f\u652f\u6301 \u65e0 ( \u793e\u533a\u652f\u6301 ) \u6709\u6280\u672f\u652f\u6301\u670d\u52a1 ( \u7531 Red Hat \u516c\u53f8\u63d0\u4f9b\u6280\u672f\u652f\u6301 ) \u7ef4\u62a4\u65f6\u957f 3 \u5e74 ( \u5bf9\u4e8e unstable \u4e0e test \u7248\u672c ) 5 \u5e74 ( \u5bf9\u4e8e stable \u7248\u672c ) 10 \u5e74 ( \u5305\u542b LTS \u652f\u6301 ) \u5bf9\u4e8e\u6280\u672f\u652f\u6301\u90e8\u5206\uff0c\u5982\u679c\u6709\u8fd9\u79cd\u9700\u6c42\u4e5f\u53ef\u4ee5\u8003\u8651\u7531 Canonical \u516c\u53f8\u652f\u6301\u5e76\u7ef4\u62a4\u7684 Ubuntu ( \u4e00\u4e2a\u57fa\u4e8e Debian \u7684 unstable \u5206\u652f\u7684 Linux \u53d1\u884c\u7248 )\uff0c\u5e76\u4e14 Ubuntu \u4e5f\u63d0\u4f9b\u957f\u8fbe 10 \u5e74\u7684\u652f\u6301\u3002 \u672c\u4e66\u7684\u5b9e\u9a8c\u73af\u5883\u4e0e\u4f8b\u5b50\u5747\u4f7f\u7528 Debian 10.6.0 \uff0c\u4f46\u591a\u6570\u64cd\u4f5c\u4e5f\u5e94\u53ef\u4ee5\u5728\u5176\u4ed6\u57fa\u4e8e Debian \u7684\u53d1\u884c\u7248\u4e0a\u5b8c\u6210 ( \u5982 Ubuntu , Linux Mint , Kali Linux \u7b49 )","title":"\u4e0e RedHat \u7cfb\u7684\u4e3b\u8981\u533a\u522b"},{"location":"diff-with-redhat/#redhat","text":"\u5982\u679c\u4f60\u6709\u4f7f\u7528\u8fc7 Red Hat \u4e00\u7c7b\u7684 Linux \u53d1\u884c\u7248\u7684\u7ecf\u9a8c\u8bdd ( \u5305\u62ec CentOS \u7b49 )\uff0c\u5b9e\u9645\u4e0a Debian \u4e0e Red Hat \u5e76\u65e0\u975e\u5e38\u5de8\u5927\u7684\u533a\u522b\uff0c\u6bd5\u7adf\u4ed6\u4eec\u90fd\u53ea\u662f\u4e00\u79cd\u666e\u901a\u7684 Linux \u53d1\u884c\u7248\u800c\u5df2\u3002 \u591a\u6570\u65f6\u5019\uff0c\u6211\u4eec\u4f7f\u7528 Linux \u662f\u5e0c\u671b\u4f7f\u7528\u8fd9\u4e2a\u751f\u6001\u73af\u5883\u4e0b\u7684\u670d\u52a1 ( \u5982 apache , docker \u7b49 )\uff0c\u8fd9\u4e9b\u670d\u52a1\u7684\u914d\u7f6e\u65e0\u8bba\u662f\u5728 Debian \u4e0b\u6291\u6216\u662f Red Hat \u7cfb\u7684\u53d1\u884c\u7248\u4e0b\u5e76\u65e0\u592a\u5927\u533a\u522b\u3002 \u7531\u4e8e\u5e95\u5c42\u5185\u6838\u4e00\u81f4 ( Debian \u591a\u6570\u65f6\u5019\u4f7f\u7528 Linux \u5185\u6838\uff0c Red Hat \u4e5f\u4e3a Linux \u5185\u6838 )\uff0c\u8f6f\u4ef6\u5305\u5927\u591a\u4e5f\u4e00\u81f4\uff0c\u56e0\u6b64\u4e24\u8005\u5176\u5b9e\u5e76\u4e0d\u5b58\u5728\u6280\u672f\u4e0a\u7684\u5dee\u522b\u3002 \u5b9e\u9645\u4e0a\uff0c\u4e0d\u540c\u7684\u53d1\u884c\u7248\u53ea\u662f\u96c6\u6210\u4e86\u4e0d\u540c\u7684\u8f6f\u4ef6\u5305\uff0c\u4f7f\u7528\u7cfb\u7edf\u65f6\u6211\u4eec\u4f7f\u7528\u7684\u4e5f\u53ea\u662f\u8fd9\u4e9b\u8f6f\u4ef6\u5305\u3002 \u4f46\uff0c Debian \u4e0e Red Hat \u6700\u5927\u7684\u533a\u522b\u5728\u4e8e\u4ed6\u4eec\u7684\u8f6f\u4ef6\u5305\u7ba1\u7406\u65b9\u5f0f\u3002 \u9879\u76ee Debian Red Hat \u4e8c\u8fdb\u5236\u8f6f\u4ef6\u5305 deb rpm \u5305\u7ba1\u7406\u7a0b\u5e8f dpkg rpm \u8f6f\u4ef6\u4ed3\u5e93 apt yum ( RHEL 7 \u4e4b\u524d ) dnf ( RHEL 8 \u4e4b\u540e ) \u9664\u6b64\u4ee5\u5916\uff0c Debian \u4e0e Red Hat \u8fd8\u5b58\u5728\u4e00\u4e9b\u7ec6\u5fae\u5dee\u522b \u9879\u76ee Debian Red Hat \u7ef4\u62a4\u65b9 \u793e\u533a \u4f01\u4e1a ( \u7531 Red Hat \u516c\u53f8\u7ef4\u62a4 ) \u67e5\u770b\u7cfb\u7edf\u7248\u672c /etc/debian_version ( \u4f46\u591a\u6570\u65f6\u5019\u4f7f\u7528 lsb_release ) /etc/redhat-release SELinux \u652f\u6301 \u652f\u6301\uff0c\u4f46\u9ed8\u8ba4\u4e0d\u5b89\u88c5 \u652f\u6301\uff0c\u4e14\u9ed8\u8ba4\u5b89\u88c5\u5e76\u542f\u7528\u5f3a\u5236\u6a21\u5f0f \u5b89\u5168\u6027 \u9ed8\u8ba4\u542f\u7528 AppArmor \u4f7f\u7528 SELinux \u5b98\u65b9\u7ef4\u62a4\u8f6f\u4ef6\u5305\u6570\u91cf \u591a \u5c11 ( \u4e0d\u4f7f\u7528 EPEL \u6216 ELRepo \u7b49\u793e\u533a\u7ef4\u62a4\u6e90 ) \u8f6f\u4ef6\u5305\u66f4\u65b0\u901f\u5ea6 \u5feb (\u5bf9\u4e8e unstable \u4e0e test \u7248\u672c ) \u6162 (\u5bf9\u4e8e stable \u7248\u672c) \u975e\u5e38\u6162 (\u591a\u6570\u65f6\u5019\u9700\u8ddf\u968f\u5927\u7248\u672c\u66f4\u65b0) \u6280\u672f\u652f\u6301 \u65e0 ( \u793e\u533a\u652f\u6301 ) \u6709\u6280\u672f\u652f\u6301\u670d\u52a1 ( \u7531 Red Hat \u516c\u53f8\u63d0\u4f9b\u6280\u672f\u652f\u6301 ) \u7ef4\u62a4\u65f6\u957f 3 \u5e74 ( \u5bf9\u4e8e unstable \u4e0e test \u7248\u672c ) 5 \u5e74 ( \u5bf9\u4e8e stable \u7248\u672c ) 10 \u5e74 ( \u5305\u542b LTS \u652f\u6301 ) \u5bf9\u4e8e\u6280\u672f\u652f\u6301\u90e8\u5206\uff0c\u5982\u679c\u6709\u8fd9\u79cd\u9700\u6c42\u4e5f\u53ef\u4ee5\u8003\u8651\u7531 Canonical \u516c\u53f8\u652f\u6301\u5e76\u7ef4\u62a4\u7684 Ubuntu ( \u4e00\u4e2a\u57fa\u4e8e Debian \u7684 unstable \u5206\u652f\u7684 Linux \u53d1\u884c\u7248 )\uff0c\u5e76\u4e14 Ubuntu \u4e5f\u63d0\u4f9b\u957f\u8fbe 10 \u5e74\u7684\u652f\u6301\u3002 \u672c\u4e66\u7684\u5b9e\u9a8c\u73af\u5883\u4e0e\u4f8b\u5b50\u5747\u4f7f\u7528 Debian 10.6.0 \uff0c\u4f46\u591a\u6570\u64cd\u4f5c\u4e5f\u5e94\u53ef\u4ee5\u5728\u5176\u4ed6\u57fa\u4e8e Debian \u7684\u53d1\u884c\u7248\u4e0a\u5b8c\u6210 ( \u5982 Ubuntu , Linux Mint , Kali Linux \u7b49 )","title":"\u4e0e RedHat \u7cfb\u7684\u4e3b\u8981\u533a\u522b"},{"location":"install/","text":"\u5b89\u88c5 \u65e9\u671f\u7684 Debian \u5b89\u88c5\u4f1a\u6bd4\u8f83\u9ebb\u70e6\uff0c\u800c\u5f53\u524d\u65f6\u4ee3\u7684 Debian \u5f15\u5165\u4e86 GUI \u5b89\u88c5\u5411\u5bfc\uff0c\u4f7f\u5f97\u5b89\u88c5\u53d8\u5f97\u975e\u5e38\u5bb9\u6613\u4e14\u8f7b\u677e\u3002 \u591a\u6570\u60c5\u51b5\u4e0b\u6211\u4eec\u9700\u8981\u5728\u6ca1\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e3b\u673a\u4e0a\u5b89\u88c5 Debian\uff0c\u56e0\u6b64\u672c\u6587\u4e5f\u4ec5\u6f14\u793a\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u64cd\u4f5c\u3002 \u5b89\u88c5 Debian \u4e3b\u8981\u5206\u51e0\u4e2a\u6b65\u9aa4\uff1a \u51c6\u5907\u5b89\u88c5\u4ecb\u8d28 \u786e\u8ba4\u5f15\u5bfc\u65b9\u5f0f \u5f15\u5bfc\u5e76\u8fdb\u884c\u5b89\u88c5 \u5b89\u88c5\u540e\u914d\u7f6e \u51c6\u5907\u5b89\u88c5\u4ecb\u8d28 \u5b89\u88c5\u524d\uff0c\u6211\u4eec\u9700\u8981\u51c6\u5907\u597d Debian \u7684\u5b89\u88c5 ISO\uff0cDebian \u7684\u5b89\u88c5\u955c\u50cf\u53ef\u4ece Debian.org \u4e0b\u8f7d\u3002 \u5b98\u65b9\u4e0b\u8f7d\u56e0\u4e3a\u56fd\u5185\u7f51\u7edc\u539f\u56e0\u6bd4\u8f83\u6162\uff0c\u53ef\u4ee5\u4f7f\u7528\u56fd\u5185\u955c\u50cf\u4e0b\u8f7d\u3002 \u6e90\u5185\u6709\u591a\u4e2a\u955c\u50cf\uff0c\u6211\u4eec\u53ea\u9700\u4e0b\u8f7d DVD1 \u5373\u53ef\u3002 Debian \u652f\u6301\u591a\u79cd CPU \u5e73\u53f0\uff0c\u6211\u4eec\u5e38\u7528\u7684 x86_64 \u67b6\u6784\u7684\u7535\u8111\u9700\u8981\u4e0b\u8f7d amd64 \u955c\u50cf\u3002 \u56e0\u6b64\uff0c\u8fd9\u4e00\u6b21\uff0c\u6211\u4eec\u4e0b\u8f7d\u540e\u51c6\u5907\u597d\u7684\u955c\u50cf\u6587\u4ef6\u540d\u4e3a debian-10.6.0-amd64-DVD-1.iso \u3002 \u5bf9\u4e8e\u79bb\u7ebf\u73af\u5883\uff0c\u9700\u8981\u5927\u91cf\u8f6f\u4ef6\u5305\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528 jigdo \u5de5\u5177\u4e0b\u8f7d DLBD \u7248 ISO\uff0c\u4f46\u8fd9\u4e2a\u955c\u50cf\u6709\u8db3\u8db3 45G \u5927\u5c0f\u3002 \u5bf9\u4e8e\u865a\u62df\u673a\uff0c\u4ee5\u53ca\u670d\u52a1\u5668\u8bbe\u5907\u652f\u6301\u8fdc\u7a0b\u7ba1\u7406\u7684\u60c5\u51b5\u4e0b\uff0c\u5141\u8bb8\u6211\u4eec\u76f4\u63a5\u4f7f\u7528 ISO \u6587\u4ef6\u5b89\u88c5\uff0c\u800c\u5982\u679c\u9700\u8981\u5728\u7269\u7406\u673a\u4e0a\u5b89\u88c5\uff0c\u5219\u9700\u8981\u5c06\u955c\u50cf\u5199\u8fdb U \u76d8\u3002 \u5728 Linux \u73af\u5883\u4e2d\u53ef\u4ee5\u76f4\u63a5\u7528 dd \u547d\u4ee4\u5199 U \u76d8\u3002 \u800c\u5728 Windows \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 refus \u6765\u5199 U \u76d8\u3002 refus \u7684\u4e0b\u8f7d\u5730\u5740\u5728 \u8fd9\u91cc \u4e0b\u8f7d\u955c\u50cf\u540e\u76f4\u63a5\u5199\u5165\u5373\u53ef\u3002 \u786e\u8ba4\u5f15\u5bfc\u65b9\u5f0f \u5b89\u88c5\u524d\uff0c\u6211\u4eec\u9700\u8981\u786e\u8ba4\u8ba1\u7b97\u673a\u7684\u5f15\u5bfc\u65b9\u5f0f\u3002 \u5f15\u5bfc\u65b9\u5f0f\u5206\u4e24\u79cd\uff0c\u5206\u522b\u4e3a\uff1a \u4f20\u7edf BIOS \u65b9\u5f0f UEFI \u65b9\u5f0f \u4e24\u79cd\u4e0d\u540c\u7684\u5f15\u5bfc\u65b9\u5f0f\u9700\u8981\u4e86\u89e3\u4e0d\u540c\u7684\u5206\u533a\u65b9\u5f0f\u3002 \u5f15\u5bfc\u5e76\u8fdb\u884c\u5b89\u88c5 \u5f53\u5b89\u88c5\u4ecb\u8d28\u51c6\u5907\u5b8c\u6bd5\u540e\uff0c\u5c31\u53ef\u4ee5\u6b63\u5f0f\u5f00\u59cb\u5b89\u88c5\u4e86\u3002 \u672c\u4f8b\u4e2d\u5c06\u5728 VMware \u865a\u62df\u5316\u73af\u5883\u4e0b\u4f7f\u7528 UEFI \u5f15\u5bfc\u6a21\u5f0f\u8fdb\u884c\u5b89\u88c5\u6f14\u793a\uff0c\u5176\u4ed6\u73af\u5883\u5747\u5927\u540c\u5c0f\u5f02\u3002 VMware \u865a\u62df\u5316\u73af\u5883\u53ef\u4ee5\u770b\u4f5c\u4e00\u53f0\u5b8c\u6574\u7684\u7535\u8111\uff0c\u56e0\u6b64\u5b89\u88c5\u7cfb\u7edf\u4e0e\u771f\u673a\u5e76\u65e0\u592a\u5927\u5dee\u5f02\u3002 \u5f53\u5728\u865a\u62df\u673a\u4e2d\u6302\u8f7d ISO \u8fdb\u5165\u865a\u62df\u5149\u9a71\uff0c\u5e76\u8bbe\u5b9a\u4ece\u5149\u9a71\u542f\u52a8\u540e\uff0c\u4f1a\u8fdb\u5165 Debian \u5b89\u88c5\u7a0b\u5e8f\u7684\u5f15\u5bfc\u83dc\u5355\u3002 \u8fd9\u4e9b\u9009\u9879\u5206\u522b\u4ee3\u8868\uff1a \u56fe\u5f62\u5316\u5b89\u88c5 \u5b89\u88c5 ( \u6307\u4f7f\u7528\u6587\u672c\u754c\u9762\u5b89\u88c5 ) \u9ad8\u7ea7\u9009\u9879 \u8f7b\u677e\u8bbf\u95ee\u9009\u9879\u83dc\u5355 ( \u4e3a\u89c6\u969c\u4eba\u58eb\u51c6\u5907 ) \u5e26\u6709\u6717\u8bfb\u5408\u6210\u5668\u7684\u5b89\u88c5 ( \u4e3a\u89c6\u969c\u4eba\u58eb\u51c6\u5907 ) \u5728\u83dc\u5355\u4e2d\uff0c\u6309 Enter \u952e\u9009\u62e9\u786e\u8ba4\u3002 \u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u672c\u4f8b\u4f7f\u7528\u56fe\u5f62\u5316\u65b9\u5f0f\u5b89\u88c5\uff0c\u6587\u672c\u5b89\u88c5\u4e0e\u56fe\u5f62\u5316\u5b89\u88c5\u5927\u540c\u5c0f\u5f02\uff0c\u4f46\u66f4\u8282\u7701\u7cfb\u7edf\u8d44\u6e90\u3002 \u9009\u62e9\u7b2c\u4e00\u9879 Graphical Install \u5e76\u6309 Enter \u952e\uff0c\u5728\u4e00\u7cfb\u5217\u7cfb\u7edf\u5f15\u5bfc\u8fc7\u7a0b\u540e\uff0c\u4f1a\u8fdb\u5165 Debian \u5b89\u88c5\u5668\u5e94\u7528\u3002 \u7b2c\u4e00\u6b65\u9700\u8981\u9009\u62e9\u8bed\u8a00\uff0c\u6b64\u5904\u7684\u9009\u62e9\u4e5f\u4f1a\u5f71\u54cd\u5b89\u88c5\u7cfb\u7edf\u540e\u7684\u9ed8\u8ba4\u8bed\u8a00\uff0c\u7b14\u8005\u6bd4\u8f83\u63a8\u8350\u4f7f\u7528\u82f1\u8bed\uff0c\u8fd9\u6837\u4e0d\u4f1a\u5bfc\u81f4\u5e73\u65f6\u4f7f\u7528\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u7684\u7ec8\u7aef\u4e71\u7801\u95ee\u9898\uff0c\u5f53\u7136\u5982\u679c\u82f1\u8bed\u771f\u7684\u6bd4\u8f83\u5dee\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e2d\u6587\u3002 \u672c\u4f8b\u4e2d\u5c06\u9009\u62e9\u82f1\u8bed\u8fdb\u884c\u5b89\u88c5\u3002 \u8fd9\u4e00\u6b65\u9009\u62e9\u533a\u57df\uff0c\u6211\u4eec\u9009\u62e9\u4e2d\u56fd\uff0c\u4f46\u8fd9\u4e2a\u5217\u8868\u4e2d\u4e0d\u4f1a\u76f4\u63a5\u5217\u51fa China ,\u9700\u8981\u5bfb\u627e Other - Asia - China \u7531\u4e8e\u4e2d\u6587\u533a\u5e76\u6ca1\u6709\u82f1\u8bed\uff0c\u6240\u4ee5\u4f1a\u6709\u4e00\u4e2a\u624b\u52a8\u6307\u5b9a\u7f16\u7801\u7684\u9009\u9879\uff0c\u4fdd\u6301\u9ed8\u8ba4\u7684 en-US.UTF-8 \u5373\u53ef\uff0c \u9009\u62e9\u952e\u76d8\u5e03\u5c40\uff0c\u8fd9\u91cc\u4fdd\u6301\u9ed8\u8ba4\u7684\u7f8e\u5f0f\u82f1\u8bed\u5e03\u5c40\u3002 \u63a5\u4e0b\u6765\u5b89\u88c5\u5411\u5bfc\u4f1a\u5bf9\u5149\u76d8\u8fdb\u884c\u6302\u8f7d\u5e76\u626b\u63cf\u5149\u76d8\u5185\u7684\u5185\u5bb9\uff0c\u626b\u63cf\u5b8c\u6210\u4e4b\u540e\u7ee7\u7eed\u8ba9\u6211\u4eec\u8f93\u5165\u914d\u7f6e\u3002 \u914d\u7f6e\u4e3b\u673a\u540d\uff0c\u4e3b\u673a\u540d\u53ef\u5728\u7cfb\u7edf\u5b89\u88c5\u5b8c\u6210\u540e\u518d\u4fee\u6539\uff0c\u8fd9\u91cc\u53ef\u4ee5\u4fdd\u6301\u9ed8\u8ba4\u3002 \u914d\u7f6e\u57df\u540d\uff0c\u8fd9\u4e00\u6b65\u4e5f\u53ef\u5728\u5b89\u88c5\u5b8c\u4e4b\u540e\u4fee\u6539\uff0c\u4fdd\u6301\u9ed8\u8ba4\u4e3a\u7a7a\u3002 \u63a5\u4e0b\u6765\u914d\u7f6e root \u7528\u6237\u5bc6\u7801\uff0c\u5982\u679c\u6b64\u5904\u9009\u62e9\u7559\u7a7a\uff0c\u5219 root \u8d26\u6237\u5c06\u9ed8\u8ba4\u88ab\u7981\u7528\u3002 \u5373\u4fbf root \u8d26\u6237\u88ab\u7981\u7528\u7684\u60c5\u51b5\u4e0b\uff0c\u666e\u901a\u7528\u6237\u4e5f\u53ef\u4f7f\u7528 sudo \u547d\u4ee4\u8fdb\u884c\u4e34\u65f6\u63d0\u6743\uff0c\u8fd9\u662f Debian \u7684\u63a8\u8350\u4f7f\u7528\u65b9\u5f0f\u3002 \u8f93\u5165\u5b8c\u6210\u5e76\u8f93\u5165\u786e\u8ba4\u5bc6\u7801\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\u3002 \u63a5\u4e0b\u6765\u7684\u6b65\u9aa4\u5c06\u521b\u5efa\u4e00\u4e2a\u666e\u901a\u7528\u6237\u3002 \u8fd9\u51e0\u6b65\u5206\u522b\u5bf9\u5e94\u8f93\u5165\u7528\u6237\u5168\u540d\uff0c\u8f93\u5165\u7528\u6237\u540d\uff0c\u4ee5\u53ca\u8bbe\u7f6e\u5bc6\u7801\u3002 \u63a5\u4e0b\u6765\u5b89\u88c5\u5411\u5bfc\u5c06\u5bfb\u627e NTP \u670d\u52a1\u5668\u5e76\u81ea\u52a8\u914d\u7f6e\u65f6\u95f4\u3002 \u8fd9\u4e00\u6b65\u5c06\u5bf9\u786c\u76d8\u8fdb\u884c\u5206\u533a\u3002 \u8fd9\u51e0\u4e2a\u9009\u9879\u5206\u522b\u5bf9\u5e94 \uff1a \u5411\u5bfc - \u4f7f\u7528\u6574\u5757\u786c\u76d8 \u5411\u5bfc - \u4f7f\u7528\u6574\u5757\u786c\u76d8\u5e76\u8bbe\u7f6e LVM \u5411\u5bfc - \u4f7f\u7528\u6574\u5757\u786c\u76d8\u5e76\u8bbe\u7f6e\u52a0\u5bc6\u7684 LVM \u624b\u52a8\u914d\u7f6e \u5982\u65e0\u7279\u6b8a\u9700\u6c42\uff0c\u6b64\u5904\u9009\u62e9\u7b2c\u4e00\u9879\u5373\u53ef\u3002 \u9009\u62e9\u5b89\u88c5\u786c\u76d8\uff0c\u8fd9\u53f0\u865a\u62df\u673a\u53ea\u6709\u4e00\u5757\u786c\u76d8\uff0c\u76f4\u63a5\u70b9\u51fb Continue \u6b64\u5904\u5b89\u88c5\u5411\u5bfc\u7ed9\u51fa\u4e86\u4e09\u79cd\u5206\u533a\u65b9\u5f0f\uff0c\u5206\u522b\u4e3a\uff1a \u6240\u6709\u6587\u4ef6\u5b58\u50a8\u5728\u5355\u4e2a\u5206\u533a\u4e2d ( \u63a8\u8350\u65b0\u7528\u6237\u4f7f\u7528 ) \u5355\u72ec\u5206\u51fa /home \u5206\u533a \u5355\u72ec\u5206\u51fa /home , /var \u548c /tmp \u5206\u533a \u65e0\u7279\u6b8a\u9700\u6c42\u7684\u8bdd\uff0c\u53ef\u4ee5\u76f4\u63a5\u9009\u62e9\u7b2c\u4e00\u9879\u3002 \u78c1\u76d8\u7ba1\u7406\u4f1a\u5728\u540e\u7eed\u6709\u4e13\u95e8\u4e00\u7ae0\u8282\u8fdb\u884c\u8bb2\u89e3\u3002 \u6b64\u5904\u5b89\u88c5\u5411\u5bfc\u8ba9\u6211\u4eec\u786e\u8ba4\u78c1\u76d8\u5206\u533a\u60c5\u51b5\uff0c\u5e76\u9ed8\u8ba4\u9009\u62e9 \u5b8c\u6210\u5206\u533a\u5e76\u5199\u5165\u78c1\u76d8 \u3002 \u786e\u8ba4\u65e0\u8bef\u4e4b\u540e\u5373\u53ef\u70b9\u51fb Continue \u6b64\u5904\u4f1a\u518d\u6b21\u786e\u8ba4\uff0c\u70b9\u51fb Continue \u5b89\u88c5\u5411\u5bfc\u5f00\u59cb\u5b89\u88c5\u7cfb\u7edf\u57fa\u7840\u7ec4\u4ef6\u3002 \u8fd9\u4e00\u6b65\u5b89\u88c5\u5411\u5bfc\u63d0\u793a\u6211\u4eec\u662f\u5426\u8981\u626b\u63cf\u5176\u4ed6 CD/DVD \u4f5c\u4e3a\u672c\u5730\u6e90\u4f7f\u7528\uff0c\u6211\u4eec\u53ea\u51c6\u5907\u4e86\u4e00\u5f20\u5149\u76d8\uff0c\u5e76\u4e14\u591a\u6570\u8f6f\u4ef6\u5305\u4f1a\u5728\u5b89\u88c5\u5b8c\u6210\u540e\u901a\u8fc7\u7f51\u7edc\u5b89\u88c5\uff0c\u56e0\u6b64\u6b64\u5904\u9009\u62e9 No \u5e76\u7ee7\u7eed\u3002 \u8fd9\u4e00\u6b65\u4f1a\u63d0\u793a\u6211\u4eec\u914d\u7f6e\u6e90\u955c\u50cf\uff0c\u7531\u4e8e\u56fd\u5185\u8bbf\u95ee\u5b98\u65b9\u6e90\u901f\u5ea6\u8f83\u6162\uff0c\u867d\u7136\u53ef\u4ee5\u5728\u7cfb\u7edf\u5b89\u88c5\u5b8c\u6bd5\u540e\u4fee\u6539\u955c\u50cf\u6e90\uff0c\u4f46\u4e5f\u53ef\u4ee5\u5728\u5b89\u88c5\u65f6\u76f4\u63a5\u4fee\u6539\uff0c\u6b64\u5904\u9009\u62e9 Yes \u9009\u62e9\u4e2d\u56fd\u540e\uff0c\u4f1a\u8df3\u51fa\u6e90\u955c\u50cf\u9009\u62e9\u5217\u8868 \u6b64\u5904\u53ef\u4ee5\u9009\u62e9\u6e05\u534e\u6e90\u6216 163 \u6e90\uff0c\u534e\u4e3a\u4e91\u6e90\u955c\u50cf\u7b49\uff0c\u6b64\u5904\u9009\u62e9\u914d\u7f6e 163 \u6e90\u3002 \u6b64\u5904\u914d\u7f6e HTTP \u4ee3\u7406\uff0c\u5982\u9700\u8981\u4f7f\u7528\u4ee3\u7406\u8fde\u63a5\u5916\u90e8\u7f51\u7edc\uff0c\u5219\u5728\u6b64\u5904\u914d\u7f6e\uff0c\u5426\u5219\u7559\u7a7a\u5e76\u4e0b\u4e00\u6b65\u3002 \u63a5\u4e0b\u6765\u5b89\u88c5\u5411\u5bfc\u4f1a\u914d\u7f6e\u6e90\u4e0e\u5305\u7ba1\u7406\u5668\u3002 \u63d0\u793a\u662f\u5426\u540c\u610f\u53d1\u9001\u6570\u636e\u7ed9 Debian \u793e\u533a\u6765\u6539\u8fdb\u7cfb\u7edf\uff0c\u8fd9\u91cc\u53ef\u4ee5\u6839\u636e\u60f3\u6cd5\u9009\u62e9\u3002 \u6b64\u6b65\u9aa4\u9009\u62e9\u5b89\u88c5\u7ec4\u4ef6\uff0c\u4e3a\u63a5\u4e0b\u6765\u7684\u7ae0\u8282\u65b9\u4fbf\uff0c\u5c06\u4e0d\u5b89\u88c5\u9664\u4e86\u7cfb\u7edf\u5de5\u5177\u4e0e SSH \u670d\u52a1\u5668\u4ee5\u5916\u7684\u4efb\u4f55\u5305\uff0c\u56e0\u6b64\u5c06\u53d6\u6d88\u9009\u62e9 Debian Desktop environment \u4e0e print server \u70b9\u51fb Continue \uff0c\u5b89\u88c5\u5411\u5bfc\u5c06\u7ee7\u7eed\u5b89\u88c5\u9009\u62e9\u7684\u9009\u9879\u3002 \u5b89\u88c5\u5b8c\u6210\uff0c\u63d0\u793a\u79fb\u9664\u5b89\u88c5\u5a92\u4f53\u5e76\u91cd\u65b0\u542f\u52a8\u3002 \u5230\u8fd9\u91cc Debian \u7684\u5b89\u88c5\u5c31\u5b8c\u6210\u4e86\u3002 \u5b98\u65b9\u7684 Debian \u5b89\u88c5\u624b\u518c \u5b89\u88c5\u540e\u914d\u7f6e \u5728\u5b89\u88c5\u5411\u5bfc\u6ca1\u6709\u8fdb\u884c\u914d\u7f6e\u7684\u9879\u76ee\uff0c\u5747\u53ef\u5728\u5b89\u88c5\u5b8c\u6210\u540e\u518d\u8fdb\u884c\u4fee\u6539\u3002 \u8fd9\u4e9b\u90fd\u5c06\u5728\u4ee5\u540e\u7684\u7ae0\u8282\u4e2d\u8bb2\u5230\u3002 \u5b89\u88c5\u540e\uff0c\u5982\u679c\u50cf\u6211\u4e00\u6837\u6ca1\u6709\u5b89\u88c5 GUI \u7684\u8bdd\uff0c\u5c06\u8fdb\u5165 TTY \u6a21\u5f0f\u3002 \u53ef\u4ee5\u4f7f\u7528\u5b89\u88c5\u65f6\u8bbe\u5b9a\u7684 root \u8d26\u6237\u6216\u521b\u5efa\u7684\u666e\u901a\u7528\u6237\u767b\u5f55\u3002 \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u901a\u5e38\u4f1a\u505a\u51e0\u4ef6\u4e8b\u60c5\u3002 \u914d\u7f6e\u7f51\u7edc \u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee \u5982\u9700\u8981\uff0c\u4fee\u6539\u4e3b\u673a\u540d \u786e\u8ba4\u65f6\u95f4\u4e0e\u65f6\u533a \u786e\u8ba4\u6e90\u5e76\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6\u5305 \u8fd9\u4e9b\u5c06\u4f1a\u5728\u4e0b\u4e00\u7ae0\u8282\u8be6\u7ec6\u89e3\u8bf4\u3002 \u4f46\u5c31\u76ee\u524d\u800c\u8a00\uff0c\u4e3a\u4e86\u65b9\u4fbf\u540e\u7eed\u8fdc\u7a0b\u8fde\u63a5\uff0c\u53ef\u4ee5\u5148\u914d\u7f6e\u5141\u8bb8 root \u7528\u6237\u8fdb\u884c\u8fdc\u7a0b\u8bbf\u95ee\u3002 \u65b9\u6cd5\u662f\u4fee\u6539 /etc/ssh/sshd_config , \u5728 32 \u884c\u7684 # /etc/ssh/sshd_config #PermitRootLogin prohibit-password \u4fee\u6539\u4e3a\uff1a # /etc/ssh/sshd_config PermitRootLogin yes \u8ba9 SSH \u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e # systemctl reload ssh \u4e4b\u540e\u53ef\u4ee5\u901a\u8fc7 SSH \u8fdc\u7a0b\u767b\u9646\uff0c\u65b9\u4fbf\u540e\u7eed\u5b9e\u9a8c\u3002 \u6ce8\u610f\uff0c\u5b9e\u9645\u5e94\u7528\u4e2d\u5e94\u5c3d\u91cf\u907f\u514d\u4f7f\u7528 root \u7528\u6237","title":"\u5b89\u88c5"},{"location":"install/#_1","text":"\u65e9\u671f\u7684 Debian \u5b89\u88c5\u4f1a\u6bd4\u8f83\u9ebb\u70e6\uff0c\u800c\u5f53\u524d\u65f6\u4ee3\u7684 Debian \u5f15\u5165\u4e86 GUI \u5b89\u88c5\u5411\u5bfc\uff0c\u4f7f\u5f97\u5b89\u88c5\u53d8\u5f97\u975e\u5e38\u5bb9\u6613\u4e14\u8f7b\u677e\u3002 \u591a\u6570\u60c5\u51b5\u4e0b\u6211\u4eec\u9700\u8981\u5728\u6ca1\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e3b\u673a\u4e0a\u5b89\u88c5 Debian\uff0c\u56e0\u6b64\u672c\u6587\u4e5f\u4ec5\u6f14\u793a\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u64cd\u4f5c\u3002 \u5b89\u88c5 Debian \u4e3b\u8981\u5206\u51e0\u4e2a\u6b65\u9aa4\uff1a \u51c6\u5907\u5b89\u88c5\u4ecb\u8d28 \u786e\u8ba4\u5f15\u5bfc\u65b9\u5f0f \u5f15\u5bfc\u5e76\u8fdb\u884c\u5b89\u88c5 \u5b89\u88c5\u540e\u914d\u7f6e","title":"\u5b89\u88c5"},{"location":"install/#_2","text":"\u5b89\u88c5\u524d\uff0c\u6211\u4eec\u9700\u8981\u51c6\u5907\u597d Debian \u7684\u5b89\u88c5 ISO\uff0cDebian \u7684\u5b89\u88c5\u955c\u50cf\u53ef\u4ece Debian.org \u4e0b\u8f7d\u3002 \u5b98\u65b9\u4e0b\u8f7d\u56e0\u4e3a\u56fd\u5185\u7f51\u7edc\u539f\u56e0\u6bd4\u8f83\u6162\uff0c\u53ef\u4ee5\u4f7f\u7528\u56fd\u5185\u955c\u50cf\u4e0b\u8f7d\u3002 \u6e90\u5185\u6709\u591a\u4e2a\u955c\u50cf\uff0c\u6211\u4eec\u53ea\u9700\u4e0b\u8f7d DVD1 \u5373\u53ef\u3002 Debian \u652f\u6301\u591a\u79cd CPU \u5e73\u53f0\uff0c\u6211\u4eec\u5e38\u7528\u7684 x86_64 \u67b6\u6784\u7684\u7535\u8111\u9700\u8981\u4e0b\u8f7d amd64 \u955c\u50cf\u3002 \u56e0\u6b64\uff0c\u8fd9\u4e00\u6b21\uff0c\u6211\u4eec\u4e0b\u8f7d\u540e\u51c6\u5907\u597d\u7684\u955c\u50cf\u6587\u4ef6\u540d\u4e3a debian-10.6.0-amd64-DVD-1.iso \u3002 \u5bf9\u4e8e\u79bb\u7ebf\u73af\u5883\uff0c\u9700\u8981\u5927\u91cf\u8f6f\u4ef6\u5305\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528 jigdo \u5de5\u5177\u4e0b\u8f7d DLBD \u7248 ISO\uff0c\u4f46\u8fd9\u4e2a\u955c\u50cf\u6709\u8db3\u8db3 45G \u5927\u5c0f\u3002 \u5bf9\u4e8e\u865a\u62df\u673a\uff0c\u4ee5\u53ca\u670d\u52a1\u5668\u8bbe\u5907\u652f\u6301\u8fdc\u7a0b\u7ba1\u7406\u7684\u60c5\u51b5\u4e0b\uff0c\u5141\u8bb8\u6211\u4eec\u76f4\u63a5\u4f7f\u7528 ISO \u6587\u4ef6\u5b89\u88c5\uff0c\u800c\u5982\u679c\u9700\u8981\u5728\u7269\u7406\u673a\u4e0a\u5b89\u88c5\uff0c\u5219\u9700\u8981\u5c06\u955c\u50cf\u5199\u8fdb U \u76d8\u3002 \u5728 Linux \u73af\u5883\u4e2d\u53ef\u4ee5\u76f4\u63a5\u7528 dd \u547d\u4ee4\u5199 U \u76d8\u3002 \u800c\u5728 Windows \u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 refus \u6765\u5199 U \u76d8\u3002 refus \u7684\u4e0b\u8f7d\u5730\u5740\u5728 \u8fd9\u91cc \u4e0b\u8f7d\u955c\u50cf\u540e\u76f4\u63a5\u5199\u5165\u5373\u53ef\u3002","title":"\u51c6\u5907\u5b89\u88c5\u4ecb\u8d28"},{"location":"install/#_3","text":"\u5b89\u88c5\u524d\uff0c\u6211\u4eec\u9700\u8981\u786e\u8ba4\u8ba1\u7b97\u673a\u7684\u5f15\u5bfc\u65b9\u5f0f\u3002 \u5f15\u5bfc\u65b9\u5f0f\u5206\u4e24\u79cd\uff0c\u5206\u522b\u4e3a\uff1a \u4f20\u7edf BIOS \u65b9\u5f0f UEFI \u65b9\u5f0f \u4e24\u79cd\u4e0d\u540c\u7684\u5f15\u5bfc\u65b9\u5f0f\u9700\u8981\u4e86\u89e3\u4e0d\u540c\u7684\u5206\u533a\u65b9\u5f0f\u3002","title":"\u786e\u8ba4\u5f15\u5bfc\u65b9\u5f0f"},{"location":"install/#_4","text":"\u5f53\u5b89\u88c5\u4ecb\u8d28\u51c6\u5907\u5b8c\u6bd5\u540e\uff0c\u5c31\u53ef\u4ee5\u6b63\u5f0f\u5f00\u59cb\u5b89\u88c5\u4e86\u3002 \u672c\u4f8b\u4e2d\u5c06\u5728 VMware \u865a\u62df\u5316\u73af\u5883\u4e0b\u4f7f\u7528 UEFI \u5f15\u5bfc\u6a21\u5f0f\u8fdb\u884c\u5b89\u88c5\u6f14\u793a\uff0c\u5176\u4ed6\u73af\u5883\u5747\u5927\u540c\u5c0f\u5f02\u3002 VMware \u865a\u62df\u5316\u73af\u5883\u53ef\u4ee5\u770b\u4f5c\u4e00\u53f0\u5b8c\u6574\u7684\u7535\u8111\uff0c\u56e0\u6b64\u5b89\u88c5\u7cfb\u7edf\u4e0e\u771f\u673a\u5e76\u65e0\u592a\u5927\u5dee\u5f02\u3002 \u5f53\u5728\u865a\u62df\u673a\u4e2d\u6302\u8f7d ISO \u8fdb\u5165\u865a\u62df\u5149\u9a71\uff0c\u5e76\u8bbe\u5b9a\u4ece\u5149\u9a71\u542f\u52a8\u540e\uff0c\u4f1a\u8fdb\u5165 Debian \u5b89\u88c5\u7a0b\u5e8f\u7684\u5f15\u5bfc\u83dc\u5355\u3002 \u8fd9\u4e9b\u9009\u9879\u5206\u522b\u4ee3\u8868\uff1a \u56fe\u5f62\u5316\u5b89\u88c5 \u5b89\u88c5 ( \u6307\u4f7f\u7528\u6587\u672c\u754c\u9762\u5b89\u88c5 ) \u9ad8\u7ea7\u9009\u9879 \u8f7b\u677e\u8bbf\u95ee\u9009\u9879\u83dc\u5355 ( \u4e3a\u89c6\u969c\u4eba\u58eb\u51c6\u5907 ) \u5e26\u6709\u6717\u8bfb\u5408\u6210\u5668\u7684\u5b89\u88c5 ( \u4e3a\u89c6\u969c\u4eba\u58eb\u51c6\u5907 ) \u5728\u83dc\u5355\u4e2d\uff0c\u6309 Enter \u952e\u9009\u62e9\u786e\u8ba4\u3002 \u4e3a\u65b9\u4fbf\u4f7f\u7528\uff0c\u672c\u4f8b\u4f7f\u7528\u56fe\u5f62\u5316\u65b9\u5f0f\u5b89\u88c5\uff0c\u6587\u672c\u5b89\u88c5\u4e0e\u56fe\u5f62\u5316\u5b89\u88c5\u5927\u540c\u5c0f\u5f02\uff0c\u4f46\u66f4\u8282\u7701\u7cfb\u7edf\u8d44\u6e90\u3002 \u9009\u62e9\u7b2c\u4e00\u9879 Graphical Install \u5e76\u6309 Enter \u952e\uff0c\u5728\u4e00\u7cfb\u5217\u7cfb\u7edf\u5f15\u5bfc\u8fc7\u7a0b\u540e\uff0c\u4f1a\u8fdb\u5165 Debian \u5b89\u88c5\u5668\u5e94\u7528\u3002 \u7b2c\u4e00\u6b65\u9700\u8981\u9009\u62e9\u8bed\u8a00\uff0c\u6b64\u5904\u7684\u9009\u62e9\u4e5f\u4f1a\u5f71\u54cd\u5b89\u88c5\u7cfb\u7edf\u540e\u7684\u9ed8\u8ba4\u8bed\u8a00\uff0c\u7b14\u8005\u6bd4\u8f83\u63a8\u8350\u4f7f\u7528\u82f1\u8bed\uff0c\u8fd9\u6837\u4e0d\u4f1a\u5bfc\u81f4\u5e73\u65f6\u4f7f\u7528\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u7684\u7ec8\u7aef\u4e71\u7801\u95ee\u9898\uff0c\u5f53\u7136\u5982\u679c\u82f1\u8bed\u771f\u7684\u6bd4\u8f83\u5dee\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e2d\u6587\u3002 \u672c\u4f8b\u4e2d\u5c06\u9009\u62e9\u82f1\u8bed\u8fdb\u884c\u5b89\u88c5\u3002 \u8fd9\u4e00\u6b65\u9009\u62e9\u533a\u57df\uff0c\u6211\u4eec\u9009\u62e9\u4e2d\u56fd\uff0c\u4f46\u8fd9\u4e2a\u5217\u8868\u4e2d\u4e0d\u4f1a\u76f4\u63a5\u5217\u51fa China ,\u9700\u8981\u5bfb\u627e Other - Asia - China \u7531\u4e8e\u4e2d\u6587\u533a\u5e76\u6ca1\u6709\u82f1\u8bed\uff0c\u6240\u4ee5\u4f1a\u6709\u4e00\u4e2a\u624b\u52a8\u6307\u5b9a\u7f16\u7801\u7684\u9009\u9879\uff0c\u4fdd\u6301\u9ed8\u8ba4\u7684 en-US.UTF-8 \u5373\u53ef\uff0c \u9009\u62e9\u952e\u76d8\u5e03\u5c40\uff0c\u8fd9\u91cc\u4fdd\u6301\u9ed8\u8ba4\u7684\u7f8e\u5f0f\u82f1\u8bed\u5e03\u5c40\u3002 \u63a5\u4e0b\u6765\u5b89\u88c5\u5411\u5bfc\u4f1a\u5bf9\u5149\u76d8\u8fdb\u884c\u6302\u8f7d\u5e76\u626b\u63cf\u5149\u76d8\u5185\u7684\u5185\u5bb9\uff0c\u626b\u63cf\u5b8c\u6210\u4e4b\u540e\u7ee7\u7eed\u8ba9\u6211\u4eec\u8f93\u5165\u914d\u7f6e\u3002 \u914d\u7f6e\u4e3b\u673a\u540d\uff0c\u4e3b\u673a\u540d\u53ef\u5728\u7cfb\u7edf\u5b89\u88c5\u5b8c\u6210\u540e\u518d\u4fee\u6539\uff0c\u8fd9\u91cc\u53ef\u4ee5\u4fdd\u6301\u9ed8\u8ba4\u3002 \u914d\u7f6e\u57df\u540d\uff0c\u8fd9\u4e00\u6b65\u4e5f\u53ef\u5728\u5b89\u88c5\u5b8c\u4e4b\u540e\u4fee\u6539\uff0c\u4fdd\u6301\u9ed8\u8ba4\u4e3a\u7a7a\u3002 \u63a5\u4e0b\u6765\u914d\u7f6e root \u7528\u6237\u5bc6\u7801\uff0c\u5982\u679c\u6b64\u5904\u9009\u62e9\u7559\u7a7a\uff0c\u5219 root \u8d26\u6237\u5c06\u9ed8\u8ba4\u88ab\u7981\u7528\u3002 \u5373\u4fbf root \u8d26\u6237\u88ab\u7981\u7528\u7684\u60c5\u51b5\u4e0b\uff0c\u666e\u901a\u7528\u6237\u4e5f\u53ef\u4f7f\u7528 sudo \u547d\u4ee4\u8fdb\u884c\u4e34\u65f6\u63d0\u6743\uff0c\u8fd9\u662f Debian \u7684\u63a8\u8350\u4f7f\u7528\u65b9\u5f0f\u3002 \u8f93\u5165\u5b8c\u6210\u5e76\u8f93\u5165\u786e\u8ba4\u5bc6\u7801\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\u3002 \u63a5\u4e0b\u6765\u7684\u6b65\u9aa4\u5c06\u521b\u5efa\u4e00\u4e2a\u666e\u901a\u7528\u6237\u3002 \u8fd9\u51e0\u6b65\u5206\u522b\u5bf9\u5e94\u8f93\u5165\u7528\u6237\u5168\u540d\uff0c\u8f93\u5165\u7528\u6237\u540d\uff0c\u4ee5\u53ca\u8bbe\u7f6e\u5bc6\u7801\u3002 \u63a5\u4e0b\u6765\u5b89\u88c5\u5411\u5bfc\u5c06\u5bfb\u627e NTP \u670d\u52a1\u5668\u5e76\u81ea\u52a8\u914d\u7f6e\u65f6\u95f4\u3002 \u8fd9\u4e00\u6b65\u5c06\u5bf9\u786c\u76d8\u8fdb\u884c\u5206\u533a\u3002 \u8fd9\u51e0\u4e2a\u9009\u9879\u5206\u522b\u5bf9\u5e94 \uff1a \u5411\u5bfc - \u4f7f\u7528\u6574\u5757\u786c\u76d8 \u5411\u5bfc - \u4f7f\u7528\u6574\u5757\u786c\u76d8\u5e76\u8bbe\u7f6e LVM \u5411\u5bfc - \u4f7f\u7528\u6574\u5757\u786c\u76d8\u5e76\u8bbe\u7f6e\u52a0\u5bc6\u7684 LVM \u624b\u52a8\u914d\u7f6e \u5982\u65e0\u7279\u6b8a\u9700\u6c42\uff0c\u6b64\u5904\u9009\u62e9\u7b2c\u4e00\u9879\u5373\u53ef\u3002 \u9009\u62e9\u5b89\u88c5\u786c\u76d8\uff0c\u8fd9\u53f0\u865a\u62df\u673a\u53ea\u6709\u4e00\u5757\u786c\u76d8\uff0c\u76f4\u63a5\u70b9\u51fb Continue \u6b64\u5904\u5b89\u88c5\u5411\u5bfc\u7ed9\u51fa\u4e86\u4e09\u79cd\u5206\u533a\u65b9\u5f0f\uff0c\u5206\u522b\u4e3a\uff1a \u6240\u6709\u6587\u4ef6\u5b58\u50a8\u5728\u5355\u4e2a\u5206\u533a\u4e2d ( \u63a8\u8350\u65b0\u7528\u6237\u4f7f\u7528 ) \u5355\u72ec\u5206\u51fa /home \u5206\u533a \u5355\u72ec\u5206\u51fa /home , /var \u548c /tmp \u5206\u533a \u65e0\u7279\u6b8a\u9700\u6c42\u7684\u8bdd\uff0c\u53ef\u4ee5\u76f4\u63a5\u9009\u62e9\u7b2c\u4e00\u9879\u3002 \u78c1\u76d8\u7ba1\u7406\u4f1a\u5728\u540e\u7eed\u6709\u4e13\u95e8\u4e00\u7ae0\u8282\u8fdb\u884c\u8bb2\u89e3\u3002 \u6b64\u5904\u5b89\u88c5\u5411\u5bfc\u8ba9\u6211\u4eec\u786e\u8ba4\u78c1\u76d8\u5206\u533a\u60c5\u51b5\uff0c\u5e76\u9ed8\u8ba4\u9009\u62e9 \u5b8c\u6210\u5206\u533a\u5e76\u5199\u5165\u78c1\u76d8 \u3002 \u786e\u8ba4\u65e0\u8bef\u4e4b\u540e\u5373\u53ef\u70b9\u51fb Continue \u6b64\u5904\u4f1a\u518d\u6b21\u786e\u8ba4\uff0c\u70b9\u51fb Continue \u5b89\u88c5\u5411\u5bfc\u5f00\u59cb\u5b89\u88c5\u7cfb\u7edf\u57fa\u7840\u7ec4\u4ef6\u3002 \u8fd9\u4e00\u6b65\u5b89\u88c5\u5411\u5bfc\u63d0\u793a\u6211\u4eec\u662f\u5426\u8981\u626b\u63cf\u5176\u4ed6 CD/DVD \u4f5c\u4e3a\u672c\u5730\u6e90\u4f7f\u7528\uff0c\u6211\u4eec\u53ea\u51c6\u5907\u4e86\u4e00\u5f20\u5149\u76d8\uff0c\u5e76\u4e14\u591a\u6570\u8f6f\u4ef6\u5305\u4f1a\u5728\u5b89\u88c5\u5b8c\u6210\u540e\u901a\u8fc7\u7f51\u7edc\u5b89\u88c5\uff0c\u56e0\u6b64\u6b64\u5904\u9009\u62e9 No \u5e76\u7ee7\u7eed\u3002 \u8fd9\u4e00\u6b65\u4f1a\u63d0\u793a\u6211\u4eec\u914d\u7f6e\u6e90\u955c\u50cf\uff0c\u7531\u4e8e\u56fd\u5185\u8bbf\u95ee\u5b98\u65b9\u6e90\u901f\u5ea6\u8f83\u6162\uff0c\u867d\u7136\u53ef\u4ee5\u5728\u7cfb\u7edf\u5b89\u88c5\u5b8c\u6bd5\u540e\u4fee\u6539\u955c\u50cf\u6e90\uff0c\u4f46\u4e5f\u53ef\u4ee5\u5728\u5b89\u88c5\u65f6\u76f4\u63a5\u4fee\u6539\uff0c\u6b64\u5904\u9009\u62e9 Yes \u9009\u62e9\u4e2d\u56fd\u540e\uff0c\u4f1a\u8df3\u51fa\u6e90\u955c\u50cf\u9009\u62e9\u5217\u8868 \u6b64\u5904\u53ef\u4ee5\u9009\u62e9\u6e05\u534e\u6e90\u6216 163 \u6e90\uff0c\u534e\u4e3a\u4e91\u6e90\u955c\u50cf\u7b49\uff0c\u6b64\u5904\u9009\u62e9\u914d\u7f6e 163 \u6e90\u3002 \u6b64\u5904\u914d\u7f6e HTTP \u4ee3\u7406\uff0c\u5982\u9700\u8981\u4f7f\u7528\u4ee3\u7406\u8fde\u63a5\u5916\u90e8\u7f51\u7edc\uff0c\u5219\u5728\u6b64\u5904\u914d\u7f6e\uff0c\u5426\u5219\u7559\u7a7a\u5e76\u4e0b\u4e00\u6b65\u3002 \u63a5\u4e0b\u6765\u5b89\u88c5\u5411\u5bfc\u4f1a\u914d\u7f6e\u6e90\u4e0e\u5305\u7ba1\u7406\u5668\u3002 \u63d0\u793a\u662f\u5426\u540c\u610f\u53d1\u9001\u6570\u636e\u7ed9 Debian \u793e\u533a\u6765\u6539\u8fdb\u7cfb\u7edf\uff0c\u8fd9\u91cc\u53ef\u4ee5\u6839\u636e\u60f3\u6cd5\u9009\u62e9\u3002 \u6b64\u6b65\u9aa4\u9009\u62e9\u5b89\u88c5\u7ec4\u4ef6\uff0c\u4e3a\u63a5\u4e0b\u6765\u7684\u7ae0\u8282\u65b9\u4fbf\uff0c\u5c06\u4e0d\u5b89\u88c5\u9664\u4e86\u7cfb\u7edf\u5de5\u5177\u4e0e SSH \u670d\u52a1\u5668\u4ee5\u5916\u7684\u4efb\u4f55\u5305\uff0c\u56e0\u6b64\u5c06\u53d6\u6d88\u9009\u62e9 Debian Desktop environment \u4e0e print server \u70b9\u51fb Continue \uff0c\u5b89\u88c5\u5411\u5bfc\u5c06\u7ee7\u7eed\u5b89\u88c5\u9009\u62e9\u7684\u9009\u9879\u3002 \u5b89\u88c5\u5b8c\u6210\uff0c\u63d0\u793a\u79fb\u9664\u5b89\u88c5\u5a92\u4f53\u5e76\u91cd\u65b0\u542f\u52a8\u3002 \u5230\u8fd9\u91cc Debian \u7684\u5b89\u88c5\u5c31\u5b8c\u6210\u4e86\u3002 \u5b98\u65b9\u7684 Debian \u5b89\u88c5\u624b\u518c","title":"\u5f15\u5bfc\u5e76\u8fdb\u884c\u5b89\u88c5"},{"location":"install/#_5","text":"\u5728\u5b89\u88c5\u5411\u5bfc\u6ca1\u6709\u8fdb\u884c\u914d\u7f6e\u7684\u9879\u76ee\uff0c\u5747\u53ef\u5728\u5b89\u88c5\u5b8c\u6210\u540e\u518d\u8fdb\u884c\u4fee\u6539\u3002 \u8fd9\u4e9b\u90fd\u5c06\u5728\u4ee5\u540e\u7684\u7ae0\u8282\u4e2d\u8bb2\u5230\u3002 \u5b89\u88c5\u540e\uff0c\u5982\u679c\u50cf\u6211\u4e00\u6837\u6ca1\u6709\u5b89\u88c5 GUI \u7684\u8bdd\uff0c\u5c06\u8fdb\u5165 TTY \u6a21\u5f0f\u3002 \u53ef\u4ee5\u4f7f\u7528\u5b89\u88c5\u65f6\u8bbe\u5b9a\u7684 root \u8d26\u6237\u6216\u521b\u5efa\u7684\u666e\u901a\u7528\u6237\u767b\u5f55\u3002 \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u901a\u5e38\u4f1a\u505a\u51e0\u4ef6\u4e8b\u60c5\u3002 \u914d\u7f6e\u7f51\u7edc \u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee \u5982\u9700\u8981\uff0c\u4fee\u6539\u4e3b\u673a\u540d \u786e\u8ba4\u65f6\u95f4\u4e0e\u65f6\u533a \u786e\u8ba4\u6e90\u5e76\u5b89\u88c5\u5e38\u7528\u8f6f\u4ef6\u5305 \u8fd9\u4e9b\u5c06\u4f1a\u5728\u4e0b\u4e00\u7ae0\u8282\u8be6\u7ec6\u89e3\u8bf4\u3002 \u4f46\u5c31\u76ee\u524d\u800c\u8a00\uff0c\u4e3a\u4e86\u65b9\u4fbf\u540e\u7eed\u8fdc\u7a0b\u8fde\u63a5\uff0c\u53ef\u4ee5\u5148\u914d\u7f6e\u5141\u8bb8 root \u7528\u6237\u8fdb\u884c\u8fdc\u7a0b\u8bbf\u95ee\u3002 \u65b9\u6cd5\u662f\u4fee\u6539 /etc/ssh/sshd_config , \u5728 32 \u884c\u7684 # /etc/ssh/sshd_config #PermitRootLogin prohibit-password \u4fee\u6539\u4e3a\uff1a # /etc/ssh/sshd_config PermitRootLogin yes \u8ba9 SSH \u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e # systemctl reload ssh \u4e4b\u540e\u53ef\u4ee5\u901a\u8fc7 SSH \u8fdc\u7a0b\u767b\u9646\uff0c\u65b9\u4fbf\u540e\u7eed\u5b9e\u9a8c\u3002 \u6ce8\u610f\uff0c\u5b9e\u9645\u5e94\u7528\u4e2d\u5e94\u5c3d\u91cf\u907f\u514d\u4f7f\u7528 root \u7528\u6237","title":"\u5b89\u88c5\u540e\u914d\u7f6e"},{"location":"intro/","text":"Debian \u7b80\u4ecb Debian \u662f\u7531\u81ea\u7531\u548c\u5f00\u653e\u6e90\u4ee3\u7801\u7684\u8f6f\u4ef6\u7ec4\u6210\u7684\uff0c\u5e76\u5c06\u59cb\u7ec8\u4fdd\u6301100%\u81ea\u7531\u3002\u6bcf\u4e2a\u4eba\u90fd\u80fd\u81ea\u7531\u4f7f\u7528\u3001\u4fee\u6539\uff0c\u4ee5\u53ca\u5206\u53d1\u3002\u8fd9\u662f\u6211\u4eec\u5bf9\u6211\u4eec\u7684\u7528\u6237\u7684\u4e3b\u8981\u627f\u8bfa\u3002\u5b83\u4e5f\u662f\u514d\u8d39\u7684\u3002 \u2014\u2014 Debian.org Debian ( /\u02c8de.bi.\u0259n/ ) \u662f\u4e00\u4e2a\u57fa\u4e8e\u591a\u79cd\u5185\u6838\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5f53\u524d\u5e38\u7528\u7684\u5185\u6838\u6709 Linux \u4e0e FreeBSD\uff0cDebian \u751a\u81f3\u8fd8\u6709\u4f7f\u7528 GNU Hurd \u7684\u7248\u672c\u3002 \u4f46\u662f\u5f53\u6211\u4eec\u63d0\u5230 Debian \u7684\u65f6\u5019\uff0c\u6211\u4eec\u591a\u6570\u662f\u5728\u6307 Debian GNU/Linux \u8fd9\u4e00 Linux \u53d1\u884c\u7248\u3002 Debian \u662f\u4e00\u4e2a\u652f\u6301\u81ea\u7531\u8f6f\u4ef6\u5de5\u7a0b\u7684\u64cd\u4f5c\u7cfb\u7edf ( \u5c3d\u7ba1\u56e0\u4e3a\u5728\u8f6f\u4ef6\u6e90\u91cc\u63d0\u4f9b Non-free \u8f6f\u4ef6\u5305\u800c\u5bfc\u81f4\u5176\u4e0d\u88ab GNU \u627f\u8ba4\u4e3a\u4e00\u4e2a\u771f\u6b63\u7684\u81ea\u7531\u64cd\u4f5c\u7cfb\u7edf )\uff0c\u4ed6\u6ca1\u6709\u4efb\u4f55\u4f7f\u7528\u8d39\u7528\uff0c\u4e5f\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u5546\u4e1a\u516c\u53f8\u3002( \u8fd9\u4e00\u70b9\u5c24\u5176\u662f\u5728 CentOS \u98ce\u6ce2\u4f53\u73b0\u7684\u6700\u4e3a\u7a81\u51fa )\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u968f\u610f\u4e0b\u8f7d\u4f7f\u7528\u5e76\u4e0d\u9700\u8981\u652f\u4ed8\u4efb\u4f55\u8d39\u7528\u3002 \u6709\u5927\u91cf Linux \u53d1\u884c\u7248\u90fd\u662f\u57fa\u4e8e Debian \u8fdb\u884c\u4e8c\u6b21\u4fee\u6539\u53d1\u884c\u7684\uff0c\u8fd9\u4e9b\u7cfb\u7edf\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a Ubuntu Kali Linux Linux Mint deepin \u7b49\u3002 \u5f53\u5b66\u4e60 Debian \u4e4b\u540e\uff0c\u5207\u6362\u81f3\u8fd9\u4e9b\u57fa\u4e8e Debian \u7684\u53d1\u884c\u7248\u4e5f\u4f1a\u611f\u5230\u76f8\u5f53\u8f7b\u677e\u4e14\u6ca1\u6709\u4ec0\u4e48\u4e0d\u9002\u4e4b\u5904\u3002 \u4f46\u8981\u77e5\u9053\u7684\u662f\uff0c\u5927\u5bb6\u540c\u4e3a Linux\uff0c\u5c3d\u7ba1\u53d1\u884c\u7248\u4e0d\u751a\u76f8\u540c\uff0c\u4f46\u6bd5\u7adf\u8fd8\u6709\u8bb8\u591a\u76f8\u4f3c\u4e4b\u5904\uff0c\u56e0\u6b64\u5199\u4f5c\u65f6\uff0c\u4e00\u4e9b\u5730\u65b9\u4f1a\u4e0e\u5176\u4ed6\u53d1\u884c\u7248 ( \u4e3b\u8981\u6307 Red Hat\u4e00\u7c7b\u7684\u53d1\u884c\u7248 )\u505a\u5bf9\u6bd4\uff0c\u4f60\u4f1a\u53d1\u73b0\u5373\u4fbf\u4ee5\u524d\u4f7f\u7528\u7684\u662f\u5176\u4ed6\u53d1\u884c\u7248\uff0c\u5207\u6362\u81f3 Debian \u4e5f\u4e0d\u4f1a\u6709\u592a\u591a\u7684\u56f0\u96be\u3002 \u672c\u4e66\u4e2d\u4f1a\u7528 Debian \u6765\u6307\u4ee3 Debian GNU/Linux \u8fd9\u4e00 Linux \u53d1\u884c\u7248\uff0c\u800c\u57fa\u4e8e FreeBSD \u5185\u6838\u4e0e GNU Hurd \u5185\u6838\u7684 Debian \u7cfb\u7edf\u4e0d\u5728\u6b64\u4e66\u7684\u8ba8\u8bba\u8303\u56f4\u5185\u3002 \u7531\u4e8e\u7b14\u8005\u6c34\u5e73\u6709\u9650\uff0c\u4e14\u6210\u4e66\u65f6\u95f4\u8f83\u4e3a\u5306\u5fd9\uff0c\u4e66\u4e2d\u5fc5\u6709\u8bb8\u591a\u9057\u6f0f\u4e4b\u5904\uff0c\u52b3\u70e6\u5404\u4f4d\u8bfb\u8005\u6307\u51fa\u3002","title":"Debian \u7b80\u4ecb"},{"location":"intro/#debian","text":"Debian \u662f\u7531\u81ea\u7531\u548c\u5f00\u653e\u6e90\u4ee3\u7801\u7684\u8f6f\u4ef6\u7ec4\u6210\u7684\uff0c\u5e76\u5c06\u59cb\u7ec8\u4fdd\u6301100%\u81ea\u7531\u3002\u6bcf\u4e2a\u4eba\u90fd\u80fd\u81ea\u7531\u4f7f\u7528\u3001\u4fee\u6539\uff0c\u4ee5\u53ca\u5206\u53d1\u3002\u8fd9\u662f\u6211\u4eec\u5bf9\u6211\u4eec\u7684\u7528\u6237\u7684\u4e3b\u8981\u627f\u8bfa\u3002\u5b83\u4e5f\u662f\u514d\u8d39\u7684\u3002 \u2014\u2014 Debian.org Debian ( /\u02c8de.bi.\u0259n/ ) \u662f\u4e00\u4e2a\u57fa\u4e8e\u591a\u79cd\u5185\u6838\u7684\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5f53\u524d\u5e38\u7528\u7684\u5185\u6838\u6709 Linux \u4e0e FreeBSD\uff0cDebian \u751a\u81f3\u8fd8\u6709\u4f7f\u7528 GNU Hurd \u7684\u7248\u672c\u3002 \u4f46\u662f\u5f53\u6211\u4eec\u63d0\u5230 Debian \u7684\u65f6\u5019\uff0c\u6211\u4eec\u591a\u6570\u662f\u5728\u6307 Debian GNU/Linux \u8fd9\u4e00 Linux \u53d1\u884c\u7248\u3002 Debian \u662f\u4e00\u4e2a\u652f\u6301\u81ea\u7531\u8f6f\u4ef6\u5de5\u7a0b\u7684\u64cd\u4f5c\u7cfb\u7edf ( \u5c3d\u7ba1\u56e0\u4e3a\u5728\u8f6f\u4ef6\u6e90\u91cc\u63d0\u4f9b Non-free \u8f6f\u4ef6\u5305\u800c\u5bfc\u81f4\u5176\u4e0d\u88ab GNU \u627f\u8ba4\u4e3a\u4e00\u4e2a\u771f\u6b63\u7684\u81ea\u7531\u64cd\u4f5c\u7cfb\u7edf )\uff0c\u4ed6\u6ca1\u6709\u4efb\u4f55\u4f7f\u7528\u8d39\u7528\uff0c\u4e5f\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u5546\u4e1a\u516c\u53f8\u3002( \u8fd9\u4e00\u70b9\u5c24\u5176\u662f\u5728 CentOS \u98ce\u6ce2\u4f53\u73b0\u7684\u6700\u4e3a\u7a81\u51fa )\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u968f\u610f\u4e0b\u8f7d\u4f7f\u7528\u5e76\u4e0d\u9700\u8981\u652f\u4ed8\u4efb\u4f55\u8d39\u7528\u3002 \u6709\u5927\u91cf Linux \u53d1\u884c\u7248\u90fd\u662f\u57fa\u4e8e Debian \u8fdb\u884c\u4e8c\u6b21\u4fee\u6539\u53d1\u884c\u7684\uff0c\u8fd9\u4e9b\u7cfb\u7edf\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a Ubuntu Kali Linux Linux Mint deepin \u7b49\u3002 \u5f53\u5b66\u4e60 Debian \u4e4b\u540e\uff0c\u5207\u6362\u81f3\u8fd9\u4e9b\u57fa\u4e8e Debian \u7684\u53d1\u884c\u7248\u4e5f\u4f1a\u611f\u5230\u76f8\u5f53\u8f7b\u677e\u4e14\u6ca1\u6709\u4ec0\u4e48\u4e0d\u9002\u4e4b\u5904\u3002 \u4f46\u8981\u77e5\u9053\u7684\u662f\uff0c\u5927\u5bb6\u540c\u4e3a Linux\uff0c\u5c3d\u7ba1\u53d1\u884c\u7248\u4e0d\u751a\u76f8\u540c\uff0c\u4f46\u6bd5\u7adf\u8fd8\u6709\u8bb8\u591a\u76f8\u4f3c\u4e4b\u5904\uff0c\u56e0\u6b64\u5199\u4f5c\u65f6\uff0c\u4e00\u4e9b\u5730\u65b9\u4f1a\u4e0e\u5176\u4ed6\u53d1\u884c\u7248 ( \u4e3b\u8981\u6307 Red Hat\u4e00\u7c7b\u7684\u53d1\u884c\u7248 )\u505a\u5bf9\u6bd4\uff0c\u4f60\u4f1a\u53d1\u73b0\u5373\u4fbf\u4ee5\u524d\u4f7f\u7528\u7684\u662f\u5176\u4ed6\u53d1\u884c\u7248\uff0c\u5207\u6362\u81f3 Debian \u4e5f\u4e0d\u4f1a\u6709\u592a\u591a\u7684\u56f0\u96be\u3002 \u672c\u4e66\u4e2d\u4f1a\u7528 Debian \u6765\u6307\u4ee3 Debian GNU/Linux \u8fd9\u4e00 Linux \u53d1\u884c\u7248\uff0c\u800c\u57fa\u4e8e FreeBSD \u5185\u6838\u4e0e GNU Hurd \u5185\u6838\u7684 Debian \u7cfb\u7edf\u4e0d\u5728\u6b64\u4e66\u7684\u8ba8\u8bba\u8303\u56f4\u5185\u3002 \u7531\u4e8e\u7b14\u8005\u6c34\u5e73\u6709\u9650\uff0c\u4e14\u6210\u4e66\u65f6\u95f4\u8f83\u4e3a\u5306\u5fd9\uff0c\u4e66\u4e2d\u5fc5\u6709\u8bb8\u591a\u9057\u6f0f\u4e4b\u5904\uff0c\u52b3\u70e6\u5404\u4f4d\u8bfb\u8005\u6307\u51fa\u3002","title":"Debian \u7b80\u4ecb"},{"location":"labs/","text":"\u672c\u5b9e\u9a8c\u4f7f\u7528 2020 \u5e74\u5168\u56fd\u804c\u4e1a\u9662\u6821\u6280\u80fd\u5927\u8d5b\uff1a\u7f51\u7edc\u7cfb\u7edf\u7ba1\u7406\u9879\u76ee-\u6a21\u5757 A \u6837\u9898\u4e00\uff0c\u4e14\u5728\u539f\u59cb\u9898\u76ee\u4e0a\u6709\u6240\u4fee\u6539\uff0c\u4f7f\u5176\u8d34\u8fd1\u539f\u9898\u3002 \u53ef\u5728\u5982\u4e0b\u4f4d\u7f6e\u4e0b\u8f7d\u5f97\u5230\uff1a \u4e0b\u8f7d\u5730\u5740 \u5b9e\u9a8c\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u8fd8\u9700\u8981 WordPress \u548c phpMyAdmin \uff0c\u53ef\u4ece\u5404\u81ea\u7684\u5b98\u7f51\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\u3002 \u6211\u6839\u636e\u5b9e\u9a8c\u73af\u5883\u9700\u6c42\u5236\u4f5c\u4e86\u4e00\u4e2a VMware \u955c\u50cf\uff0c\u53ef\u76f4\u63a5\u5bfc\u5165 VMware Workstation \u4e2d\uff0c\u83b7\u5f97\u7c7b\u4f3c\u7684\u5b9e\u9a8c\u73af\u5883\u3002 \u7531\u4e8e\u5b9e\u9a8c\u73af\u5883\u9700\u6c42\u5185\u5b58\u91cf\u975e\u5e38\u5927\uff0c\u5efa\u8bae\u8fd0\u884c\u6b64\u5b9e\u9a8c\u73af\u5883\u7684\u4e3b\u673a\u6700\u597d\u5177\u6709 16G \u4ee5\u4e0a\u5185\u5b58\u3002 \u5b9e\u9a8c\u9700\u8981\u7684\u5176\u4ed6\u672a\u63d0\u4f9b\u7684\u8f6f\u4ef6\u53ef\u81ea\u884c\u53bb\u5176\u5b98\u7f51\u4e0b\u8f7d \u5b9e\u9a8c\u73af\u5883\u4f7f\u7528\u65b9\u6cd5 \u5c06\u4e0b\u8f7d\u7684\u865a\u62df\u673a\u89e3\u538b\u540e\uff0c\u5c06\u865a\u62df\u673a\u5bfc\u5165 VMware Workstation\uff0c\u6839\u636e\u5b9e\u9645\u914d\u7f6e\u589e\u5927 CPU \u6838\u5fc3\u6570 ( \u5408\u7406\u8303\u56f4\u5185\u8d8a\u5927\u8d8a\u597d ) \u6839\u636e\u5b9e\u9a8c\u73af\u5883\u4fee\u6539\u7f51\u5361\u4e3a\u6865\u63a5\u6a21\u5f0f\u6216\u4ec5\u4e3b\u673a\u6a21\u5f0f\u3002 \u6253\u5f00\u865a\u62df\u673a\u540e\uff0c\u5f85 ESXi \u542f\u52a8\u5b8c\u6210\uff0c\u4e4b\u540e\u5728\u5bbf\u4e3b\u673a\u7528\u6d4f\u89c8\u5668\u6253\u5f00\u663e\u793a\u7684 IP \u5730\u5740\uff0c\u6216\u4f7f\u7528\u5bbf\u4e3b\u673a\u7684 VMware Workstation \u8fde\u63a5\u6b64 IP \u5730\u5740\u5373\u53ef\u3002 \u8d26\u53f7\uff1aroot \u5bc6\u7801\uff1aChinaskills20! \u6bcf\u6b21\u5b9e\u9a8c\u7ed3\u675f\u9700\u8981\u6062\u590d\u521d\u59cb\u72b6\u6001\u65f6\u53ea\u9700\u6062\u590d\u5feb\u7167\u5373\u53ef","title":"\u5b9e\u9a8c\u6848\u4f8b"},{"location":"labs/#_1","text":"\u5c06\u4e0b\u8f7d\u7684\u865a\u62df\u673a\u89e3\u538b\u540e\uff0c\u5c06\u865a\u62df\u673a\u5bfc\u5165 VMware Workstation\uff0c\u6839\u636e\u5b9e\u9645\u914d\u7f6e\u589e\u5927 CPU \u6838\u5fc3\u6570 ( \u5408\u7406\u8303\u56f4\u5185\u8d8a\u5927\u8d8a\u597d ) \u6839\u636e\u5b9e\u9a8c\u73af\u5883\u4fee\u6539\u7f51\u5361\u4e3a\u6865\u63a5\u6a21\u5f0f\u6216\u4ec5\u4e3b\u673a\u6a21\u5f0f\u3002 \u6253\u5f00\u865a\u62df\u673a\u540e\uff0c\u5f85 ESXi \u542f\u52a8\u5b8c\u6210\uff0c\u4e4b\u540e\u5728\u5bbf\u4e3b\u673a\u7528\u6d4f\u89c8\u5668\u6253\u5f00\u663e\u793a\u7684 IP \u5730\u5740\uff0c\u6216\u4f7f\u7528\u5bbf\u4e3b\u673a\u7684 VMware Workstation \u8fde\u63a5\u6b64 IP \u5730\u5740\u5373\u53ef\u3002 \u8d26\u53f7\uff1aroot \u5bc6\u7801\uff1aChinaskills20! \u6bcf\u6b21\u5b9e\u9a8c\u7ed3\u675f\u9700\u8981\u6062\u590d\u521d\u59cb\u72b6\u6001\u65f6\u53ea\u9700\u6062\u590d\u5feb\u7167\u5373\u53ef","title":"\u5b9e\u9a8c\u73af\u5883\u4f7f\u7528\u65b9\u6cd5"},{"location":"package/","text":"\u672c\u8282\u4f1a\u8bb2\u8ff0 Debian \u7cfb\u53d1\u884c\u7248\u4f7f\u7528\u7684 deb \u8f6f\u4ef6\u5305\uff0c\u5e76\u4f1a\u8bb2\u8ff0 dpkg \u4e0e apt \u5305\u7ba1\u7406\u5de5\u5177\u7684\u7528\u6cd5\u3002 \u7531\u4e8e\u4f7f\u7528\u5305\u7ba1\u7406\u5668\u7ba1\u7406 Linux \u66f4\u5bb9\u6613\uff0c\u5e76\u4e14\u4f1a\u81ea\u52a8\u89e3\u51b3\u4f9d\u8d56\u5173\u7cfb\uff0c\u56e0\u6b64\u8fd9\u591a\u6570\u65f6\u5019\u662f\u4e2a\u597d\u4e3b\u610f\u3002 \u4e0d\u540c\u4e8e CentOS \u90a3\u5c11\u7684\u53ef\u601c\u7684\u81ea\u5e26\u8f6f\u4ef6\u5305\uff0c\u4ee5\u53ca RHEL \u975e\u8ba2\u9605\u7528\u6237\u53ea\u80fd\u4f7f\u7528\u5149\u76d8\u955c\u50cf\u91cc\u7684\u5c11\u91cf\u8f6f\u4ef6\u5305\uff0cDebian \u63d0\u4f9b\u4e86\u6d77\u91cf\u7684\u8f6f\u4ef6\u5305\uff0c\u800c\u4e14\u8bb8\u591a\u65f6\u5019\u4e0d\u9700\u8981\u4f9d\u8d56\u7b2c\u4e09\u65b9\u6e90 ( \u4e0d\u540c\u4e8e CentOS \u7684\u5927\u91cf\u8f6f\u4ef6\u5305\u9700\u8981\u4f9d\u8d56 EPEL )\u3002 \u5f53\u7136\uff0c\u5373\u4fbf\u662f\u9700\u8981\u7b2c\u4e09\u65b9\u6e90\u7684\u573a\u5408 ( \u4f8b\u5982\u90e8\u7f72 Docker \u4e0e Kubernetes \u96c6\u7fa4 )\uff0cDebian \u4e5f\u80fd\u8f7b\u677e\u7684\u589e\u52a0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u6e90\u3002","title":"\u672c\u7ae0\u524d\u8a00"},{"location":"sdn/","text":"SDN 2022 \u5e74\u56fd\u8d5b\u4e2d\u65b0\u589e\u4e86 SDN \u90e8\u5206\uff0c\u6837\u9898\u8981\u6c42\u51fa\u73b0\u4e86\u4f7f\u7528 mininet \u642d\u5efa\u7b80\u5355\u7684 SDN \u62d3\u6251\u3002 \u65e2\u7136\u5bf9 SDN \u6709\u4e86\u8003\u5bdf\uff0c\u5e76\u4e14\u6bd4\u8d5b\u6587\u4ef6\u4e2d\u51fa\u73b0\u4e86 Virt-Manager \u8f6f\u4ef6\uff0c\u6211\u5927\u80c6\u9884\u6d4b\u8fd1\u5e74\u7684\u6bd4\u8d5b\u4f1a\u589e\u52a0\u5bf9 KVM \u865a\u62df\u5316\u7684\u8003\u5bdf\u3002 \u7531\u6b64\u53ef\u4ee5\u63a8\u8bba\uff0c\u90e8\u7f72 KVM \u865a\u62df\u673a\uff0c\u5c06\u5176\u7f51\u7edc\u6302\u8f7d\u5230 OVS \u4e00\u7c7b\u7684\u8003\u9898\u4e5f\u662f\u5b8c\u5168\u53ef\u80fd\u51fa\u73b0\u7684\u3002 \u8fd9\u4e9b\u90fd\u662f\u9898\u5916\u8bdd\uff0c\u6211\u4eec\u6765\u4e00\u8d77\u770b\u4e00\u4e0b\u672c\u6b21\u7684\u6837\u9898\u4e2d\u51fa\u73b0\u7684 SDN \u8003\u5bdf\u9879\u76ee\u3002 \u4ecb\u7ecd OpenDaylight OpenDayLight \u662f\u591a\u5bb6\u7f51\u7edc\u5382\u5546\u8054\u5408\uff0c\u793e\u533a\u9a71\u52a8\u7684\u4e00\u6b3e\u5f00\u6e90\u7684 SDN \u63a7\u5236\u5668\uff0c\u4ed6\u652f\u6301 Rest API \u98ce\u683c\u7684\u5317\u5411\u63a5\u53e3\uff0c\u652f\u6301 Yang , NetConf , OpenFlow \u7b49\u591a\u79cd\u98ce\u683c\u7684\u5357\u5411\u63a5\u53e3\uff0c\u662f\u5f53\u4eca\u5f00\u6e90 SDN \u89e3\u51b3\u65b9\u6848\u7684\u4e3b\u529b\u519b\u3002 OpenVSwitch OpenVSwitch \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\uff0c\u793e\u533a\u9a71\u52a8\u7684\uff0c\u517c\u5bb9 OpenFlow \u534f\u8bae\uff0c\u652f\u6301\u4e3b\u8981 L2 \u529f\u80fd\u7684\u5f00\u6e90\u4ea4\u6362\u673a\u7ec4\u4ef6\u3002OpenVSwitch \u7684\u5f00\u53d1\u662f\u5bf9\u6807 VMware \u5206\u5e03\u5f0f\u865a\u62df\u4ea4\u6362\u673a\uff0c\u548c Cisco Nexus 1000V \u800c\u8bbe\u8ba1\u7684\uff0c\u56e0\u6b64\u88ab\u5927\u91cf\u5e94\u7528\u5728\u5f00\u6e90 IaaS \u5e73\u53f0\u4e2d\uff0c\u4f8b\u5982 OpenStack \u7b49\uff0c\u5f00\u6e90\u9ad8\u6027\u80fd\u7f51\u7edc\u65b9\u6848 DPDK \u4e5f\u79fb\u690d\u4e86 OVS \u90e8\u5206\uff0c\u79f0\u4f5c OVS-DPDK\uff0c\u662f\u5f53\u4eca Linux \u4e0b\u9ad8\u6027\u80fd\u6570\u636e\u4e2d\u5fc3\u7f51\u7edc\u7684\u4e3b\u6d41\u89e3\u51b3\u65b9\u6848\u3002 mininet mininet \u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u7f51\u7edc\u5e73\u53f0\uff0c\u5229\u7528 mininet \u53ef\u4ee5\u5feb\u901f\u521b\u5efa\u62d3\u6251\uff0c\u8fdb\u884c SDN \u7684\u5b9e\u9a8c\u3002 Lab \u5148\u6765\u770b\u5b9e\u9a8c\u8981\u6c42\u4e0e\u62d3\u6251 Requirements \u5b89\u88c5opendaylight\u3001mininet\u3001Ovs\u8f6f\u4ef6\u5e73\u53f0\u3002\u3002 \u542f\u52a8OpenDayLight\u7684karaf\u7a0b\u5e8f\uff0c\u5b89\u88c5\u5982\u4e0b\u7ec4\u4ef6\uff1aodl-restconf\u3001odl-l2switch-switch-ui\u3001odl-mdsal-apidocs\u3001odl-dluxapps-applications\u3002 \u4f7f\u7528Mininet\u548cOpenVswitch\u6784\u5efa\u62d3\u6251\uff0c\u8fde\u63a5ODL\u76846653\u7aef\u53e3\u5982\u4e0b\u62d3\u6251\u7ed3\u6784\uff1a \u5728\u6d4f\u89c8\u5668\u4e0a\u53ef\u4ee5\u8bbf\u95eeODL\u7ba1\u7406\u9875\u9762\u67e5\u770b\u7f51\u5143\u62d3\u6251\u7ed3\u6784\u3002 \u901a\u8fc7OVS\u624b\u5de5\u4e0b\u53d1\u6d41\u8868\uff0cH1\u53ef\u4ee5ping\u901aH3\uff0cH1\u3001H3\u65e0\u6cd5ping\u901aH2\u3002 H1\u542f\u52a8HTTP-Server\u529f\u80fd\uff0cWEB\u7aef\u53e3\u4e3a8080\uff0cH3\u4f5c\u4e3aHTTP-Client\uff0c\u83b7\u53d6H1\u7684html\u7f51\u9875\u914d\u7f6e\u6587\u4ef6\u3002 Solution \u5b89\u88c5 mininet DLBD 1 \u91cc\u6ca1\u6709 mininet\uff0c\u4f46\u5b9e\u9645\u7f51\u7edc\u6e90\u91cc\u662f\u6709\u7684\uff0c\u4e5f\u8bb8\u5728 DLBD 2 \u91cc\u4f1a\u6709 \u6211\u5b89\u88c5\u7684\u65f6\u5019\u4f7f\u7528\u7684\u662f\u7f51\u7edc\u6e90 \u5c3d\u7ba1\u8d5b\u9898\u91cc\uff0c\u8fd9\u4e2a\u8282\u70b9\u662f\u5728 CentOS \u8fd0\u884c\u7684\uff0c\u4f46\u6211\u8ba4\u4e3a\u5728 CentOS \u4e0a\u8003\u8fd9\u9053\u9898\u7684\u53ef\u80fd\u6027\u5f88\u5c0f\u3002 \u8fd9\u9053\u9898\u4e0d\u53ef\u80fd\u653e\u5728 CentOS \u4e0a\u505a\uff0cCentOS \u5fc5\u987b\u4ece\u6e90\u7801\u5b89\u88c5\uff0cmininet \u4e5f\u6ca1\u6709\u7ed9\u51fa\u5bf9 CentOS \u7684\u660e\u786e\u652f\u6301\u3002\u8fde mininet \u7684\u5b89\u88c5\u811a\u672c\u4e5f\u6ca1\u6709\u652f\u6301 CentOS\uff0cCentOS \u4e5f\u6ca1\u6709 OpenVSwitch \u7684\u5305\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c\u8fd9\u9053\u9898\u8981\u5728 CentOS \u5b8c\u6210\uff0c\u4e0d\u4f46\u6240\u6709\u4f9d\u8d56\u5305\u90fd\u8981\u4ece\u6e90\u7801\u7f16\u8bd1\uff0c\u800c\u4e14\u4e5f\u4e0d\u4fdd\u8bc1\u53ef\u7528\u6027\uff0c\u800c\u4f7f\u7528 Debian \u5219\u4f1a\u5f88\u7b80\u5355 $ apt install mininet # openvswitch \u4f1a\u4f5c\u4e3a mininet \u7684\u4f9d\u8d56\u5b89\u88c5 \u90e8\u7f72 OpenDayLight \u63d0\u9192\u4e00\u53e5\uff0cOpenDayLight \u7248\u672c\u592a\u65b0\u662f\u6ca1\u6709\u6240\u9700\u7684\u529f\u80fd\u7684\uff0c\u6700\u9ad8\u53ea\u80fd\u4f7f\u7528 0.7.3 \u5373 Nitrogen \u7248\u672c \u4e0b\u8f7d\u5730\u5740\u4e3a \u8fd9\u91cc \u4e0a\u4f20 OpenDayLight \u5230\u4e3b\u673a\uff0c\u89e3\u538b $ tar -xvf karaf-0.7.3.tar.gz OpenDaylight \u4f7f\u7528 Java\uff0c\u5148\u5b89\u88c5 JRE \u73b0\u5728\u51fa\u73b0\u4e86\u4e00\u4e2a\u95ee\u9898 0.7.3 \u7248\u672c\u7684 ODL \u9700\u8981 JRE 8\uff0c\u4f46 Debian \u7684\u6e90\u91cc\u4e0d\u63d0\u4f9b JDK 8\uff0c\u5b89\u88c5 JRE 11 \u662f\u4e0d\u652f\u6301\u7684\u3002 CentOS \u786e\u5b9e\u4f1a\u63d0\u4f9b JDK 8\uff0c\u5b89\u88c5 java-1.8.0-openjdk-headless \u5373\u53ef\u3002 \u82e5\u5b9e\u5728\u6709\u9700\u6c42\uff0c\u53ef\u5c06 mininet \u548c ODL \u88c5\u5728\u4e0d\u540c\u4e3b\u673a\u4e0a $ yum install java-1.8.0-openjdk-headless \u6216\u8005\u53ef\u4ee5\u641c\u7d22\u4e00\u4e0b jre \u770b\u662f\u5426\u6709\u5bf9\u5e94\u7248\u672c \u7531\u4e8e\u65e0\u9700\u8fd0\u884c\u5e26\u6709 GUI \u7684 Java \u7a0b\u5e8f\uff0c\u5b89\u88c5\u65e0\u5934\u6a21\u5f0f\u7684 JRE \u5373\u53ef cd \u8fdb\u89e3\u538b\u7684\u76ee\u5f55\uff0c\u542f\u52a8 OpenDaylight \u5e76\u767b\u5f55\u8fdb OpenDayLight CLI $ cd karaf-0.7.3/ $ ./bin/start $ ./bin/client \u5728\u8fd9\u4e2a CLI \u754c\u9762\u5f53\u4e2d\u4e5f\u53ef\u4ee5\u7ba1\u7406 OpenDayLight\uff0c\u9996\u5148\u5b89\u88c5\u5fc5\u8981\u7684\u529f\u80fd \u9996\u5148\u53ef\u4ee5\u5148\u5217\u51fa\u652f\u6301\u7684\u529f\u80fd\u5217\u8868 $ feature:list \u5b89\u88c5\u9700\u6c42\u6587\u6863\u4e2d\u9700\u8981\u7684\u529f\u80fd $ feature:install odl-restconf odl-l2switch-switch-ui odl-m dsal-apidocs odl-dluxapps-applications \u5b89\u88c5\u5b8c\u6210\u540e\u5373\u53ef\u4f7f\u7528 logout \u9000\u51fa \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee :8181/index.html \u5373\u53ef\u6253\u5f00 WebUI\uff0c\u9ed8\u8ba4\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e3a admin/admin \u4f7f\u7528 mininet \u521b\u5efa\u62d3\u6251 \u63a5\u4e0b\u6765\u7528 mininet \u521b\u5efa\u7f51\u7edc\u62d3\u6251 \u597d\u5728\u8fd9\u4e2a\u62d3\u6251\u975e\u5e38\u7b80\u5355\uff0c\u4e0d\u9700\u8981\u6211\u4eec\u5199 Python \u811a\u672c\u4e5f\u53ef\u4ee5\u5b8c\u6210 $ mn --topo=single,3 --controller=remote,ip=127.0.0.1 --switch=ovs,protocols=OpenFlow13 \u542f\u52a8\u540e\uff0c\u5728 OpenDayLight \u7684 UI \u4e2d\u5e94\u8be5\u80fd\u770b\u5230\u4e00\u53f0 OpenFlow \u4ea4\u6362\u673a\u3002 \u67e5\u770b\u4ea4\u6362\u673a\u4fe1\u606f\uff0c\u53ef\u4ee5\u4f7f\u7528 ovs-vsctl \u547d\u4ee4\uff0c\u5728 mininet \u4e2d\uff0c\u5728\u6267\u884c\u7684\u547d\u4ee4\u524d\u9762\u52a0\u4e0a sh \u5373\u53ef\u8fd0\u884c\u7cfb\u7edf\u547d\u4ee4 mininet> sh ovs-vsctl show 24e49e35-e6f2-447e-8815-836b6d53f67d Bridge s1 Controller \"tcp:127.0.0.1:6653\" is_connected: true Controller \"ptcp:6654\" fail_mode: secure Port s1-eth3 Interface s1-eth3 Port s1 Interface s1 type: internal Port s1-eth1 Interface s1-eth1 Port s1-eth2 Interface s1-eth2 ovs_version: \"2.13.5\" \u6839\u636e\u9898\u610f\uff0c\u6211\u4eec\u9700\u8981\u7528 OVS \u624b\u52a8\u4e0b\u53d1\u6d41\u8868\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u62d3\u6251\uff0c\u53ea\u9700\u8981\u8ba9 h1 \u548c h3 \u80fd\u591f\u901a\u4fe1\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u7b80\u5355\u7684\u8ba9 h1 \u53d1\u9001\u7684\u6570\u636e\u4e22\u7ed9 h3\uff0ch3 \u7684\u6570\u636e\u4e22\u7ed9 h1 \u5373\u53ef\u3002 \u5728 mininet \u7684 CLI \u4e2d\uff0c\u521b\u5efa\u6d41\u8868 mininet> dpctl add-flow in_port=1,actions=output:3 *** s1 ------------------------------------------------------------------------ mininet> dpctl add-flow in_port=3,actions=output:1 *** s1 ------------------------------------------------------------------------ \u68c0\u6d4b\u8fde\u901a\u6027\uff0c\u540c\u6837\u662f\u5728 mininet \u4e2d\u8fdb\u884c mininet> h1 ping h3 PING 10.0.0.3 (10.0.0.3) 56(84) bytes of data. 64 \u5b57\u8282\uff0c\u6765\u81ea 10.0.0.3: icmp_seq=1 ttl=64 \u65f6\u95f4=2.75 \u6beb\u79d2 64 \u5b57\u8282\uff0c\u6765\u81ea 10.0.0.3: icmp_seq=2 ttl=64 \u65f6\u95f4=0.647 \u6beb\u79d2 64 \u5b57\u8282\uff0c\u6765\u81ea 10.0.0.3: icmp_seq=3 ttl=64 \u65f6\u95f4=0.059 \u6beb\u79d2 64 \u5b57\u8282\uff0c\u6765\u81ea 10.0.0.3: icmp_seq=4 ttl=64 \u65f6\u95f4=0.073 \u6beb\u79d2 ^C --- 10.0.0.3 ping \u7edf\u8ba1 --- \u5df2\u53d1\u9001 4 \u4e2a\u5305\uff0c \u5df2\u63a5\u6536 4 \u4e2a\u5305, 0% \u5305\u4e22\u5931, \u8017\u65f6 3045 \u6beb\u79d2 rtt min/avg/max/mdev = 0.059/0.883/2.754/1.105 ms \u800c\u5bf9\u4e8e h2 mininet> h1 ping h2 PING 10.0.0.2 (10.0.0.2) 56(84) bytes of data. ^C --- 10.0.0.2 ping \u7edf\u8ba1 --- \u5df2\u53d1\u9001 3 \u4e2a\u5305\uff0c \u5df2\u63a5\u6536 0 \u4e2a\u5305, 100% \u5305\u4e22\u5931, \u8017\u65f6 2040 \u6beb\u79d2 \u53ef\u4ee5\u68c0\u67e5\u4e00\u4e0b\u6d41\u8868 mininet> dpctl dump-flows *** s1 ------------------------------------------------------------------------ cookie=0x2b00000000000000, duration=1146.267s, table=0, n_packets=2, n_bytes=140, priority=2,in_port=\"s1-eth3\" actions=output:\"s1-eth1\",output:\"s1-eth2\",CONTROLLER:65535 cookie=0x2b00000000000001, duration=1146.267s, table=0, n_packets=2, n_bytes=140, priority=2,in_port=\"s1-eth1\" actions=output:\"s1-eth3\",output:\"s1-eth2\",CONTROLLER:65535 cookie=0x2b00000000000002, duration=1146.267s, table=0, n_packets=2, n_bytes=140, priority=2,in_port=\"s1-eth2\" actions=output:\"s1-eth3\",output:\"s1-eth1\",CONTROLLER:65535 cookie=0x0, duration=199.699s, table=0, n_packets=9, n_bytes=602, in_port=\"s1-eth1\" actions=output:\"s1-eth3\" cookie=0x0, duration=185.006s, table=0, n_packets=6, n_bytes=476, in_port=\"s1-eth3\" actions=output:\"s1-eth1\" cookie=0x2b00000000000000, duration=1147.829s, table=0, n_packets=0, n_bytes=0, priority=100,dl_type=0x88cc actions=CONTROLLER:65535 cookie=0x2b00000000000000, duration=1147.844s, table=0, n_packets=0, n_bytes=0, priority=0 actions=drop \u6700\u540e\u662f\u5f00\u542f\u7b80\u5355 HTTP Server \u6d4b\u8bd5 \u8fd9\u4e2a HTTP Server \u53ef\u4ee5\u7528 Python \u7684\u5185\u7f6e\u6a21\u5757\u5b8c\u6210\uff0c\u6839\u636e Python \u7684\u7248\u672c\u4e0d\u540c\uff0c\u5305\u540d\u4f1a\u6709\u53d8\u5316\uff0c\u6211\u8fd9\u91cc\u662f Python 2\uff0c\u53ef\u4ee5\u68c0\u9a8c\u4e00\u4e0b mininet> py sys.version 2.7.18 (default, Mar 8 2021, 13:02:45) [GCC 9.3.0] \u5982\u4e0a\u6240\u793a\uff0c\u6211\u8fd9\u91cc\u662f Python 2\uff0c\u56e0\u6b64\u4f7f\u7528\u4e0b\u9762\u547d\u4ee4\u5728 h1 \u4e0a\u5f00\u542f HTTP Server mininet> h1 python -m SimpleHTTPServer & Serving HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ... \u5e76\u5728 h3 \u4e0a\u8bbf\u95ee mininet> h3 wget -O - h1 --2022-04-04 02:44:25-- http://10.0.0.1/ \u6b63\u5728\u8fde\u63a5 10.0.0.1:80... \u5df2\u8fde\u63a5\u3002 \u5df2\u53d1\u51fa HTTP \u8bf7\u6c42\uff0c\u6b63\u5728\u7b49\u5f85\u56de\u5e94... 200 OK \u957f\u5ea6\uff1a 1061 (1.0K) [text/html] \u6b63\u5728\u4fdd\u5b58\u81f3: \u201cSTDOUT\u201d - 0%[ ] 0 --.-KB/s <!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"> <html> <head> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"> <title>Directory listing for /</title> </head> <body> <h1>Directory listing for /</h1> <hr> <ul> <li><a href=\"bin/\">bin/</a></li> <li><a href=\"build.url\">build.url</a></li> <li><a href=\"configuration/\">configuration/</a></li> <li><a href=\"CONTRIBUTING.markdown\">CONTRIBUTING.markdown</a></li> <li><a href=\"data/\">data/</a></li> <li><a href=\"deploy/\">deploy/</a></li> <li><a href=\"etc/\">etc/</a></li> <li><a href=\"instances/\">instances/</a></li> <li><a href=\"journal/\">journal/</a></li> <li><a href=\"karaf.pid\">karaf.pid</a></li> <li><a href=\"lib/\">lib/</a></li> <li><a href=\"LICENSE\">LICENSE</a></li> <li><a href=\"lock\">lock</a></li> <li><a href=\"patches/\">patches/</a></li> <li><a href=\"README.markdown\">README.markdown</a></li> <li><a href=\"snapshots/\">snapshots/</a></li> <li><a href=\"system/\">system/</a></li> <li><a href=\"taglist.log\">taglist.log</a></li> </ul> <hr> </body> </html> - 100%[===================>] 1.04K --.-KB/s \u7528\u65f6 0s 2022-04-04 02:44:25 (88.1 MB/s) - \u5df2\u5199\u5165\u81f3\u6807\u51c6\u8f93\u51fa [1061/1061] \u5b9e\u9a8c\u7ed3\u675f\u540e\uff0c\u5728 mininet \u547d\u4ee4\u884c\u5185\u8f93\u5165 EOF \u5373\u53ef\u6e05\u7406\u73af\u5883\u9000\u51fa\u3002","title":"SDN"},{"location":"sdn/#sdn","text":"2022 \u5e74\u56fd\u8d5b\u4e2d\u65b0\u589e\u4e86 SDN \u90e8\u5206\uff0c\u6837\u9898\u8981\u6c42\u51fa\u73b0\u4e86\u4f7f\u7528 mininet \u642d\u5efa\u7b80\u5355\u7684 SDN \u62d3\u6251\u3002 \u65e2\u7136\u5bf9 SDN \u6709\u4e86\u8003\u5bdf\uff0c\u5e76\u4e14\u6bd4\u8d5b\u6587\u4ef6\u4e2d\u51fa\u73b0\u4e86 Virt-Manager \u8f6f\u4ef6\uff0c\u6211\u5927\u80c6\u9884\u6d4b\u8fd1\u5e74\u7684\u6bd4\u8d5b\u4f1a\u589e\u52a0\u5bf9 KVM \u865a\u62df\u5316\u7684\u8003\u5bdf\u3002 \u7531\u6b64\u53ef\u4ee5\u63a8\u8bba\uff0c\u90e8\u7f72 KVM \u865a\u62df\u673a\uff0c\u5c06\u5176\u7f51\u7edc\u6302\u8f7d\u5230 OVS \u4e00\u7c7b\u7684\u8003\u9898\u4e5f\u662f\u5b8c\u5168\u53ef\u80fd\u51fa\u73b0\u7684\u3002 \u8fd9\u4e9b\u90fd\u662f\u9898\u5916\u8bdd\uff0c\u6211\u4eec\u6765\u4e00\u8d77\u770b\u4e00\u4e0b\u672c\u6b21\u7684\u6837\u9898\u4e2d\u51fa\u73b0\u7684 SDN \u8003\u5bdf\u9879\u76ee\u3002","title":"SDN"},{"location":"sdn/#_1","text":"","title":"\u4ecb\u7ecd"},{"location":"sdn/#opendaylight","text":"OpenDayLight \u662f\u591a\u5bb6\u7f51\u7edc\u5382\u5546\u8054\u5408\uff0c\u793e\u533a\u9a71\u52a8\u7684\u4e00\u6b3e\u5f00\u6e90\u7684 SDN \u63a7\u5236\u5668\uff0c\u4ed6\u652f\u6301 Rest API \u98ce\u683c\u7684\u5317\u5411\u63a5\u53e3\uff0c\u652f\u6301 Yang , NetConf , OpenFlow \u7b49\u591a\u79cd\u98ce\u683c\u7684\u5357\u5411\u63a5\u53e3\uff0c\u662f\u5f53\u4eca\u5f00\u6e90 SDN \u89e3\u51b3\u65b9\u6848\u7684\u4e3b\u529b\u519b\u3002","title":"OpenDaylight"},{"location":"sdn/#openvswitch","text":"OpenVSwitch \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\uff0c\u793e\u533a\u9a71\u52a8\u7684\uff0c\u517c\u5bb9 OpenFlow \u534f\u8bae\uff0c\u652f\u6301\u4e3b\u8981 L2 \u529f\u80fd\u7684\u5f00\u6e90\u4ea4\u6362\u673a\u7ec4\u4ef6\u3002OpenVSwitch \u7684\u5f00\u53d1\u662f\u5bf9\u6807 VMware \u5206\u5e03\u5f0f\u865a\u62df\u4ea4\u6362\u673a\uff0c\u548c Cisco Nexus 1000V \u800c\u8bbe\u8ba1\u7684\uff0c\u56e0\u6b64\u88ab\u5927\u91cf\u5e94\u7528\u5728\u5f00\u6e90 IaaS \u5e73\u53f0\u4e2d\uff0c\u4f8b\u5982 OpenStack \u7b49\uff0c\u5f00\u6e90\u9ad8\u6027\u80fd\u7f51\u7edc\u65b9\u6848 DPDK \u4e5f\u79fb\u690d\u4e86 OVS \u90e8\u5206\uff0c\u79f0\u4f5c OVS-DPDK\uff0c\u662f\u5f53\u4eca Linux \u4e0b\u9ad8\u6027\u80fd\u6570\u636e\u4e2d\u5fc3\u7f51\u7edc\u7684\u4e3b\u6d41\u89e3\u51b3\u65b9\u6848\u3002","title":"OpenVSwitch"},{"location":"sdn/#mininet","text":"mininet \u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u7f51\u7edc\u5e73\u53f0\uff0c\u5229\u7528 mininet \u53ef\u4ee5\u5feb\u901f\u521b\u5efa\u62d3\u6251\uff0c\u8fdb\u884c SDN \u7684\u5b9e\u9a8c\u3002","title":"mininet"},{"location":"sdn/#lab","text":"\u5148\u6765\u770b\u5b9e\u9a8c\u8981\u6c42\u4e0e\u62d3\u6251","title":"Lab"},{"location":"sdn/#requirements","text":"\u5b89\u88c5opendaylight\u3001mininet\u3001Ovs\u8f6f\u4ef6\u5e73\u53f0\u3002\u3002 \u542f\u52a8OpenDayLight\u7684karaf\u7a0b\u5e8f\uff0c\u5b89\u88c5\u5982\u4e0b\u7ec4\u4ef6\uff1aodl-restconf\u3001odl-l2switch-switch-ui\u3001odl-mdsal-apidocs\u3001odl-dluxapps-applications\u3002 \u4f7f\u7528Mininet\u548cOpenVswitch\u6784\u5efa\u62d3\u6251\uff0c\u8fde\u63a5ODL\u76846653\u7aef\u53e3\u5982\u4e0b\u62d3\u6251\u7ed3\u6784\uff1a \u5728\u6d4f\u89c8\u5668\u4e0a\u53ef\u4ee5\u8bbf\u95eeODL\u7ba1\u7406\u9875\u9762\u67e5\u770b\u7f51\u5143\u62d3\u6251\u7ed3\u6784\u3002 \u901a\u8fc7OVS\u624b\u5de5\u4e0b\u53d1\u6d41\u8868\uff0cH1\u53ef\u4ee5ping\u901aH3\uff0cH1\u3001H3\u65e0\u6cd5ping\u901aH2\u3002 H1\u542f\u52a8HTTP-Server\u529f\u80fd\uff0cWEB\u7aef\u53e3\u4e3a8080\uff0cH3\u4f5c\u4e3aHTTP-Client\uff0c\u83b7\u53d6H1\u7684html\u7f51\u9875\u914d\u7f6e\u6587\u4ef6\u3002","title":"Requirements"},{"location":"sdn/#solution","text":"","title":"Solution"},{"location":"sdn/#mininet_1","text":"DLBD 1 \u91cc\u6ca1\u6709 mininet\uff0c\u4f46\u5b9e\u9645\u7f51\u7edc\u6e90\u91cc\u662f\u6709\u7684\uff0c\u4e5f\u8bb8\u5728 DLBD 2 \u91cc\u4f1a\u6709 \u6211\u5b89\u88c5\u7684\u65f6\u5019\u4f7f\u7528\u7684\u662f\u7f51\u7edc\u6e90 \u5c3d\u7ba1\u8d5b\u9898\u91cc\uff0c\u8fd9\u4e2a\u8282\u70b9\u662f\u5728 CentOS \u8fd0\u884c\u7684\uff0c\u4f46\u6211\u8ba4\u4e3a\u5728 CentOS \u4e0a\u8003\u8fd9\u9053\u9898\u7684\u53ef\u80fd\u6027\u5f88\u5c0f\u3002 \u8fd9\u9053\u9898\u4e0d\u53ef\u80fd\u653e\u5728 CentOS \u4e0a\u505a\uff0cCentOS \u5fc5\u987b\u4ece\u6e90\u7801\u5b89\u88c5\uff0cmininet \u4e5f\u6ca1\u6709\u7ed9\u51fa\u5bf9 CentOS \u7684\u660e\u786e\u652f\u6301\u3002\u8fde mininet \u7684\u5b89\u88c5\u811a\u672c\u4e5f\u6ca1\u6709\u652f\u6301 CentOS\uff0cCentOS \u4e5f\u6ca1\u6709 OpenVSwitch \u7684\u5305\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c\u8fd9\u9053\u9898\u8981\u5728 CentOS \u5b8c\u6210\uff0c\u4e0d\u4f46\u6240\u6709\u4f9d\u8d56\u5305\u90fd\u8981\u4ece\u6e90\u7801\u7f16\u8bd1\uff0c\u800c\u4e14\u4e5f\u4e0d\u4fdd\u8bc1\u53ef\u7528\u6027\uff0c\u800c\u4f7f\u7528 Debian \u5219\u4f1a\u5f88\u7b80\u5355 $ apt install mininet # openvswitch \u4f1a\u4f5c\u4e3a mininet \u7684\u4f9d\u8d56\u5b89\u88c5","title":"\u5b89\u88c5 mininet"},{"location":"sdn/#opendaylight_1","text":"\u63d0\u9192\u4e00\u53e5\uff0cOpenDayLight \u7248\u672c\u592a\u65b0\u662f\u6ca1\u6709\u6240\u9700\u7684\u529f\u80fd\u7684\uff0c\u6700\u9ad8\u53ea\u80fd\u4f7f\u7528 0.7.3 \u5373 Nitrogen \u7248\u672c \u4e0b\u8f7d\u5730\u5740\u4e3a \u8fd9\u91cc \u4e0a\u4f20 OpenDayLight \u5230\u4e3b\u673a\uff0c\u89e3\u538b $ tar -xvf karaf-0.7.3.tar.gz OpenDaylight \u4f7f\u7528 Java\uff0c\u5148\u5b89\u88c5 JRE \u73b0\u5728\u51fa\u73b0\u4e86\u4e00\u4e2a\u95ee\u9898 0.7.3 \u7248\u672c\u7684 ODL \u9700\u8981 JRE 8\uff0c\u4f46 Debian \u7684\u6e90\u91cc\u4e0d\u63d0\u4f9b JDK 8\uff0c\u5b89\u88c5 JRE 11 \u662f\u4e0d\u652f\u6301\u7684\u3002 CentOS \u786e\u5b9e\u4f1a\u63d0\u4f9b JDK 8\uff0c\u5b89\u88c5 java-1.8.0-openjdk-headless \u5373\u53ef\u3002 \u82e5\u5b9e\u5728\u6709\u9700\u6c42\uff0c\u53ef\u5c06 mininet \u548c ODL \u88c5\u5728\u4e0d\u540c\u4e3b\u673a\u4e0a $ yum install java-1.8.0-openjdk-headless \u6216\u8005\u53ef\u4ee5\u641c\u7d22\u4e00\u4e0b jre \u770b\u662f\u5426\u6709\u5bf9\u5e94\u7248\u672c \u7531\u4e8e\u65e0\u9700\u8fd0\u884c\u5e26\u6709 GUI \u7684 Java \u7a0b\u5e8f\uff0c\u5b89\u88c5\u65e0\u5934\u6a21\u5f0f\u7684 JRE \u5373\u53ef cd \u8fdb\u89e3\u538b\u7684\u76ee\u5f55\uff0c\u542f\u52a8 OpenDaylight \u5e76\u767b\u5f55\u8fdb OpenDayLight CLI $ cd karaf-0.7.3/ $ ./bin/start $ ./bin/client \u5728\u8fd9\u4e2a CLI \u754c\u9762\u5f53\u4e2d\u4e5f\u53ef\u4ee5\u7ba1\u7406 OpenDayLight\uff0c\u9996\u5148\u5b89\u88c5\u5fc5\u8981\u7684\u529f\u80fd \u9996\u5148\u53ef\u4ee5\u5148\u5217\u51fa\u652f\u6301\u7684\u529f\u80fd\u5217\u8868 $ feature:list \u5b89\u88c5\u9700\u6c42\u6587\u6863\u4e2d\u9700\u8981\u7684\u529f\u80fd $ feature:install odl-restconf odl-l2switch-switch-ui odl-m dsal-apidocs odl-dluxapps-applications \u5b89\u88c5\u5b8c\u6210\u540e\u5373\u53ef\u4f7f\u7528 logout \u9000\u51fa \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee :8181/index.html \u5373\u53ef\u6253\u5f00 WebUI\uff0c\u9ed8\u8ba4\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e3a admin/admin","title":"\u90e8\u7f72 OpenDayLight"},{"location":"sdn/#mininet_2","text":"\u63a5\u4e0b\u6765\u7528 mininet \u521b\u5efa\u7f51\u7edc\u62d3\u6251 \u597d\u5728\u8fd9\u4e2a\u62d3\u6251\u975e\u5e38\u7b80\u5355\uff0c\u4e0d\u9700\u8981\u6211\u4eec\u5199 Python \u811a\u672c\u4e5f\u53ef\u4ee5\u5b8c\u6210 $ mn --topo=single,3 --controller=remote,ip=127.0.0.1 --switch=ovs,protocols=OpenFlow13 \u542f\u52a8\u540e\uff0c\u5728 OpenDayLight \u7684 UI \u4e2d\u5e94\u8be5\u80fd\u770b\u5230\u4e00\u53f0 OpenFlow \u4ea4\u6362\u673a\u3002 \u67e5\u770b\u4ea4\u6362\u673a\u4fe1\u606f\uff0c\u53ef\u4ee5\u4f7f\u7528 ovs-vsctl \u547d\u4ee4\uff0c\u5728 mininet \u4e2d\uff0c\u5728\u6267\u884c\u7684\u547d\u4ee4\u524d\u9762\u52a0\u4e0a sh \u5373\u53ef\u8fd0\u884c\u7cfb\u7edf\u547d\u4ee4 mininet> sh ovs-vsctl show 24e49e35-e6f2-447e-8815-836b6d53f67d Bridge s1 Controller \"tcp:127.0.0.1:6653\" is_connected: true Controller \"ptcp:6654\" fail_mode: secure Port s1-eth3 Interface s1-eth3 Port s1 Interface s1 type: internal Port s1-eth1 Interface s1-eth1 Port s1-eth2 Interface s1-eth2 ovs_version: \"2.13.5\" \u6839\u636e\u9898\u610f\uff0c\u6211\u4eec\u9700\u8981\u7528 OVS \u624b\u52a8\u4e0b\u53d1\u6d41\u8868\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u62d3\u6251\uff0c\u53ea\u9700\u8981\u8ba9 h1 \u548c h3 \u80fd\u591f\u901a\u4fe1\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u7b80\u5355\u7684\u8ba9 h1 \u53d1\u9001\u7684\u6570\u636e\u4e22\u7ed9 h3\uff0ch3 \u7684\u6570\u636e\u4e22\u7ed9 h1 \u5373\u53ef\u3002 \u5728 mininet \u7684 CLI \u4e2d\uff0c\u521b\u5efa\u6d41\u8868 mininet> dpctl add-flow in_port=1,actions=output:3 *** s1 ------------------------------------------------------------------------ mininet> dpctl add-flow in_port=3,actions=output:1 *** s1 ------------------------------------------------------------------------ \u68c0\u6d4b\u8fde\u901a\u6027\uff0c\u540c\u6837\u662f\u5728 mininet \u4e2d\u8fdb\u884c mininet> h1 ping h3 PING 10.0.0.3 (10.0.0.3) 56(84) bytes of data. 64 \u5b57\u8282\uff0c\u6765\u81ea 10.0.0.3: icmp_seq=1 ttl=64 \u65f6\u95f4=2.75 \u6beb\u79d2 64 \u5b57\u8282\uff0c\u6765\u81ea 10.0.0.3: icmp_seq=2 ttl=64 \u65f6\u95f4=0.647 \u6beb\u79d2 64 \u5b57\u8282\uff0c\u6765\u81ea 10.0.0.3: icmp_seq=3 ttl=64 \u65f6\u95f4=0.059 \u6beb\u79d2 64 \u5b57\u8282\uff0c\u6765\u81ea 10.0.0.3: icmp_seq=4 ttl=64 \u65f6\u95f4=0.073 \u6beb\u79d2 ^C --- 10.0.0.3 ping \u7edf\u8ba1 --- \u5df2\u53d1\u9001 4 \u4e2a\u5305\uff0c \u5df2\u63a5\u6536 4 \u4e2a\u5305, 0% \u5305\u4e22\u5931, \u8017\u65f6 3045 \u6beb\u79d2 rtt min/avg/max/mdev = 0.059/0.883/2.754/1.105 ms \u800c\u5bf9\u4e8e h2 mininet> h1 ping h2 PING 10.0.0.2 (10.0.0.2) 56(84) bytes of data. ^C --- 10.0.0.2 ping \u7edf\u8ba1 --- \u5df2\u53d1\u9001 3 \u4e2a\u5305\uff0c \u5df2\u63a5\u6536 0 \u4e2a\u5305, 100% \u5305\u4e22\u5931, \u8017\u65f6 2040 \u6beb\u79d2 \u53ef\u4ee5\u68c0\u67e5\u4e00\u4e0b\u6d41\u8868 mininet> dpctl dump-flows *** s1 ------------------------------------------------------------------------ cookie=0x2b00000000000000, duration=1146.267s, table=0, n_packets=2, n_bytes=140, priority=2,in_port=\"s1-eth3\" actions=output:\"s1-eth1\",output:\"s1-eth2\",CONTROLLER:65535 cookie=0x2b00000000000001, duration=1146.267s, table=0, n_packets=2, n_bytes=140, priority=2,in_port=\"s1-eth1\" actions=output:\"s1-eth3\",output:\"s1-eth2\",CONTROLLER:65535 cookie=0x2b00000000000002, duration=1146.267s, table=0, n_packets=2, n_bytes=140, priority=2,in_port=\"s1-eth2\" actions=output:\"s1-eth3\",output:\"s1-eth1\",CONTROLLER:65535 cookie=0x0, duration=199.699s, table=0, n_packets=9, n_bytes=602, in_port=\"s1-eth1\" actions=output:\"s1-eth3\" cookie=0x0, duration=185.006s, table=0, n_packets=6, n_bytes=476, in_port=\"s1-eth3\" actions=output:\"s1-eth1\" cookie=0x2b00000000000000, duration=1147.829s, table=0, n_packets=0, n_bytes=0, priority=100,dl_type=0x88cc actions=CONTROLLER:65535 cookie=0x2b00000000000000, duration=1147.844s, table=0, n_packets=0, n_bytes=0, priority=0 actions=drop \u6700\u540e\u662f\u5f00\u542f\u7b80\u5355 HTTP Server \u6d4b\u8bd5 \u8fd9\u4e2a HTTP Server \u53ef\u4ee5\u7528 Python \u7684\u5185\u7f6e\u6a21\u5757\u5b8c\u6210\uff0c\u6839\u636e Python \u7684\u7248\u672c\u4e0d\u540c\uff0c\u5305\u540d\u4f1a\u6709\u53d8\u5316\uff0c\u6211\u8fd9\u91cc\u662f Python 2\uff0c\u53ef\u4ee5\u68c0\u9a8c\u4e00\u4e0b mininet> py sys.version 2.7.18 (default, Mar 8 2021, 13:02:45) [GCC 9.3.0] \u5982\u4e0a\u6240\u793a\uff0c\u6211\u8fd9\u91cc\u662f Python 2\uff0c\u56e0\u6b64\u4f7f\u7528\u4e0b\u9762\u547d\u4ee4\u5728 h1 \u4e0a\u5f00\u542f HTTP Server mininet> h1 python -m SimpleHTTPServer & Serving HTTP on 0.0.0.0 port 80 (http://0.0.0.0:80/) ... \u5e76\u5728 h3 \u4e0a\u8bbf\u95ee mininet> h3 wget -O - h1 --2022-04-04 02:44:25-- http://10.0.0.1/ \u6b63\u5728\u8fde\u63a5 10.0.0.1:80... \u5df2\u8fde\u63a5\u3002 \u5df2\u53d1\u51fa HTTP \u8bf7\u6c42\uff0c\u6b63\u5728\u7b49\u5f85\u56de\u5e94... 200 OK \u957f\u5ea6\uff1a 1061 (1.0K) [text/html] \u6b63\u5728\u4fdd\u5b58\u81f3: \u201cSTDOUT\u201d - 0%[ ] 0 --.-KB/s <!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"> <html> <head> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"> <title>Directory listing for /</title> </head> <body> <h1>Directory listing for /</h1> <hr> <ul> <li><a href=\"bin/\">bin/</a></li> <li><a href=\"build.url\">build.url</a></li> <li><a href=\"configuration/\">configuration/</a></li> <li><a href=\"CONTRIBUTING.markdown\">CONTRIBUTING.markdown</a></li> <li><a href=\"data/\">data/</a></li> <li><a href=\"deploy/\">deploy/</a></li> <li><a href=\"etc/\">etc/</a></li> <li><a href=\"instances/\">instances/</a></li> <li><a href=\"journal/\">journal/</a></li> <li><a href=\"karaf.pid\">karaf.pid</a></li> <li><a href=\"lib/\">lib/</a></li> <li><a href=\"LICENSE\">LICENSE</a></li> <li><a href=\"lock\">lock</a></li> <li><a href=\"patches/\">patches/</a></li> <li><a href=\"README.markdown\">README.markdown</a></li> <li><a href=\"snapshots/\">snapshots/</a></li> <li><a href=\"system/\">system/</a></li> <li><a href=\"taglist.log\">taglist.log</a></li> </ul> <hr> </body> </html> - 100%[===================>] 1.04K --.-KB/s \u7528\u65f6 0s 2022-04-04 02:44:25 (88.1 MB/s) - \u5df2\u5199\u5165\u81f3\u6807\u51c6\u8f93\u51fa [1061/1061] \u5b9e\u9a8c\u7ed3\u675f\u540e\uff0c\u5728 mininet \u547d\u4ee4\u884c\u5185\u8f93\u5165 EOF \u5373\u53ef\u6e05\u7406\u73af\u5883\u9000\u51fa\u3002","title":"\u4f7f\u7528 mininet \u521b\u5efa\u62d3\u6251"},{"location":"ssh/","text":"Secure Shell (SSH) \u662f\u4e00\u4e2a\u5141\u8bb8\u4e24\u53f0\u7535\u8111\u4e4b\u95f4\u901a\u8fc7\u5b89\u5168\u7684\u8fde\u63a5\u8fdb\u884c\u6570\u636e\u4ea4\u6362\u7684\u7f51\u7edc\u534f\u8bae\u3002\u52a0\u5bc6\u4fdd\u8bc1\u4e86\u6570\u636e\u7684\u4fdd\u5bc6\u6027\u548c\u5b8c\u6574\u6027\u3002SSH\u91c7\u7528\u516c\u94a5\u52a0\u5bc6\u6280\u672f\u6765\u9a8c\u8bc1\u8fdc\u7a0b\u4e3b\u673a\uff0c\u4ee5\u53ca(\u5fc5\u8981\u65f6)\u5141\u8bb8\u8fdc\u7a0b\u4e3b\u673a\u9a8c\u8bc1\u7528\u6237\u3002 SSH \u901a\u5e38\u7528\u4e8e\u8fdc\u7a0b\u8bbf\u95ee\u548c\u6267\u884c\u547d\u4ee4\uff0c\u4f46\u662f\u5b83\u4e5f\u652f\u6301\u96a7\u9053\uff0c\u8f6c\u53d1\u4efb\u610f TCP \u7aef\u53e3\u4ee5\u53ca X11 \u8fde\u63a5\uff1b\u5b83\u8fd8\u80fd\u591f\u7528 SFTP \u6216 SCP \u534f\u8bae\u6765\u4f20\u8f93\u6587\u4ef6\u3002 \u4e00\u4e2a SSH \u670d\u52a1\u5668\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728 TCP \u7aef\u53e3 22 \u8fdb\u884c\u76d1\u542c\u3002\u4e00\u4e2a SSH \u5ba2\u6237\u7aef\u7a0b\u5e8f\u901a\u5e38\u88ab\u7528\u6765\u5efa\u7acb\u4e00\u4e2a\u8fdc\u7a0b\u8fde\u63a5\u5230 sshd \u5b88\u62a4\u8fdb\u7a0b\u3002\u8fd9\u4e24\u8005\u90fd\u88ab\u5e7f\u6cdb\u5730\u5b58\u5728\u4e8e\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u5305\u62ec Mac OS X\uff0cGNU/Linux\uff0cSolaris \u548c OpenVMS \u7b49\u3002\u4ee5\u4e13\u6709\u8f6f\u4ef6\u3001\u81ea\u7531\u8f6f\u4ef6\u4ee5\u53ca\u5f00\u6e90\u7248\u672c\u7684\u5f62\u5f0f\u548c\u4e0d\u540c\u7684\u590d\u6742\u6027\u548c\u5b8c\u6574\u6027\u5b58\u5728\u3002 \u901a\u5e38\u6211\u4eec\u4f7f\u7528\u7684 SSH \u6307\u7684\u662f OpenSSH\u3002 OpenSSH (OpenBSD Secure Shell) \u662f\u4e00\u5957\u4f7f\u7528 ssh \u534f\u8bae\uff0c\u901a\u8fc7\u8ba1\u7b97\u673a\u7f51\u7edc\uff0c\u63d0\u4f9b\u52a0\u5bc6\u901a\u8baf\u4f1a\u8bdd\u7684\u8ba1\u7b97\u673a\u7a0b\u5e8f\u3002\u5b83\u88ab\u521b\u5efa\u4e3a SSH Communications Security \u516c\u53f8\u62e5\u6709\u4e13\u5229\u7684 Secure Shell \u8f6f\u4ef6\u5957\u88c5\u7684\u4e00\u4e2a\u5f00\u6e90\u66ff\u4ee3\u3002OpenSSH \u662f\u7531 Theo de Raadt \u9886\u5bfc\u7684 OpenBSD \u9879\u76ee\u7684\u4e00\u90e8\u5206\u3002 \u4eba\u4eec\u5e38\u628a OpenSSH \u4e0e\u76f8\u4f3c\u540d\u5b57\u7684 OpenSSL \u641e\u6df7\uff0c\u4f46\u662f\uff0c\u8fd9\u4e24\u4e2a\u9879\u76ee\u662f\u7531\u4e0d\u540c\u7684\u56e2\u961f\u51fa\u4e8e\u4e0d\u540c\u7684\u76ee\u7684\u5f00\u53d1\u51fa\u6765\u7684\u3002\u76f8\u4f3c\u7684\u540d\u5b57\u53ea\u662f\u7531\u4e8e\u76f8\u4f3c\u7684\u76ee\u6807\u3002 \u672c\u8282\u5c06\u8bb2\u8ff0\u5982\u4f55\u4f7f\u7528 SSH\uff0c\u914d\u7f6e SSH \u670d\u52a1\u7aef\uff0c\u4ee5\u53ca\u5bc6\u94a5\u767b\u5f55\u76f8\u5173\u3002 SSH \u7684\u529f\u80fd\u8fdc\u6bd4\u7edd\u5927\u591a\u6570\u4eba\u60f3\u8c61\u7684\u8981\u5f3a\u5927\u5f97\u591a\uff0c\u4ed6\u53ef\u4ee5\u8f6c\u53d1 X11 \u56fe\u5f62\u754c\u9762\uff0c\u53ef\u4ee5\u8f6c\u53d1\u7aef\u53e3\u6d41\u91cf\uff0c\u53ef\u4ee5\u5efa\u7acb\u7f51\u7edc\u96a7\u9053\uff0c\u751a\u81f3\u6302\u8f7d\u8fdc\u7a0b\u6587\u4ef6\u7cfb\u7edf\uff0c\u4f46\u7531\u4e8e\u7bc7\u5e45\u6709\u9650\uff0c\u5e76\u4e0d\u4f1a\u8bb2\u5230\u6240\u6709\u8fd9\u4e9b\uff0c\u82e5\u60f3\u4e86\u89e3\u53ef\u81ea\u884c\u67e5\u627e ArchWiki","title":"\u672c\u7ae0\u524d\u8a00"},{"location":"systemd/","text":"Systemd \u662f\u5f53\u524d\u4e3b\u6d41\u7684 Linux \u7cfb\u7edf\u7ba1\u7406\u5de5\u5177\uff0c\u4ed6\u8d1f\u8d23\u542f\u52a8\u5176\u4ed6\u7cfb\u7edf\u7a0b\u5e8f\uff0c\u542f\u52a8\u7cfb\u7edf\u5b88\u62a4\u8fdb\u7a0b\uff0c\u6302\u8f7d\u78c1\u76d8\uff0c\u76d1\u89c6\u8fdb\u7a0b\uff0c\u7cfb\u7edf\u65e5\u5fd7\uff0c\u7ef4\u62a4\u767b\u5f55\u7528\u6237\u5217\u8868\uff0c\u53ef\u4ee5\u7b80\u5355\u7684\u7ba1\u7406\u7f51\u7edc\uff0c\u65f6\u95f4\u540c\u6b65\uff0c\u65e5\u5fd7\u8f6c\u53d1\u7b49\u3002 \u8fc7\u53bb\uff0cLinux \u7ee7\u627f Unix\uff0c\u4f7f\u7528 init \uff0c\u542f\u52a8\u4e0e\u7ba1\u7406\u5b88\u62a4\u8fdb\u7a0b\u7c7b\u4f3c\u5982\u4e0b\uff1a $ service smb start # \u6216\u8005 $ sudo /etc/init.d/apache2 start init \u811a\u672c\u975e\u5e38\u590d\u6742\uff0c\u4e14 init \u53ea\u80fd\u8fdb\u884c\u4e32\u884c\u542f\u52a8\uff0c\u542f\u52a8\u65f6\u95f4\u8f83\u957f\u3002 \u4f46 Systemd \u8fc7\u4e8e\u590d\u6742\uff0c\u4e14\u7531\u4e8e\u5404\u79cd\u5404\u6837\u7684\u539f\u56e0\uff0c\u73b0\u5728\u4ecd\u6709\u4e00\u4e9b\u4eba\u53cd\u5bf9\u4f7f\u7528 Systemd\u3002 \u5f53\u524d\u7684\u4e3b\u6d41\u53d1\u884c\u7248\u65e0\u8bba\u662f RHEL \u6216\u662f Debian \u7cfb\uff0c\u751a\u81f3 Arch \u7cfb\u5747\u9ed8\u8ba4\u4f7f\u7528 Systemd\u3002 \u672c\u6587\u5c06\u8bb2\u89e3\u5982\u4f55\u4f7f\u7528 Systemd \u63d0\u4f9b\u7684\u7ba1\u7406\u5de5\u5177\u7ba1\u7406\u5b88\u62a4\u8fdb\u7a0b\uff0c\u8bbe\u5b9a\u8ba1\u5212\u4efb\u52a1\uff0c\u67e5\u770b\u5e76\u7ba1\u7406\u65e5\u5fd7\u7b49\u5185\u5bb9\u3002 \u672c\u8282\u53c2\u8003\uff1a ArchWiki:systemd","title":"\u672c\u7ae0\u524d\u8a00"},{"location":"x11/","text":"","title":"X11"},{"location":"ch10/apache/","text":"","title":"Apache"},{"location":"ch10/dhcp/","text":"\u5305\u540d\uff1a isc-dhcp-server \u914d\u7f6e\u6587\u4ef6\u6709\uff1a /etc/default/isc-dhcp-server /etc/dhcp/dhcpd.conf /etc/default/isc-dhcp-server \u9700\u8981\u589e\u52a0\u76d1\u542c\u7f51\u5361\u540d\uff0c\u4f7f\u7528 ip link \u67e5\u770b\u3002 IPv6 \u90e8\u5206\u7528\u4e0d\u5230\u4e5f\u4e0d\u5fc5\u6ce8\u91ca /etc/dhcp/dhcpd.conf \u4e0e Red Hat \u7c7b\u53d1\u884c\u7248\u65e0\u533a\u522b\uff0c\u6587\u4ef6\u4e2d\u4e5f\u5305\u542b\u914d\u7f6e\u5b9e\u4f8b\u3002 \u8d77\u4e0d\u6765\u670d\u52a1\u91cd\u542f\u7cfb\u7edf\u518d\u8bd5\u3002","title":"DHCP"},{"location":"ch10/dns/","text":"\u5305\u540d: bind9 \u6587\u6863\u5305\u540d: bind9-doc \u7cfb\u7edf\u5185\u6587\u6863: /usr/share/doc/bind9/README.Debian.gz \u914d\u7f6e\u6587\u4ef6\u53ca localhost \u7684\u6b63\u5411\u4e0e\u53cd\u5411\u89e3\u6790\u4fdd\u5b58\u5728 /etc/bind/ \u5f53\u524d\u9ed8\u8ba4\u5de5\u4f5c\u76ee\u5f55\u4e3a /var/cache/bind \u5b98\u65b9\u5efa\u8bae\u5c06\u6570\u636e\u5e93\u5b58\u653e\u5728 /etc/bind/ \u5e76\u5728 named.conf \u4e2d\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84 \u5f53\u524d bind \u9ed8\u8ba4\u4ee5 bind \u7528\u6237\u4e0e\u7ec4\u8fd0\u884c\uff0c\u6ce8\u610f\u6743\u9650\u95ee\u9898\u3002 How To Configure BIND as a Private Network DNS Server on Debian 9","title":"DNS"},{"location":"ch10/dovecot/","text":"","title":"Dovecot"},{"location":"ch10/iproute2/","text":"iproute2 \u4e3a\u73b0\u4ee3 Linux \u53d1\u884c\u7248\u81ea\u5e26\u7684\u8f6f\u4ef6\u5305\uff0c\u4ed6\u4ee3\u66ff\u4e86\u4f20\u7edf\u7684 net-tools \u8f6f\u4ef6\u5305\uff0c\u540e\u8005\u5df2\u7ecf\u4e0d\u518d\u7ef4\u62a4\u3002 Legacy utility Replacement command Note ifconfig ip addr, ip link, ip -s Address and link configuration route ip route Routing tables arp ip neigh Neighbors iptunnel ip tunnel Tunnels nameif, ifrename ip link set name Rename network interfaces ipmaddr ip maddr Multicast netstat ip -s, ss, ip route Show various networking statistics brctl bridge Handle bridge addresses and devices \u7531\u4e8e\u5404\u79cd\u539f\u56e0\uff0c\u4e0d\u5e94\u518d\u4f7f\u7528\u65e7\u7684 net-tools \u5305\uff0c\u4f46 netstat \u4f9d\u7136\u901a\u8fc7\u5176\u4ed6\u8f6f\u4ef6\u5305\u63d0\u4f9b\u3002 Linux \u7f51\u7edc\u6808\u7531\u5185\u6838\u5b8c\u6210\uff0cLinux \u793e\u533a\u4e3a\u7528\u6237\u7a7a\u95f4\u63d0\u4f9b\u4e86 iproute2 \u5de5\u5177\u7ba1\u7406 Linux \u7f51\u7edc\u5185\u6838\u529f\u80fd\u3002 iproute2 \u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684\u547d\u4ee4\uff0c\u7528\u4e8e\u7ba1\u7406 Linux \u7f51\u7edc\u6808\u7684\u4e0d\u540c\u65b9\u9762\uff0c\u5305\u62ec\u7f51\u7edc\u63a5\u53e3\uff0cIP \u5730\u5740\uff0c\u8def\u7531\u8868\uff0c\u7f51\u7edc\u7b56\u7565\u8def\u7531\uff0c\u7f51\u7edc\u547d\u540d\u7a7a\u95f4\u7b49\u3002 ip link \u547d\u4ee4 ip link \u547d\u4ee4\u5c06\u5217\u51fa\u4e3b\u673a\u4e0a\u6240\u6709\u53ef\u7528\u7684\u7f51\u7edc\u63a5\u53e3 [root@localhost ~]# ip link 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000 link/ether 00:0c:29:01:5e:e2 brd ff:ff:ff:ff:ff:ff \u6839\u636e\u8f93\u51fa\u663e\u793a\uff0c\u8be5\u4e3b\u673a\u4e0a\u6709\u4e24\u4e2a\u7f51\u7edc\u63a5\u53e3\uff0c\u5206\u522b\u4e3a\u73af\u56de\u63a5\u53e3 lo \uff0c\u4ee5\u592a\u7f51\u63a5\u53e3 ens33 \u3002 ip link \u547d\u4ee4\u7684\u8f93\u51fa\u5305\u542b\u4e86\u7f51\u7edc\u63a5\u53e3\u7684\u540d\u79f0\uff0c\u72b6\u6001\uff0c\u6700\u5927\u4f20\u8f93\u5355\u5143\uff08MTU\uff09\uff0c\u961f\u5217\u957f\u5ea6\uff0c\u786c\u4ef6\u5730\u5740\u7b49\u4fe1\u606f\u3002 \u6709\u65f6\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5f97\u77e5\u63a5\u53e3\u7684 MAC \u5730\u5740\uff0c\u4ee5\u4fbf\u533a\u5206\u5177\u4f53\u7684\u63a5\u53e3\uff0c\u4e0a\u8ff0\u8f93\u51fa\u4e2d link/ether \u540e\u9762\u7684\u5730\u5740\u5373\u4e3a MAC \u5730\u5740\u3002 \u82e5\u8981\u4e34\u65f6\u5f00\u542f\u6216\u5173\u95ed\u7f51\u7edc\u63a5\u53e3\uff0c\u53ef\u4f7f\u7528 ip link set \u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a [root@localhost ~]# ip link set ens33 down [root@localhost ~]# ip link 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: ens33: <BROADCAST,MULTICAST> mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT group default qlen 1000 link/ether 00:0c:29:01:5e:e2 brd ff:ff:ff:ff:ff:ff \u4e0a\u8ff0\u547d\u4ee4\u5c06 ens33 \u63a5\u53e3\u5173\u95ed\uff0c ip link \u547d\u4ee4\u7684\u8f93\u51fa\u663e\u793a ens33 \u63a5\u53e3\u7684\u72b6\u6001\u4e3a DOWN \u3002 \u82e5\u8981\u5f00\u542f\u8be5\u63a5\u53e3\uff0c\u53ef\u4f7f\u7528 ip link set ens33 up \u547d\u4ee4\u3002 ip addr \u547d\u4ee4 ip addr \u547d\u4ee4\u7528\u4e8e\u663e\u793a\u548c\u7ba1\u7406\u7f51\u7edc\u63a5\u53e3\u7684 IP \u5730\u5740\u3002 [root@localhost ~]# ip addr 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:01:5e:e2 brd ff:ff:ff:ff:ff:ff inet 172.16.84.137/24 brd 172.16.84.255 scope global noprefixroute dynamic ens33 valid_lft 1595sec preferred_lft 1595sec inet6 fe80::8ef7:1b18:75a0:e3f4/64 scope link noprefixroute valid_lft forever preferred_lft forever ip addr \u547d\u4ee4\u7684\u8f93\u51fa\u9664\u53bb ip link \u547d\u4ee4\u7684\u8f93\u51fa\u4e4b\u5916\uff0c\u8fd8\u5305\u542b\u4e86\u7f51\u7edc\u63a5\u53e3\u7684 IP \u5730\u5740\uff0c\u5305\u62ec IPv4 \u5730\u5740\u548c IPv6 \u5730\u5740\u3002 \u82e5\u8981\u4e3a\u7f51\u7edc\u63a5\u53e3\u6dfb\u52a0 IP \u5730\u5740\uff0c\u53ef\u4f7f\u7528 ip addr add \u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a [root@localhost ~]# ip addr add 172.16.84.250/24 dev ens33 [root@localhost ~]# ip addr 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:01:5e:e2 brd ff:ff:ff:ff:ff:ff inet 172.16.84.137/24 brd 172.16.84.255 scope global noprefixroute dynamic ens33 valid_lft 1595sec preferred_lft 1595sec inet 172.16.84.250/24 scope global ens33 valid_lft forever preferred_lft forever inet6 fe80::8ef7:1b18:75a0:e3f4/64 scope link noprefixroute valid_lft forever preferred_lft forever \u4e0a\u8ff0\u547d\u4ee4\u4e3a ens33 \u63a5\u53e3\u6dfb\u52a0\u4e86\u4e00\u4e2a IPv4 \u5730\u5740 172.16.84.250/24 \u3002 \u82e5\u8981\u5220\u9664\u7f51\u7edc\u63a5\u53e3\u7684 IP \u5730\u5740\uff0c\u53ef\u4f7f\u7528 ip addr del \u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a [root@localhost ~]# ip addr del 172.16.84.250/24 dev ens33 [root@localhost ~]# ip addr 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:01:5e:e2 brd ff:ff:ff:ff:ff:ff inet 172.16.84.137/24 brd 172.16.84.255 scope global noprefixroute dynamic ens33 valid_lft 1595sec preferred_lft 1595sec inet6 fe80::8ef7:1b18:75a0:e3f4/64 scope link noprefixroute valid_lft forever preferred_lft forever \u4e0a\u8ff0\u547d\u4ee4\u5220\u9664\u4e86 ens33 \u63a5\u53e3\u7684 IPv4 \u5730\u5740 172.16.84.250/24 \u3002 ip route \u547d\u4ee4 ip route \u547d\u4ee4\u7528\u4e8e\u663e\u793a\u548c\u7ba1\u7406\u8def\u7531\u8868\u3002 [root@localhost ~]# ip route default via 172.16.84.2 dev ens33 proto dhcp metric 100 172.16.84.0/24 dev ens33 proto kernel scope link src 172.16.84.137 metric 100 ip route \u547d\u4ee4\u7684\u8f93\u51fa\u5305\u542b\u4e86\u8def\u7531\u8868\u4e2d\u7684\u8def\u7531\u4fe1\u606f\u3002 \u82e5\u8981\u6dfb\u52a0\u8def\u7531\uff0c\u53ef\u4f7f\u7528 ip route add \u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a [root@localhost ~]# ip route add 172.16.172.0/24 via 172.16.84.1 [root@localhost ~]# ip route default via 172.16.84.2 dev ens33 proto dhcp metric 100 172.16.84.0/24 dev ens33 proto kernel scope link src 172.16.84.137 metric 100 172.16.172.0/24 via 172.16.84.1 dev ens33 \u4e0a\u8ff0\u547d\u4ee4\u4e3a ens33 \u63a5\u53e3\u6dfb\u52a0\u4e86\u4e00\u4e2a\u8def\u7531\uff0c\u8be5\u8def\u7531\u7684\u76ee\u7684\u7f51\u7edc\u4e3a 172.16.172.0/24 \uff0c\u4e0b\u4e00\u8df3\u5730\u5740\u4e3a 172.16.84.1 \u3002 \u82e5\u8981\u5220\u9664\u8def\u7531\uff0c\u53ef\u4f7f\u7528 ip route del \u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a [root@localhost ~]# ip route del 172.16.172.0/24 via 172.16.84.1 [root@localhost ~]# ip route default via 172.16.84.2 dev ens33 proto dhcp metric 100 172.16.84.0/24 dev ens33 proto kernel scope link src 172.16.84.137 metric 100 \u4e0a\u8ff0\u547d\u4ee4\u5220\u9664\u4e86 ens33 \u63a5\u53e3\u7684\u8def\u7531 172.16.172.0/24 \u3002 ss \u547d\u4ee4 ss \u547d\u4ee4\u7528\u4e8e\u663e\u793a\u548c\u7ba1\u7406\u5957\u63a5\u5b57\u3002\u4ed6\u66ff\u6362\u4e86 netstat \u547d\u4ee4\uff0c ss \u547d\u4ee4\u7684\u8f93\u51fa\u66f4\u52a0\u7b80\u6d01\uff0c\u66f4\u6613\u4e8e\u9605\u8bfb\uff0c\u4e14\u901f\u5ea6\u6bd4 netstat \u547d\u4ee4\u5feb\u5f97\u591a\u3002 [root@localhost ~]# ss -nutlp Netid State Recv-Q Send-Q Local Address:Port Peer Address:Port udp UNCONN 0 0 *:68 *:* users:((\"dhclient\",pid=7037,fd=6)) tcp LISTEN 0 128 *:22 *:* users:((\"sshd\",pid=1041,fd=3)) tcp LISTEN 0 100 127.0.0.1:25 *:* users:((\"master\",pid=1535,fd=13)) tcp LISTEN 0 128 [::]:22 [::]:* users:((\"sshd\",pid=1041,fd=4)) tcp LISTEN 0 100 [::1]:25 [::]:* users:((\"master\",pid=1535,fd=14)) \u4e0a\u8ff0\u547d\u4ee4\u663e\u793a\u4e86\u5f53\u524d\u7cfb\u7edf\u4e2d\u6240\u6709\u7684 TCP \u548c UDP \u5957\u63a5\u5b57\u3002","title":"\u7f51\u7edc\u5de5\u5177\u7ec4 iproute2"},{"location":"ch10/iproute2/#ip-link","text":"ip link \u547d\u4ee4\u5c06\u5217\u51fa\u4e3b\u673a\u4e0a\u6240\u6709\u53ef\u7528\u7684\u7f51\u7edc\u63a5\u53e3 [root@localhost ~]# ip link 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000 link/ether 00:0c:29:01:5e:e2 brd ff:ff:ff:ff:ff:ff \u6839\u636e\u8f93\u51fa\u663e\u793a\uff0c\u8be5\u4e3b\u673a\u4e0a\u6709\u4e24\u4e2a\u7f51\u7edc\u63a5\u53e3\uff0c\u5206\u522b\u4e3a\u73af\u56de\u63a5\u53e3 lo \uff0c\u4ee5\u592a\u7f51\u63a5\u53e3 ens33 \u3002 ip link \u547d\u4ee4\u7684\u8f93\u51fa\u5305\u542b\u4e86\u7f51\u7edc\u63a5\u53e3\u7684\u540d\u79f0\uff0c\u72b6\u6001\uff0c\u6700\u5927\u4f20\u8f93\u5355\u5143\uff08MTU\uff09\uff0c\u961f\u5217\u957f\u5ea6\uff0c\u786c\u4ef6\u5730\u5740\u7b49\u4fe1\u606f\u3002 \u6709\u65f6\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5f97\u77e5\u63a5\u53e3\u7684 MAC \u5730\u5740\uff0c\u4ee5\u4fbf\u533a\u5206\u5177\u4f53\u7684\u63a5\u53e3\uff0c\u4e0a\u8ff0\u8f93\u51fa\u4e2d link/ether \u540e\u9762\u7684\u5730\u5740\u5373\u4e3a MAC \u5730\u5740\u3002 \u82e5\u8981\u4e34\u65f6\u5f00\u542f\u6216\u5173\u95ed\u7f51\u7edc\u63a5\u53e3\uff0c\u53ef\u4f7f\u7528 ip link set \u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a [root@localhost ~]# ip link set ens33 down [root@localhost ~]# ip link 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: ens33: <BROADCAST,MULTICAST> mtu 1500 qdisc pfifo_fast state DOWN mode DEFAULT group default qlen 1000 link/ether 00:0c:29:01:5e:e2 brd ff:ff:ff:ff:ff:ff \u4e0a\u8ff0\u547d\u4ee4\u5c06 ens33 \u63a5\u53e3\u5173\u95ed\uff0c ip link \u547d\u4ee4\u7684\u8f93\u51fa\u663e\u793a ens33 \u63a5\u53e3\u7684\u72b6\u6001\u4e3a DOWN \u3002 \u82e5\u8981\u5f00\u542f\u8be5\u63a5\u53e3\uff0c\u53ef\u4f7f\u7528 ip link set ens33 up \u547d\u4ee4\u3002","title":"ip link \u547d\u4ee4"},{"location":"ch10/iproute2/#ip-addr","text":"ip addr \u547d\u4ee4\u7528\u4e8e\u663e\u793a\u548c\u7ba1\u7406\u7f51\u7edc\u63a5\u53e3\u7684 IP \u5730\u5740\u3002 [root@localhost ~]# ip addr 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:01:5e:e2 brd ff:ff:ff:ff:ff:ff inet 172.16.84.137/24 brd 172.16.84.255 scope global noprefixroute dynamic ens33 valid_lft 1595sec preferred_lft 1595sec inet6 fe80::8ef7:1b18:75a0:e3f4/64 scope link noprefixroute valid_lft forever preferred_lft forever ip addr \u547d\u4ee4\u7684\u8f93\u51fa\u9664\u53bb ip link \u547d\u4ee4\u7684\u8f93\u51fa\u4e4b\u5916\uff0c\u8fd8\u5305\u542b\u4e86\u7f51\u7edc\u63a5\u53e3\u7684 IP \u5730\u5740\uff0c\u5305\u62ec IPv4 \u5730\u5740\u548c IPv6 \u5730\u5740\u3002 \u82e5\u8981\u4e3a\u7f51\u7edc\u63a5\u53e3\u6dfb\u52a0 IP \u5730\u5740\uff0c\u53ef\u4f7f\u7528 ip addr add \u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a [root@localhost ~]# ip addr add 172.16.84.250/24 dev ens33 [root@localhost ~]# ip addr 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:01:5e:e2 brd ff:ff:ff:ff:ff:ff inet 172.16.84.137/24 brd 172.16.84.255 scope global noprefixroute dynamic ens33 valid_lft 1595sec preferred_lft 1595sec inet 172.16.84.250/24 scope global ens33 valid_lft forever preferred_lft forever inet6 fe80::8ef7:1b18:75a0:e3f4/64 scope link noprefixroute valid_lft forever preferred_lft forever \u4e0a\u8ff0\u547d\u4ee4\u4e3a ens33 \u63a5\u53e3\u6dfb\u52a0\u4e86\u4e00\u4e2a IPv4 \u5730\u5740 172.16.84.250/24 \u3002 \u82e5\u8981\u5220\u9664\u7f51\u7edc\u63a5\u53e3\u7684 IP \u5730\u5740\uff0c\u53ef\u4f7f\u7528 ip addr del \u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a [root@localhost ~]# ip addr del 172.16.84.250/24 dev ens33 [root@localhost ~]# ip addr 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:01:5e:e2 brd ff:ff:ff:ff:ff:ff inet 172.16.84.137/24 brd 172.16.84.255 scope global noprefixroute dynamic ens33 valid_lft 1595sec preferred_lft 1595sec inet6 fe80::8ef7:1b18:75a0:e3f4/64 scope link noprefixroute valid_lft forever preferred_lft forever \u4e0a\u8ff0\u547d\u4ee4\u5220\u9664\u4e86 ens33 \u63a5\u53e3\u7684 IPv4 \u5730\u5740 172.16.84.250/24 \u3002","title":"ip addr \u547d\u4ee4"},{"location":"ch10/iproute2/#ip-route","text":"ip route \u547d\u4ee4\u7528\u4e8e\u663e\u793a\u548c\u7ba1\u7406\u8def\u7531\u8868\u3002 [root@localhost ~]# ip route default via 172.16.84.2 dev ens33 proto dhcp metric 100 172.16.84.0/24 dev ens33 proto kernel scope link src 172.16.84.137 metric 100 ip route \u547d\u4ee4\u7684\u8f93\u51fa\u5305\u542b\u4e86\u8def\u7531\u8868\u4e2d\u7684\u8def\u7531\u4fe1\u606f\u3002 \u82e5\u8981\u6dfb\u52a0\u8def\u7531\uff0c\u53ef\u4f7f\u7528 ip route add \u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a [root@localhost ~]# ip route add 172.16.172.0/24 via 172.16.84.1 [root@localhost ~]# ip route default via 172.16.84.2 dev ens33 proto dhcp metric 100 172.16.84.0/24 dev ens33 proto kernel scope link src 172.16.84.137 metric 100 172.16.172.0/24 via 172.16.84.1 dev ens33 \u4e0a\u8ff0\u547d\u4ee4\u4e3a ens33 \u63a5\u53e3\u6dfb\u52a0\u4e86\u4e00\u4e2a\u8def\u7531\uff0c\u8be5\u8def\u7531\u7684\u76ee\u7684\u7f51\u7edc\u4e3a 172.16.172.0/24 \uff0c\u4e0b\u4e00\u8df3\u5730\u5740\u4e3a 172.16.84.1 \u3002 \u82e5\u8981\u5220\u9664\u8def\u7531\uff0c\u53ef\u4f7f\u7528 ip route del \u547d\u4ee4\uff0c\u5982\u4e0b\u6240\u793a\uff1a [root@localhost ~]# ip route del 172.16.172.0/24 via 172.16.84.1 [root@localhost ~]# ip route default via 172.16.84.2 dev ens33 proto dhcp metric 100 172.16.84.0/24 dev ens33 proto kernel scope link src 172.16.84.137 metric 100 \u4e0a\u8ff0\u547d\u4ee4\u5220\u9664\u4e86 ens33 \u63a5\u53e3\u7684\u8def\u7531 172.16.172.0/24 \u3002","title":"ip route \u547d\u4ee4"},{"location":"ch10/iproute2/#ss","text":"ss \u547d\u4ee4\u7528\u4e8e\u663e\u793a\u548c\u7ba1\u7406\u5957\u63a5\u5b57\u3002\u4ed6\u66ff\u6362\u4e86 netstat \u547d\u4ee4\uff0c ss \u547d\u4ee4\u7684\u8f93\u51fa\u66f4\u52a0\u7b80\u6d01\uff0c\u66f4\u6613\u4e8e\u9605\u8bfb\uff0c\u4e14\u901f\u5ea6\u6bd4 netstat \u547d\u4ee4\u5feb\u5f97\u591a\u3002 [root@localhost ~]# ss -nutlp Netid State Recv-Q Send-Q Local Address:Port Peer Address:Port udp UNCONN 0 0 *:68 *:* users:((\"dhclient\",pid=7037,fd=6)) tcp LISTEN 0 128 *:22 *:* users:((\"sshd\",pid=1041,fd=3)) tcp LISTEN 0 100 127.0.0.1:25 *:* users:((\"master\",pid=1535,fd=13)) tcp LISTEN 0 128 [::]:22 [::]:* users:((\"sshd\",pid=1041,fd=4)) tcp LISTEN 0 100 [::1]:25 [::]:* users:((\"master\",pid=1535,fd=14)) \u4e0a\u8ff0\u547d\u4ee4\u663e\u793a\u4e86\u5f53\u524d\u7cfb\u7edf\u4e2d\u6240\u6709\u7684 TCP \u548c UDP \u5957\u63a5\u5b57\u3002","title":"ss \u547d\u4ee4"},{"location":"ch10/ldap/","text":"\u4ecb\u7ecd\u5ffd\u7565\u4e0d\u8868\uff0c\u76f4\u63a5\u53bb\u770b Wikipedia Windows Active Directory \u662f LDAP \u7684\u4e00\u79cd\u5b9e\u73b0\uff0c\u800c Linux \u4e0a\u901a\u5e38\u4f7f\u7528 OpenLDAP LDAP \u5728 Linux \u4e0a\u8bf7\u90e8\u7f72 slapd \u76f4\u63a5\u5b89\u88c5\u8f6f\u4ef6\u5305\u5373\u53ef\u3002 \u5982\u679c\u9700\u8981\u7684\u8bdd\uff0c\u6267\u884c dpkg-reconfigure slapd \u8fdb\u884c\u90e8\u5206\u8bbe\u7f6e LDIF \u6587\u4ef6\u592a\u96be\u5199\uff0c\u6bd4\u8d5b\u5982\u679c\u4e0d\u63d0\u4f9b Web \u754c\u9762\uff0c\u5c31\u4f7f\u7528 MigrationTools \u5c06\u672c\u5730\u7528\u6237\u5408\u5e76\u8fdb LDAP apt install migrationtools \u7f16\u8f91 /etc/migrationtools/migrate_common.ph \u52a0\u5165\u57df\u540d\uff0c\u786e\u8ba4\u6392\u9664\u7684\u7528\u6237\u8303\u56f4 \u5b89\u88c5\u7684\u6240\u6709\u811a\u672c\u5747\u5b58\u653e\u5728 /usr/share/migrationtools/ \u4e0b\u9762\u6240\u6709\u5f53\u524d\u76ee\u5f55\u5747\u4e3a\u6b64\u76ee\u5f55\u3002 \u4e00\u6b21\u6027\u5bfc\u5165\u57fa\u672c\u7ed3\u6784\uff0c\u5e76\u5408\u5e76 /etc/passwd \u4e0e /etc/group LDAPADD=\"/usr/bin/ldapadd -c\" ETC_ALIASES=/dev/null ./migrate_all_online.sh \u811a\u672c\u5b9e\u73b0\u6709\u4e9b\u95ee\u9898\uff0c\u8fd9\u4e2a\u9505\u53d1\u884c\u7248\u80cc\uff0c\u81f3\u5c11\u5f53\u524d\u7528\u7684\u6700\u65b0\u7248\u955c\u50cf\u8fd8\u6ca1\u4fee\u590d\u3002 \u9700\u8981\u628a migrate_common.ph \u624b\u52a8\u7b26\u53f7\u94fe\u63a5\u5230 /etc/perl \u8be5\u811a\u672c\u4f1a\u8be2\u95ee\u4e00\u4e9b\u95ee\u9898\uff0c\u4f8b\u5982 X.500 \u540d\u79f0\u7b49\uff1a\u89c1\u4e0b\u9762\u8868\u683c\uff1a \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\u586b\u5199 Question Answer X.500 naming context dc=falcot,dc=com LDAP server hostname localhost Manager DN cn=admin,dc=falcot,dc=com Bind credentials the administrative password Create DUAConfigProfile no \u5408\u5e76\u65f6\u4f1a\u63d0\u793a\u9519\u8bef\uff0c\u8fd9\u662f\u6b63\u5e38\u7684\uff0c\u56e0\u6b64\u9700\u8981\u989d\u5916\u6307\u5b9a ldapadd \u7684 -c \u53c2\u6570\uff0c\u4f7f\u5176\u6b63\u5e38\u8fd0\u884c \u914d\u7f6e ldaps \u751f\u6210\u8bc1\u4e66\u540e\uff0c\u786e\u4fdd\u4fdd\u5b58\u4f4d\u7f6e\u5141\u8bb8 openldap \u7528\u6237\u8bfb \u5199\u6587\u4ef6\uff0c\u5e76\u914d\u7f6e\u8fdb LDAP $ cat >ssl.ldif << EOF dn: cn=config changetype: modify add: olcTLSCertificateFile olcTLSCertificateFile: /etc/ssl/certs/ldap.falcot.com.pem - add: olcTLSCertificateKeyFile olcTLSCertificateKeyFile: /etc/ssl/private/ldap.falcot.com.key - EOF $ ldapmodify -Y EXTERNAL -H ldapi:/// -f ssl.ldif SASL/EXTERNAL authentication started SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth SASL SSF: 0 modifying entry \"cn=config\" \u6216\u8005\u7528 ldapvi \u76f4\u63a5\u4fee\u6539\uff1a $ ldapvi -Y EXTERNAL -h ldapi:/// -b cn=config \u6700\u540e\u4fee\u6539 /etc/default/slapd ,\u4fee\u6539 SLAPD_SERVICES \u4e3a\u4ec5\u5141\u8bb8 LDAPS \u4e0e LDAPI ( Unix Socket ) SLAPD_SERVICES=\"ldaps:/// ldapi:///\" https://www.debian.org/doc/manuals/debian-handbook/sect.ldap-directory.zh-cn.html https://wiki.debian.org/LDAP/MigrationTools https://www.openldap.org/doc/admin24/quickstart.html","title":"LDAP Server"},{"location":"ch10/mail/","text":"\u4ee5\u4e0b\u4e24\u4e2a\u5b50\u7ae0\u8282\u5206\u522b\u4e3a SMTP \u4ee5\u53ca POP3 ( IMAP ) \u670d\u52a1\u5668\u7aef \u914d\u7f6e\u90ae\u4ef6\u670d\u52a1\u5668\u524d\u8bf7\u52a1\u5fc5\u786e\u8ba4 DNS \u670d\u52a1\u5668\u914d\u7f6e\u6b63\u786e\u4e14\u5de5\u4f5c\u6b63\u5e38\uff01","title":"\u90ae\u4ef6\u670d\u52a1\u5668"},{"location":"ch10/nfs/","text":"","title":"NFS Server"},{"location":"ch10/nginx/","text":"","title":"nginx"},{"location":"ch10/ntp/","text":"NTP \u670d\u52a1\u5668 NTP \u670d\u52a1\u5668\u53ef\u7528\u4e8e\u4e3a\u5176\u4ed6\u4e3b\u673a\u4e0b\u53d1\u65f6\u95f4\uff0c\u4f7f\u7528 UDP 123 \u7aef\u53e3\u901a\u4fe1\u3002 \u901a\u5e38\u4f7f\u7528\u7684 NTP \u670d\u52a1\u5668\u7aef\u7a0b\u5e8f\u6709\u4e24\u79cd\uff0c\u5206\u522b\u4e3a ntpd \u4e0e chrony \u3002 \u672c\u7bc7\u7ee7\u627f\u524d\u6587\u914d\u7f6e NTP \u5ba2\u6237\u7aef\uff0c\u8bb2\u8ff0\u5982\u4f55\u914d\u7f6e NTP \u670d\u52a1\u5668\u3002 ntpd \u5bf9 ntpd \u8fdb\u884c\u670d\u52a1\u5668\u914d\u7f6e\u9700\u8981\u5bf9\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u4fee\u6539 \u5728 33-55 \u884c\u5e26\u6709\u914d\u7f6e\u793a\u4f8b\uff1a # /etc/ntp.conf # By default, exchange time with everybody, but don't allow configuration. restrict -4 default kod notrap nomodify nopeer noquery limited restrict -6 default kod notrap nomodify nopeer noquery limited # Local users may interrogate the ntp server more closely. restrict 127.0.0.1 restrict ::1 # Needed for adding pool entries restrict source notrap nomodify noquery # Clients from this (example!) subnet have unlimited access, but only if # cryptographically authenticated. #restrict 192.168.123.0 mask 255.255.255.0 notrust # If you want to provide time to your local subnet, change the next line. # (Again, the address is an example only.) #broadcast 192.168.123.255 \u4e3a\u786e\u4fdd\u5931\u53bb\u7f51\u7edc\u4e5f\u80fd\u63d0\u4f9b\u540c\u6b65\u670d\u52a1\uff0c\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u672c\u5730\u65f6\u95f4\u4f5c\u4e3a\u65f6\u95f4\u6e90\uff1a server 127.127.1.0 fudge 127.127.1.0 stratum 10 \u63a5\u4e0b\u6765\u65b0\u589e\u7b56\u7565\uff0c\u5141\u8bb8\u5c40\u57df\u7f51\u5185\u7684\u4e3b\u673a\u4e0e\u672c\u673a\u540c\u6b65\u65f6\u95f4\uff0c\u4f8b\u5982\u672c\u4f8b\u4e2d\u6211\u7684\u5c40\u57df\u7f51 IP \u4e3a 192.168.50.0/24 ,\u5219\u53ef\u4ee5\u5199\u4e3a restrict 192.168.50.0 mask 255.255.255.0 nomodify \u6b64\u5904\u7684 nomodify \u610f\u4e3a\u4e0d\u5141\u8bb8\u5ba2\u6237\u7aef\u4f7f\u7528 ntpq \u6216 ntpdc \u4fee\u6539\u670d\u52a1\u5668\u914d\u7f6e\u3002 \u6240\u6709\u7684\u9009\u9879\u53ef\u4ee5\u901a\u8fc7 ntp.conf(5) \u67e5\u770b\u3002 \u91cd\u542f\u670d\u52a1\u540e\u901a\u8fc7 ss -nutlp | grep ntp \u67e5\u770b\u670d\u52a1\u662f\u5426\u6b63\u5e38\u76d1\u542c root@debian:~# vim /etc/ntp.conf root@debian:~# systemctl restart ntp root@debian:~# ss -nutlp | grep ntp udp UNCONN 0 0 192.168.50.157:123 0.0.0.0:* users:((\"ntpd\",pid=3783,fd=19)) udp UNCONN 0 0 127.0.0.1:123 0.0.0.0:* users:((\"ntpd\",pid=3783,fd=18)) udp UNCONN 0 0 0.0.0.0:123 0.0.0.0:* users:((\"ntpd\",pid=3783,fd=17)) udp UNCONN 0 0 [fe80::20c:29ff:fe70:453]%ens192:123 [::]:* users:((\"ntpd\",pid=3783,fd=21)) udp UNCONN 0 0 [::1]:123 [::]:* users:((\"ntpd\",pid=3783,fd=20)) udp UNCONN 0 0 [::]:123 [::]:* users:((\"ntpd\",pid=3783,fd=16)) \u5982\u679c\u5177\u6709 123 \u7aef\u53e3\u4e0a\u7684 udp \u62a5\u6587\u76d1\u542c\u5219\u8bf4\u660e\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002 \u63a5\u4e0b\u6765\u4f7f\u7528\u53e6\u4e00\u53f0\u5ba2\u6237\u673a\u4e0e\u6b64\u4e3b\u673a\u8fdb\u884c\u540c\u6b65\u6d4b\u8bd5\u3002\u8fd9\u53f0\u4e3b\u673a\u4e3a\u53e6\u4e00\u53f0\u670d\u52a1\u5668\uff0c\u8fd0\u884c Ubuntu 20.04 LTS panxiao81@homelinux:~$ sudo vim /etc/systemd/timesyncd.conf [sudo] password for panxiao81: panxiao81@homelinux:~$ systemctl restart systemd-timesyncd ==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units === Authentication is required to restart 'systemd-timesyncd.service'. Authenticating as: panxiao81 Password: ==== AUTHENTICATION COMPLETE === panxiao81@homelinux:~$ timedatectl timesync-status Server: 192.168.50.157 (192.168.50.157) Poll interval: 2min 8s (min: 32s; max 34min 8s) Leap: normal Version: 4 Stratum: 2 Reference: CA760182 Precision: 1us (-24) Root distance: 30.112ms (max: 5s) Offset: +5.737ms Delay: 218us Jitter: 2.168ms Packet count: 2 Frequency: +224.757ppm chrony chrony \u914d\u7f6e\u5bf9\u6bd4 ntpd \u66f4\u4e3a\u7b80\u5355 \u4ec5\u9700\u8981\u7b80\u5355\u7684\u4f7f\u7528 allow \u5373\u53ef allow 10.10.100.0/24 \u5982\u679c\u518d\u7b80\u5355\u4e00\u70b9\uff0c\u5141\u8bb8\u6240\u6709\u4e3b\u673a\u4e0e\u5176\u540c\u6b65\u65f6\u95f4\uff0c\u53ea\u8981 allow all \u9700\u8981\u4f7f\u7528\u672c\u5730\u65f6\u95f4\u7684\u573a\u5408\uff0c\u4e5f\u53ea\u9700\u8981\u7b80\u5355\u7684\u52a0\u4e00\u53e5 local \u5373\u53ef local stratum 10 \u53c2\u8003\u8d44\u6599\uff1a ArchWiki:Network Time Protocol daemon (\u7b80\u4f53\u4e2d\u6587) Red Hat Documentation:CONFIGURING NTP USING THE CHRONY SUITE","title":"\u65f6\u95f4\u670d\u52a1\u5668"},{"location":"ch10/ntp/#ntp","text":"NTP \u670d\u52a1\u5668\u53ef\u7528\u4e8e\u4e3a\u5176\u4ed6\u4e3b\u673a\u4e0b\u53d1\u65f6\u95f4\uff0c\u4f7f\u7528 UDP 123 \u7aef\u53e3\u901a\u4fe1\u3002 \u901a\u5e38\u4f7f\u7528\u7684 NTP \u670d\u52a1\u5668\u7aef\u7a0b\u5e8f\u6709\u4e24\u79cd\uff0c\u5206\u522b\u4e3a ntpd \u4e0e chrony \u3002 \u672c\u7bc7\u7ee7\u627f\u524d\u6587\u914d\u7f6e NTP \u5ba2\u6237\u7aef\uff0c\u8bb2\u8ff0\u5982\u4f55\u914d\u7f6e NTP \u670d\u52a1\u5668\u3002","title":"NTP \u670d\u52a1\u5668"},{"location":"ch10/ntp/#ntpd","text":"\u5bf9 ntpd \u8fdb\u884c\u670d\u52a1\u5668\u914d\u7f6e\u9700\u8981\u5bf9\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u4fee\u6539 \u5728 33-55 \u884c\u5e26\u6709\u914d\u7f6e\u793a\u4f8b\uff1a # /etc/ntp.conf # By default, exchange time with everybody, but don't allow configuration. restrict -4 default kod notrap nomodify nopeer noquery limited restrict -6 default kod notrap nomodify nopeer noquery limited # Local users may interrogate the ntp server more closely. restrict 127.0.0.1 restrict ::1 # Needed for adding pool entries restrict source notrap nomodify noquery # Clients from this (example!) subnet have unlimited access, but only if # cryptographically authenticated. #restrict 192.168.123.0 mask 255.255.255.0 notrust # If you want to provide time to your local subnet, change the next line. # (Again, the address is an example only.) #broadcast 192.168.123.255 \u4e3a\u786e\u4fdd\u5931\u53bb\u7f51\u7edc\u4e5f\u80fd\u63d0\u4f9b\u540c\u6b65\u670d\u52a1\uff0c\u9700\u8981\u589e\u52a0\u4e00\u4e2a\u672c\u5730\u65f6\u95f4\u4f5c\u4e3a\u65f6\u95f4\u6e90\uff1a server 127.127.1.0 fudge 127.127.1.0 stratum 10 \u63a5\u4e0b\u6765\u65b0\u589e\u7b56\u7565\uff0c\u5141\u8bb8\u5c40\u57df\u7f51\u5185\u7684\u4e3b\u673a\u4e0e\u672c\u673a\u540c\u6b65\u65f6\u95f4\uff0c\u4f8b\u5982\u672c\u4f8b\u4e2d\u6211\u7684\u5c40\u57df\u7f51 IP \u4e3a 192.168.50.0/24 ,\u5219\u53ef\u4ee5\u5199\u4e3a restrict 192.168.50.0 mask 255.255.255.0 nomodify \u6b64\u5904\u7684 nomodify \u610f\u4e3a\u4e0d\u5141\u8bb8\u5ba2\u6237\u7aef\u4f7f\u7528 ntpq \u6216 ntpdc \u4fee\u6539\u670d\u52a1\u5668\u914d\u7f6e\u3002 \u6240\u6709\u7684\u9009\u9879\u53ef\u4ee5\u901a\u8fc7 ntp.conf(5) \u67e5\u770b\u3002 \u91cd\u542f\u670d\u52a1\u540e\u901a\u8fc7 ss -nutlp | grep ntp \u67e5\u770b\u670d\u52a1\u662f\u5426\u6b63\u5e38\u76d1\u542c root@debian:~# vim /etc/ntp.conf root@debian:~# systemctl restart ntp root@debian:~# ss -nutlp | grep ntp udp UNCONN 0 0 192.168.50.157:123 0.0.0.0:* users:((\"ntpd\",pid=3783,fd=19)) udp UNCONN 0 0 127.0.0.1:123 0.0.0.0:* users:((\"ntpd\",pid=3783,fd=18)) udp UNCONN 0 0 0.0.0.0:123 0.0.0.0:* users:((\"ntpd\",pid=3783,fd=17)) udp UNCONN 0 0 [fe80::20c:29ff:fe70:453]%ens192:123 [::]:* users:((\"ntpd\",pid=3783,fd=21)) udp UNCONN 0 0 [::1]:123 [::]:* users:((\"ntpd\",pid=3783,fd=20)) udp UNCONN 0 0 [::]:123 [::]:* users:((\"ntpd\",pid=3783,fd=16)) \u5982\u679c\u5177\u6709 123 \u7aef\u53e3\u4e0a\u7684 udp \u62a5\u6587\u76d1\u542c\u5219\u8bf4\u660e\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u3002 \u63a5\u4e0b\u6765\u4f7f\u7528\u53e6\u4e00\u53f0\u5ba2\u6237\u673a\u4e0e\u6b64\u4e3b\u673a\u8fdb\u884c\u540c\u6b65\u6d4b\u8bd5\u3002\u8fd9\u53f0\u4e3b\u673a\u4e3a\u53e6\u4e00\u53f0\u670d\u52a1\u5668\uff0c\u8fd0\u884c Ubuntu 20.04 LTS panxiao81@homelinux:~$ sudo vim /etc/systemd/timesyncd.conf [sudo] password for panxiao81: panxiao81@homelinux:~$ systemctl restart systemd-timesyncd ==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units === Authentication is required to restart 'systemd-timesyncd.service'. Authenticating as: panxiao81 Password: ==== AUTHENTICATION COMPLETE === panxiao81@homelinux:~$ timedatectl timesync-status Server: 192.168.50.157 (192.168.50.157) Poll interval: 2min 8s (min: 32s; max 34min 8s) Leap: normal Version: 4 Stratum: 2 Reference: CA760182 Precision: 1us (-24) Root distance: 30.112ms (max: 5s) Offset: +5.737ms Delay: 218us Jitter: 2.168ms Packet count: 2 Frequency: +224.757ppm","title":"ntpd"},{"location":"ch10/ntp/#chrony","text":"chrony \u914d\u7f6e\u5bf9\u6bd4 ntpd \u66f4\u4e3a\u7b80\u5355 \u4ec5\u9700\u8981\u7b80\u5355\u7684\u4f7f\u7528 allow \u5373\u53ef allow 10.10.100.0/24 \u5982\u679c\u518d\u7b80\u5355\u4e00\u70b9\uff0c\u5141\u8bb8\u6240\u6709\u4e3b\u673a\u4e0e\u5176\u540c\u6b65\u65f6\u95f4\uff0c\u53ea\u8981 allow all \u9700\u8981\u4f7f\u7528\u672c\u5730\u65f6\u95f4\u7684\u573a\u5408\uff0c\u4e5f\u53ea\u9700\u8981\u7b80\u5355\u7684\u52a0\u4e00\u53e5 local \u5373\u53ef local stratum 10 \u53c2\u8003\u8d44\u6599\uff1a ArchWiki:Network Time Protocol daemon (\u7b80\u4f53\u4e2d\u6587) Red Hat Documentation:CONFIGURING NTP USING THE CHRONY SUITE","title":"chrony"},{"location":"ch10/postfix/","text":"postfix \u662f\u4e00\u4e2a\u914d\u7f6e\u7b80\u5355\u7684 SMTP \u90ae\u4ef6\u670d\u52a1\u5668\u3002 Debian \u8fd8\u63d0\u4f9b\u4e86\u53e6\u4e00\u4e2a\u5f3a\u5927\u7684\u90ae\u4ef6\u670d\u52a1\u5668\uff1a Exim4 \u5e76\u4e14\u9ed8\u8ba4\u5b89\u88c5\u4e14\u63a8\u8350\u4f7f\u7528\u3002 [\u6559\u5b78] Mail Server \u67b6\u8a2d\u8207\u8a2d\u5b9a\u6307\u5357-Postfix \u5982\u679c\u6709\u63a5\u5165\u6570\u636e\u5e93\u6216 LDAP \u7684\u9700\u6c42\uff0c\u5219\u9700\u8981\u5b89\u88c5\u5176\u4ed6\u6a21\u5757\uff0c\u4f8b\u5982 postfix-ldap \u7b49\u3002 \u9ed8\u8ba4\u53ea\u5f00\u653e 25 \u7aef\u53e3\uff0c\u4f46\u5b9e\u9645\u4e0a\u662f\u901a\u8fc7 STARTLS \u52a0\u5bc6\u4f20\u8f93\u7684\uff0c\u9700\u8981\u989d\u5916\u6307\u5b9a\u5f00\u653e 465 \u7aef\u53e3 [Postfix] SMTP Mail Server \u67b6\u8a2d\u6559\u5b78\u6307\u5357 \u2013 Postfix with Ubuntu \u5b89\u88c5 postfix \u5305\u5373\u53ef \u5b89\u88c5\u65f6\u4f1a\u5f39\u51fa\u914d\u7f6e\u5411\u5bfc\uff0c\u914d\u7f6e Internet Site \u5373\u53ef \u7b2c\u4e00\u6b65\u586b\u5165\u57df\u540d\uff0c\u4e00\u822c\u7684\u90ae\u7bb1\u4e3a user@example.com \u7684\u683c\u5f0f\uff0c\u5219\u8fd9\u91cc\u5e94\u586b\u5199 example.com \u9996\u5148\u914d\u7f6e DNS\u3002 \u586b\u5165\u5982\u4e0b\u89e3\u6790\uff0c\u672c\u4f8b\u4e3a sdskills.cn @ IN MX 10 server01.sdskills.cn. smtp IN CNAME server01.sdskills.cn. imap IN CNAME server01.sdskills.cn. \u5e76\u7ed9 smtp.sdskills.cn \u4e0e imap.sdskills.cn. \u7b7e\u53d1\u4e24\u5f20\u8bc1\u4e66\uff0c\u7a0d\u540e\u4f1a\u4f7f\u7528 \u914d\u7f6e postfix \u914d\u7f6e\u6587\u4ef6 \u6709\u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\u8981\u8fdb\u884c\u914d\u7f6e\uff0c\u5206\u522b\u4e3a main.cf \u4e0e master.cf \u9996\u5148\u914d\u7f6e main.cf mynetworks \u586b\u5165\u5c40\u57df\u7f51 IP \u5730\u5740\u6bb5\uff0c\u4fee\u6539 SSL \u8bc1\u4e66\u8def\u5f84 \u914d\u7f6e master.cf ,\u53d6\u6d88\u6ce8\u91ca smtps \u7684\u884c\uff0c\u5e76\u53d6\u6d88\u6ce8\u91ca\u4e0b\u9762\u7684\u4e24\u884c \u91cd\u65b0\u52a0\u8f7d postfix \u914d\u7f6e $ systemctl reload postfix \u5bf9\u4e8e dovecot \u4fee\u6539 10-auth.conf \u5728 auth_mechanisms \u4e2d\u6dfb\u52a0 login \u5728 10-master.conf \u4e2d\uff0c\u627e\u5230 inet_listener imaps ,\u5c06\u7aef\u53e3\u4e0e ssl \u4e00\u884c\u53d6\u6d88\u6ce8\u91ca \u5728 postfix \u7684 master.conf \u4e2d\u6ce8\u91ca smtp \u884c\u5373\u53ef\u505c\u6b62\u76d1\u542c 25 \u7aef\u53e3\uff0cdovecot \u5219\u8981\u5c06 imap \u76d1\u542c\u7aef\u53e3\u4ece 143 \u6539\u4e3a 0","title":"postfix"},{"location":"ch10/proftpd/","text":"","title":"proftpd"},{"location":"ch10/smb/","text":"","title":"SMB Server With Samba"},{"location":"ch10/squid/","text":"","title":"Proxy"},{"location":"ch10/vpn/","text":"\u53ea\u7528\u5230 OpenVPN\uff0c\u4e0d\u591a\u8bb2\u3002 \u522b\u4e00\u8bf4\u5230 VPN \u5c31\u60f3\u5230\u67d0\u9003\u8131\u7f51\u7edc\u5ba1\u67e5\u624b\u6bb5\uff0c\u597d\u4e1c\u897f\u5c31\u662f\u88ab\u4f60\u4eec\u8fd9\u4e9b\u4eba\u73a9\u574f\u7684\u3002 \u5206 Server \u7aef\u548c Client \u7aef\u3002 \u5b98\u7f51\u6587\u6863\u653e\u8fd9\uff1a 2x How To \u4ee5\u53ca: Static Key Mini-HOWTO \u8bbf\u95ee\u8fd9\u4e2a\u9700\u8981\u79d1\u5b66\u4e0a\u7f51\u624b\u6bb5\uff0c\u81ea\u6c42\u591a\u798f\u3002 \u8fd8\u6709 Debian \u7684\u5b98\u65b9\u6587\u6863 \u865a\u62df\u4e13\u7528\u7f51\u7edc \u672c\u4f8b\u5c06\u4f7f\u7528\u6700\u7b80\u5355\u7684\uff0c\u4f7f\u7528 Static Key \u9a8c\u8bc1\u7684 Site-To-Site VPN \u96a7\u9053\u3002 \u5728\u670d\u52a1\u5668\u7aef\uff0c\u751f\u6210 Static Key $ openvpn --genkey --secret static.key $ cp static.key /etc/openvpn \u914d\u7f6e\u6587\u4ef6\u53ea\u6709\u4e09\u884c\uff0c\u6240\u4ee5\u6ca1\u5fc5\u8981\u4f7f\u7528\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6\u4e86\uff0c\u76f4\u63a5\u5199\u5c31\u597d $ vim /etc/openvpn/server.conf dev tun ifconfig 10.8.0.1 10.8.0.2 secret static.key \u542f\u52a8\u670d\u52a1\uff1a $ systemctl start openvpn@server \u5ba2\u6237\u7aef\u8fd9\u4e00\u4fa7\uff0c\u9700\u8981\u5c06\u670d\u52a1\u5668\u7aef\u7684 Static Key \u62f7\u8d1d\u8fc7\u6765 $ scp root@192.168.10.3:/root/secret.key /etc/openvpn/static.key $ vim /etc/openvpn/SERVER03.conf remote 192.168.10.3 # \u586b\u8fdc\u7aef\u5730\u5740\u6216 FQDN dev tun ifconfig 10.0.8.2 10.0.8.1 secret static.key $ systemctl start openvpn@SERVER03 ping \u5bf9\u7aef\u68c0\u67e5 VPN \u96a7\u9053\u662f\u5426\u5efa\u7acb\u6b63\u5e38 # \u5728 Client \u4e0a $ ping 10.0.8.1","title":"\u865a\u62df\u4e13\u7528\u7f51\u7edc"},{"location":"ch10/vsftpd/","text":"apt install vsftpd \u865a\u62df\u7528\u6237\u5b89\u88c5 libpam-pwdfile \u963b\u6b62\u6587\u4ef6\u4f7f\u7528\u3000 deny_file={*.doc,*.docx,*.xlsx} \u53ef\u4ee5\u8bbe\u7f6e local \u7528\u6237\u767b\u5f55\uff0c\u76f4\u63a5\u521b\u5efa\u8d26\u6237\uff0c\u5c06\u5bb6\u76ee\u5f55\u6307\u5b9a\u4e3a ftp \u8981\u8bbf\u95ee\u7684\u76ee\u5f55\u5373\u53ef \u5c06 chroot_local_user \u884c\u53d6\u6d88\u6ce8\u91ca\uff0c\u5373\u53ef\u8ba9\u7528\u6237\u88ab\u9650\u5236\u5728\u5bb6\u76ee\u5f55","title":"vsftpd"},{"location":"ch11/disk/","text":"","title":"\u524d\u8a00"},{"location":"ch11/lvm/","text":"","title":"LVM"},{"location":"ch11/partition/","text":"","title":"\u78c1\u76d8\u5206\u533a"},{"location":"ch11/raid/","text":"","title":"RAID"},{"location":"ch13/solves/","text":"\u5199\u5728\u524d\u9762\u7684\u5c0f\u5efa\u8bae \u62ff\u5230\u670d\u52a1\u5668\u9996\u5148\u8bb0\u5f97\u4fee\u6539\u4e3b\u673a\u540d\u4e0e IP\uff01 vim \u4f7f\u7528\u4e0d\u4e60\u60ef\u4e0d\u7528\u5f3a\u6c42\uff0c\u6ca1\u4eba\u62e6\u7740\u4f60\u7528 nano \u5982\u679c\u4f60\u662f vim \u7528\u6237\uff0c\u8bb0\u5f97\u5728\u65b0\u7cfb\u7edf\u91cc\u5b89\u88c5\u597d vim \u8f6f\u4ef6\u5305\uff1a vim vim-common vim-scrtpts ctags \uff0c\u4f1a\u52a0\u5feb\u5199\u914d\u7f6e\u6587\u4ef6\u7684\u65f6\u95f4\uff0c\u4e8b\u534a\u529f\u500d \u9632\u706b\u5899\u653e\u5728\u6700\u540e\u914d\u7f6e\uff0c\u9650\u5236 SSH \u8bbf\u95ee\u7b56\u7565\u4e5f\u653e\u5728\u6700\u540e\u914d\u7f6e\uff0c\u4f46\u514d\u5bc6\u767b\u5f55\u4ec0\u4e48\u65f6\u5019\u914d\u90fd\u53ef\u4ee5 \u53ef\u4ee5\u628a\u6240\u6709\u673a\u5668\u7684 SSH \u5168\u90e8\u6253\u5f00\uff0c\u5728 Client \u4e0a SSH \u4e0a\u53bb\u914d\u7f6e\u4f1a\u5feb\u4e00\u70b9 \u767b\u5f55 Username\uff1aroot Password\uff1aChinaSkill20! Username\uff1aChinaskill20 Password\uff1aChinaskill20! \u9664\u7279\u522b\u6307\u5b9a\u5916\uff0c\u6240\u6709\u8d26\u53f7\u5bc6\u7801\u5747\u4e3a Chinaskill20! \u7cfb\u7edf\u914d\u7f6e Region\uff1aChina Locale\uff1aen_US.UTF-8 KeyMap\uff1aEnglish US \u5f53\u4efb\u52a1\u4e3a\u914d\u7f6e SSL \u6216 TLS\uff0c\u5982\u8981\u6c42\u9690\u85cf\u6240\u6709\u8b66\u544a\uff0c\u8bf7\u5c0f\u5fc3\u6267\u884c\u3002 \u7ade\u8d5b\u73af\u5883 \u7269\u7406\u673a\uff1a \u6587\u4ef6\u5939\u8def\u5f84\uff1a \u865a\u62df\u673a:[datastore1] ( VMware ESXi ) ISO \u955c\u50cf\uff1a[DATA]ISO/ ( VMware ESXi ) \u8f6f\u4ef6\uff1aD:\\\u8f6f\u4ef6 ( Host ) \u9879\u76ee\u4efb\u52a1\u63cf\u8ff0 \u62d3\u6251\u89c1\u6837\u9898 \u57fa\u672c\u914d\u7f6e\uff1a Device Hostname System FQDN IP Address Service Server01 Server01 \u9884\u88c5 Linux Server01.sdskills.com 172.16.100.201/25 DNS Web SSH LDAP DBMS Server02 Server02 \u5f85\u5b89\u88c5 Linux Server02.sdskills.com 172.16.100.202/25 RAID5 NFS FTP Mail SSH Server03 Server03 \u9884\u88c5 Linux Server03.skills.com 192.168.10.3/28 NTP OpenVPN Server04 Server04 \u5f85\u5b89\u88c5 Linux Server04.skills.com 192.168.10.4/28 DNS Web Rserver Rserver \u9884\u88c5 Linux Rserver.sdskills.com 172.16.100.254/25 192.168.10.2/28 10.10.10.254/24 firewall DHCP SSH CA Client Client Linux Desktop 10.10.100.x none \u7f51\u7edc\uff1a Network CIDR office 10.10.100.0/24 service 172.16.100.128/25 internet 192.168.10.0/28 Client Task Client \u5df2\u9884\u88c5\u7b80\u6613 Debian\uff0c\u8981\u6c42\u5982\u4e0b\uff1a \u8981\u6c42\u80fd\u8bbf\u95ee\u6240\u6709\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u6d4b\u8bd5\u5e94\u7528\u670d\u52a1 \u4e3a\u4e3b\u673a\u5b89\u88c5 GNOME \u684c\u9762\u73af\u5883 \u8c03\u6574\u5206\u8fa8\u7387\u81f3 1280x768 \u6d4b\u8bd5 DHCP\uff0cIPv4 \u5730\u5740\u4e3a\u81ea\u52a8\u83b7\u53d6 \u6d4b\u8bd5 DNS\uff0c\u5b89\u88c5 dnsutils \u4e0e dig \u547d\u4ee4\u884c\u7a0b\u5e8f \u6d4b\u8bd5 Web\uff0c\u5b89\u88c5 Firefox \u6d4f\u89c8\u5668\uff0ccUrl \u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5728\u4efb\u4f55\u65f6\u5019\u8fdb\u884c\u8bbf\u95ee\u6d4b\u8bd5\u4e0d\u5141\u8bb8\u5f39\u51fa\u5b89\u5168\u8b66\u544a\u4fe1\u606f \u6d4b\u8bd5 SSH\uff0c\u5b89\u88c5 SSH \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 VPN \u5b89\u88c5 VPN \u5ba2\u6237\u7aef \u6d4b\u8bd5 FTP\uff0c\u5b89\u88c5 FTP \u5ba2\u6237\u7aef \u6d4b\u8bd5\u6587\u4ef6\u5171\u4eab\uff0c\u5b89\u88c5 Samba \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 Mail\uff0c\u5b89\u88c5 Thunderbird\uff0c\u5e76\u80fd\u6b63\u5e38\u8fdb\u884c\u90ae\u4ef6\u6536\u53d1 \u5176\u4ed6\u6d4b\u8bd5\u91c7\u7528\u9ed8\u8ba4\u8bbe\u5b9a \u9898\u89e3 \u5148\u914d\u7f6e\u4e3b\u673a\u540d $ hostnamectl set-hostname client \u5e76\u4e14\u4e0d\u8981\u5fd8\u8bb0\u4fee\u6539 hosts \u6587\u4ef6 $ vi /etc/hosts \u9ed8\u8ba4\u7684 vi \u8fd0\u884c\u5728 vi \u517c\u5bb9\u6a21\u5f0f\u4e0b\uff0c\u5982\u679c\u4f7f\u7528\u5f88\u522b\u626d\u7684\u8bdd\u53ef\u5b89\u88c5 vim \u8f6f\u4ef6\u5305\uff0c\u6216\u76f4\u63a5\u5728 vi \u4e2d\u8f93\u5165 :set nocp \u5173\u95ed vi \u517c\u5bb9\u6a21\u5f0f\u3002 \u5c06\u539f\u6765\u7684\u4e3b\u673a\u540d debian \u4fee\u6539\u4e3a\u65b0\u7684\u4e3b\u673a\u540d client \u6b64\u9898\u76ee\u4ec5\u5b89\u88c5\u4e00\u5806\u8f6f\u4ef6\u5305\u5373\u53ef \u4f46\u4e00\u90e8\u5206\u9898\u76ee\u9700\u8981\u540e\u7eed\u505a\u5b8c\u5176\u4ed6\u670d\u52a1\u5668\u914d\u7f6e\u540e\u8fd4\u56de\u6765\u8fdb\u884c\uff0c\u6240\u4ee5\u8fd9\u4e00\u9636\u6bb5\u5982\u679c Client \u4f5c\u4e3a\u9996\u9898\u53ea\u80fd\u505a\u4e00\u90e8\u5206\u3002 \u53ef\u4ee5\u5148\u5b89\u88c5\u6240\u9700\u8f6f\u4ef6\u5305\uff1a $ apt install gnome dnsutils firefox-esr curl openssh-client ftp thunderbird openvpn smbclient \u5b89\u88c5\u5b8c\u540e reboot \u91cd\u542f\u540e\u8fdb\u5165\u684c\u9762\u73af\u5883 $ reboot \u684c\u9762\u73af\u5883\u9ed8\u8ba4\u65e0\u6cd5\u4f7f\u7528 root \u8d26\u6237\u767b\u5f55\uff0c\u4f7f\u7528 chinaskill20 \u53ef\u767b\u5f55\u8fdb\u5165\u684c\u9762\u73af\u5883\u3002 \u53f3\u952e\u9009\u62e9 Display Settings \uff0c\u6253\u5f00\u663e\u793a\u5668\u8bbe\u7f6e\uff0c\u5c06\u5206\u8fa8\u7387\u6539\u4e3a 1280x768 \u5728\u914d\u7f6e\u540e\u7eed\u673a\u578b\u65f6\uff0c\u4f1a\u56de\u6765\u6b64\u673a\u914d\u7f6e\u540e\u7eed\u9879\u76ee\u3002 Client Task \u8981\u6c42\u80fd\u8bbf\u95ee\u6240\u6709\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u6d4b\u8bd5\u5e94\u7528\u670d\u52a1 \u4e3a\u4e3b\u673a\u5b89\u88c5 GNOME \u684c\u9762\u73af\u5883 \u8c03\u6574\u663e\u793a\u5206\u8fa8\u7387\u4e3a 1280x768 \u6d4b\u8bd5 DHCP\uff0c\u7f51\u5361 IPv4 \u5730\u5740\u4e3a\u81ea\u52a8\u83b7\u53d6 \u6d4b\u8bd5 DNS\uff0c\u5b89\u88c5 dnsutils \u4e0e dig \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 Web\uff0c\u5b89\u88c5 Firefox \u6d4f\u89c8\u5668\uff0ccurl \u547d\u4ee4\u884c\u6d4b\u8bd5\u5de5\u5177\uff0c\u5728\u4efb\u4f55\u65f6\u5019\u8fdb\u884c\u8bbf\u95ee\u6d4b\u8bd5\u65f6\u4e0d\u5141\u8bb8\u5f39\u51fa\u5b89\u5168\u8b66\u544a\u4fe1\u606f \u6d4b\u8bd5 SSH\uff0c\u5b89\u88c5 SSH \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 VPN\uff0c\u5b89\u88c5 OPENVPN \u5ba2\u6237\u7aef\u5de5\u5177\u8f6f\u4ef6 \u6d4b\u8bd5 FTP\uff0c\u5b89\u88c5 lftp \u5ba2\u6237\u7aef\u5de5\u5177 \u6d4b\u8bd5\u6587\u4ef6\u5171\u4eab\uff0c\u5b89\u88c5 smbclient \u5ba2\u6237\u7aef\u5de5\u5177 \u6d4b\u8bd5 Mail\uff0c\u5b89\u88c5 Thunderbird\uff0c\u5e76\u80fd\u6b63\u5e38\u8fdb\u884c\u90ae\u4ef6\u6536\u53d1 \u5176\u4ed6\u8bbe\u5b9a\u5747\u91c7\u7528\u9ed8\u8ba4\u8bbe\u5b9a \u9898\u89e3 \u5b89\u88c5\u684c\u9762\u73af\u5883 $ apt install gnome \u91cd\u542f\u5373\u53ef Rserver Task Network \u8bf7\u6839\u636e\u57fa\u672c\u914d\u7f6e\u4fe1\u606f\u914d\u7f6e\u670d\u52a1\u5668\u4e3b\u673a\u540d\uff0c\u7f51\u5361 IP \u5730\u5740\u914d\u7f6e\uff0c\u57df\u540d\u7b49 \u5f00\u542f\u8def\u7531\u8f6c\u53d1\u529f\u80fd iptables \u9ed8\u8ba4\u963b\u6321\u6240\u6709\u6d41\u91cf \u6dfb\u52a0\u5fc5\u8981\u7684 NAT \u89c4\u5219\uff0c\u4f7f Office \u548c Service \u7f51\u7edc\u80fd\u591f\u8bbf\u95ee Internet \u6dfb\u52a0\u5fc5\u8981\u7684\u89c4\u5219\u4ee5\u6ee1\u8db3\u5176\u4ed6\u670d\u52a1\u6240\u9700\uff0c\u7981\u6b62\u521b\u5efa\u653e\u884c\u6240\u6709\u6d41\u91cf\u7684\u89c4\u5219 DHCP \u4e3a\u5ba2\u6237\u7aef\u5206\u914d IP \u8303\u56f4\u4e3a 10.10.100.1 - 10.10.100.50 \u6309\u7167\u5b9e\u9645\u914d\u7f6e DNS \u4e0e GATEWAY \u914d\u7f6e Client \u56fa\u5b9a\u83b7\u53d6 IP \u5730\u5740\u4e3a 10.10.100.51 SSH \u5b89\u88c5 SSH \u6b63\u5e38\u76d1\u542c \u9650\u5236\u9664 Client \u4ee5\u5916\u7684\u5ba2\u6237\u7aef\u767b\u5f55\uff0c\u5176\u4ed6\u4e3b\u673a\u90fd\u5e94\u62d2\u7edd \u914d\u7f6e Client \u53ea\u80fd\u5728 Chinaskills20 \u7528\u6237\u53ef\u4ee5\u514d\u5bc6\u767b\u5f55\uff0c\u7aef\u53e3\u4e3a 2222\uff0c\u4e14\u5177\u6709 root \u63a7\u5236\u6743\u9650 CA CA \u6839\u8bc1\u4e66\u8def\u5f84 /CA/cacert.pem \u7b7e\u53d1\u6570\u5b57\u8bc1\u4e66\uff0c\u7b7e\u53d1\u8005\u4fe1\u606f \u56fd\u5bb6 = CN \u5355\u4f4d = Inc \u7ec4\u7ec7\u673a\u6784 = www.skills.com \u516c\u7528\u540d = Skill Global Root CA \u9898\u89e3 Network \u9996\u5148\u67e5\u770b\u7f51\u5361\u540d\u79f0\uff0c\u4f7f\u7528 ip link $ ip link 1: lo: (LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: ens192: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000 link/ether 00:0c:29:a4:90:60 brd ff:ff:ff:ff:ff:ff 2: ens224: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group DEFAULT qlen 1000 link/ether 00:0c:29:a4:90:Ba brd ff:ff:ff:ff:ff:ff 4: ens256: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000 link/ether 00:0c:29:a4:90:94 brd ff:ff:ff:ff:ff:ff \u5171\u4e09\u5757\u7f51\u5361\uff0c\u5206\u522b\u6309\u7167\u5bf9\u5e94\u7f51\u7edc\u8bbe\u5b9a\u3002 \u7f16\u8f91 /etc/network/interfaces $ vi /etc/network/interfaces auto ens192 iface ens192 inet static address 172.16.100.254/25 auto ens224 iface ens224 inet static address 10.10.100.254/24 auto ens256 iface ens256 inet static address 192.168.10.2/28 \u63a5\u4e0b\u6765\u542f\u7528\u7f51\u5361 $ ifup ens192 ens224 ens256 \u914d\u7f6e\u4e3b\u673a\u540d $ hostnamectl set-hostname Rserver \u4fee\u6539 /etc/hosts ,\u5c06 FQDN \u5199\u5165 hosts \u6587\u4ef6 \u4fee\u6539 127.0.1.1 debian \u8fd9\u4e00\u884c\uff0c\u4fee\u6539\u4e3a 127.0.1.1 Rserver.sdskills.com Rserver \u6253\u5f00\u5185\u6838\u7684 IPv4 \u8f6c\u53d1\uff0c\u7f16\u8f91 /etc/sysctl.conf \uff0c28 \u884c\u5904\u7684 net.ipv4.ip_forward=1 \u53bb\u6389\u524d\u9762\u7684\u6ce8\u91ca\uff0c\u4fdd\u5b58\u6587\u4ef6\u3002 \u4f7f\u914d\u7f6e\u6587\u4ef6\u751f\u6548 $ sysctl -p \u8fd9\u53f0\u7535\u8111\u5b9e\u9645\u4e0a\u8981\u4f5c\u4e3a\u62d3\u6251\u4e2d\u7684\u63a5\u5165\u8def\u7531\u5668\u6765\u4f7f\u7528\uff0c\u56e0\u6b64\u540e\u7eed\u7684\u7f51\u5173\u8bbe\u5907\u5168\u90e8\u6307\u5b9a\u6b64\u8ba1\u7b97\u673a FQDN \u5728 Linux \u4e0a\u662f\u901a\u8fc7 DNS \u89e3\u6790\u5b9e\u73b0\u7684\uff0c\u9a8c\u8bc1\u914d\u7f6e\u4f7f\u7528 hostname -f iptables \u8fd9\u9053\u9898\u505a\u51fa\u6765\u7684\u4e0d\u591a\uff0c\u6211\u6000\u7591\u5e94\u8be5\u662f\u6ca1\u770b\u61c2\u9898\u76ee\u3002 \u8fd9\u4e2a\u5b9e\u9a8c\u73af\u5883\u662f\u5c06 192.168.10.0/28 \u7f51\u6bb5\u770b\u4f5c\u516c\u6709 Internet\uff0c\u5c06 service \u4ee5\u53ca office \u63a5\u5165\u4e92\u8054\u7f51\uff0c\u56e0\u6b64\u5e94\u5728 Rserver \u914d\u7f6e NAT \u4f7f\u5176\u901a\u8fc7 Rserver \u7684 IP \u5730\u5740\u63a5\u5165\u4e92\u8054\u7f51\uff0c\u80fd\u7406\u89e3\u5230\u8fd9\u4e2a\u7a0b\u5ea6\u90a3\u4e48\u505a\u8d77\u6765\u4e5f\u5c31\u4e0d\u96be\u4e86\u3002 iptables \u914d\u7f6e\u6700\u70e6\u4eba\u7684\u70b9\u5c31\u662f\u5fc5\u987b\u6309\u987a\u5e8f\u5c06\u9632\u706b\u5899\u89c4\u5219\u5199\u8fdb iptables \u914d\u7f6e\u4e2d\uff0c\u4e00\u65e6\u5199\u9519\u5c31\u8981\u6e05\u9664\u914d\u7f6e\u91cd\u6765\uff0c\u4e0d\u50cf\u73b0\u5728\u7684 firewalld \u662f\u5e76\u884c\u5904\u7406\u7684\uff0c\u6240\u4ee5\u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\u5148\u5168\u90e8\u653e\u884c\uff0c\u7b49\u5f85\u5168\u90e8\u914d\u7f6e\u5b8c\u6210\u4e4b\u540e\u518d\u6765\u601d\u8003\u9632\u706b\u5899\u89c4\u5219\u53ef\u80fd\u66f4\u597d\u3002 \u6bd4\u8f83\u65b9\u4fbf\u7684\u65b9\u6cd5\u662f\u5199\u4e00\u4e2a\u914d\u7f6e\u89c4\u5219\u7684 Shell \u811a\u672c\uff0c\u8fd9\u6837\u540e\u7eed\u4fee\u6539\u8d77\u6765\u4f1a\u76f8\u5bf9\u65b9\u4fbf\u3002 #!/bin/bash # \u5f85\u8865\u5168 # \u6e05\u9664\u73b0\u6709\u89c4\u5219 iptables -F iptables -X iptables -Z # \u8bbe\u5b9a\u9ed8\u8ba4\u89c4\u5219 iptables -P INPUT DROP iptables -P OUTPUT DROP iptables -P FORWARD DROP # \u8bbe\u5b9a\u89c4\u5219 iptables -A INPUT -i lo -j ACCEPT # \u653e\u884c\u6240\u6709\u672c\u673a\u6d41\u91cf iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT # \u653e\u884c\u72b6\u6001\u6d41\u91cf iptables -A INPUT -i ens224 -p tcp -dport 2222 -j ACCEPT # \u653e\u884c SSH \u6d41\u91cf DHCP \u5b89\u88c5\u8f6f\u4ef6\u5305 isc-dhcp-server $ apt install isc-dhcp-server \u6ca1\u6709\u505a\u914d\u7f6e\u7684\u60c5\u51b5\u4e0b\uff0c\u5b89\u88c5\u65f6\u4f1a\u63d0\u793a\u670d\u52a1\u65e0\u6cd5\u542f\u52a8\uff0c\u8fd9\u662f\u6b63\u5e38\u7684\u3002 \u8981\u4fee\u6539\u7684\u6587\u4ef6\u6709 /etc/default/isc-dhcp-server \u4e0e /etc/dhcp/dhcpd.conf \u9996\u5148\u4fee\u6539 /etc/default/isc-dhcp-server \u6307\u5b9a\u76d1\u542c\u7f51\u5361 INTERFACESv4=\"ens224\" \u63a5\u4e0b\u6765\u7f16\u8f91 /etc/dhcp/dhcpd.conf \u5728\u6587\u4ef6 50 \u884c\u5904\u6709\u4e00\u4e2a\u5199\u7684\u8f83\u5b8c\u6574\u7684\u793a\u4f8b\u914d\u7f6e\uff0c\u53ef\u4ee5\u76f4\u63a5\u590d\u5236\u4f7f\u7528 subnet 10.10.100.0 netmask 255.255.255.0 { range 10.10.100.1 10.10.100.50; option domain-name-servers 172.16.100.201; option domain-name \"sdskills.com\"; option routers 10.10.100.254; option broadcast-address 10.10.100.255; default-lease-time 600; max-lease-time 7200; } host client { hardware ethernet 00:0c:29:4c:e3:a7; fixed-address 10.10.100.51; } \u5176\u4e2d\uff0cclient \u7684 MAC \u5730\u5740\u53ef\u901a\u8fc7\u5728 Client \u4e0a\u4f7f\u7528 ip link \u67e5\u770b \u542f\u52a8\u670d\u52a1\uff0c\u5e76\u786e\u4fdd\u5f00\u673a\u542f\u52a8 $ systemctl start isc-dhcp-server $ systemctl enable isc-dhcp-server SSH \u6bcf\u6b21\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u65f6\uff0c\u4f7f\u7528 systemctl reload ssh \u4f7f\u914d\u7f6e\u751f\u6548 \u7f16\u8f91 /etc/ssh/sshd_config \u4fee\u6539 Port \u4e3a 2222 \u4e34\u65f6\u4fee\u6539 PermitRootLogin \u4e3a yes \u62f7\u8d1d SSH key # \u5728 Client \u4e0a $ ssh-keygen # \u65e0\u8111\u56de\u8f66 $ ssh-copy-id root@10.10.100.254 -p 2222 # \u5148\u5728 Rserver \u7aef\u5141\u8bb8 Root \u8d26\u6237\u767b\u5f55\uff0c\u540e\u518d\u4fee\u6539\u56de\u6765 \u7f16\u8f91 /etc/hosts.deny \u6765\u9650\u5236\u767b\u5f55 sshd:ALL except 10.10.100.51:deny # \u610f\u4e3a\u9664\u53bb 10.10.100.51 \u4e3b\u673a\u4ee5\u5916\u7684\u5176\u4ed6\u6240\u6709\u4e3b\u673a\u5747\u7981\u6b62\u8bbf\u95ee\u672c\u673a\u7684 SSH \u670d\u52a1 \u786e\u4fdd\u670d\u52a1\u5f00\u673a\u542f\u52a8 $ systemctl start ssh $ systemctl enable ssh CA \u5728\u914d\u7f6e CA \u4e4b\u524d\uff0c\u786e\u4fdd\u5f53\u524d\u65f6\u95f4\u6b63\u786e\uff0c\u65f6\u533a\u6b63\u786e\uff0c\u6700\u597d\u5148\u914d\u7f6e NTP \u670d\u52a1\u5668\u518d\u56de\u6765\u914d\u7f6e CA \u4fee\u6539 /usr/lib/ssl/openssl.cnf \u7b2c 28 \u884c\u5904\uff0c\u4fee\u6539\u6839\u76ee\u5f55\u4e3a /CA \u521b\u5efa\u5b50\u76ee\u5f55\uff1a $ cd /CA $ mkdir newcerts certs crl private \u5e76\u521b\u5efa\u4e24\u4e2a\u6587\u4ef6\uff1a $ touch ./index.txt $ echo 1000 > serial \u751f\u6210\u6839\u8bc1\u4e66\u79c1\u94a5 $ openssl genrsa -out private/cakey.pem 4096 \u4f7f\u7528\u4e0a\u4e00\u6b65\u751f\u6210\u7684\u79c1\u94a5\u7b7e\u53d1\u8bc1\u4e66\uff1a $ openssl req -x509 -new -key /CA/private/cakey.pem -out /CA/cacert.pem Server01 Network \u914d\u7f6e IP \u4e0e\u4e3b\u673a\u540d\u8ddf\u4e0a\u9762\u65b9\u6cd5\u76f8\u540c\uff0c\u4e0d\u591a\u8d58\u8ff0 DNS Debian \u5c06 Bind \u7684\u914d\u7f6e\u6587\u4ef6\u5206\u6210\u4e86\u5f88\u591a\u4efd \u5bf9\u4e8e DNS \u8f6c\u53d1\u5668\uff0c\u4fee\u6539 /etc/bind/named.conf.options ,\u6587\u4ef6\u4e2d\u6709\u4e00\u6bb5\u88ab\u6ce8\u91ca\u6389\u7684 forwarders,\u53d6\u6d88\u6ce8\u91ca\u540e\u4fee\u6539\u5373\u53ef \u5c06\u6b63\u5411\u4e0e\u53cd\u5411\u89e3\u6790\u914d\u7f6e\u653e\u8fdb /etc/bind/named.conf.local \uff0c\u5982\u4e0b: zone \"sdskills.com\" { type master; file \"/etc/bind/db.sdskills.com\"; }; zone \"100.16.172.in-addr.aroa\" { type master; file \"/etc/bind/db.172.16.100\"; }; \u4e0d\u8981\u5fd8\u8bb0\u672b\u5c3e\u7684\u5206\u53f7\uff01 \u63a5\u4e0b\u6765\u521b\u5efa\u533a\u57df\u6587\u4ef6\uff0c\u4ece\u5df2\u6709\u7684\u533a\u57df\u6587\u4ef6\u590d\u5236\u4fee\u6539\u5373\u53ef $ cp /etc/bind/db.local /etc/bind/db.sdskills.com $ cp /etc/bind/db.127 /etc/bind/db.172.16.100 \u5c06 SOA \u4fee\u6539\u4e3a\u81ea\u5df1\u7684\u57df\u540d ( \u6ce8\u610f\u57df\u540d\u540e\u7684\u70b9\uff01 ) \u6dfb\u52a0\u81ea\u5df1\u9700\u8981\u7684\u8bb0\u5f55\u5373\u53ef \u4f7f\u7528 named-checkconf \u548c named-checkzone \u6765\u68c0\u67e5\u8bed\u6cd5\u683c\u5f0f\u662f\u5426\u6b63\u786e root@Server01:~# named-checkconf root@Server01:~# named-checkzone sdskills.com /etc/bind/db.sdskills.com zone sdskills.com/IN: loaded serial 2 OK root@Server01:~# \u5f53\u524d\u7684 Bind \u7248\u672c\u9ed8\u8ba4\u53ea\u5141\u8bb8\u672c\u5730\u4e0e\u5df2\u77e5\u7684\u672c\u5730\u5c40\u57df\u7f51\u8bbf\u95ee\u670d\u52a1\u5668\u8fdb\u884c\u67e5\u8be2\uff0c\u56e0\u6b64\u9700\u8981\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u6539\u56de\u4ee5\u524d\u7684\u653e\u884c\u6a21\u5f0f\uff1a \u4fee\u6539 /etc/bind/named.conf.options \uff0c\u5728\u540e\u9762\u589e\u52a0\u4e09\u884c\uff1a options { ... allow-recursion { any; }; allow-query { any; }; allow-query-cache { any; }; ... }; ``` \u653e\u884c\u6240\u6709\u4e3b\u673a\u3002 ## apache \u9898\u76ee\u4e2d\u9700\u8981\u4f7f\u7528 LDAP \u505a\u8ba4\u8bc1\uff0c\u914d\u7f6e\u5b8c LDAP \u540e\u518d\u6765 ```sh apt install apache2 \u65b0\u5efa webuser \u7528\u6237\uff0c\u6307\u5b9a\u4e3a\u7cfb\u7edf\u7528\u6237\u5e76\u7981\u6b62\u767b\u5f55 $ useradd -r webuser -s /sbin/nologin \u4fee\u6539 /etc/apache2/envvars \u5c06\u6307\u5b9a\u8fd0\u884c\u7528\u6237\u4e0e\u7ec4\u7684\u53d8\u91cf\u4fee\u6539 export APACHE_RUN_USER=webuser export APACHE_RUN_GROUP=webuser \u7f51\u7ad9\u76ee\u5f55\u653e\u5728 NFS \u5171\u4eab\u4e2d\uff0c\u5148\u505a Server02 \u518d\u56de\u6765 \u6302\u8f7d /data/share \u5199\u5165 /etc/fstab 172.16.100.202:/data/share /data/share nfs defaults,_netdev 0 0 $ mount -a \u5199 index.sh $ mkdir /data/share/webroot $ vim /data/share/webroot/index.sh #!/bin/bash # This is index.sh echo \"Content-type: text/html\" echo \"\" echo \"Current System Time is: $(date +\"%F %r\")\" \u4fee\u590d\u76ee\u5f55\u6743\u9650\uff0c\u5e76\u4f7f\u811a\u672c\u53ef\u6267\u884c $ chown -R webuser:webuser /data/share/webroot $ chmod 775 /data/share/webroot/index.sh \u914d\u7f6e Apahce\uff0c\u4f7f CGI \u811a\u672c\u53ef\u6267\u884c\uff0c\u5e76\u5141\u8bb8\u5904\u7406 Shell \u811a\u672c $ vim /etc/apache2/conf-enabled/security.conf <Dictory \"/data/share/webroot\"> AllowOverride None Options +ExecCGI -MultiViews AddHandler cgi-script .cgi .sh .pl Require all granted </Directory> \u914d\u7f6e\u865a\u62df\u4e3b\u673a\u4eec\uff0c\u52a0\u4e0a SSL\u3002 \u7b7e\u53d1\u8bc1\u4e66 $ openssl req -new -key Server01.pem -out http.csr $ openssl ca -in http.csr -out http.pem \u5c06\u8bc1\u4e66\u4f20\u56de Server01 \u540e\uff0c\u4fee\u590d\u6743\u9650\u5e76\u653e\u5728\u5bf9\u5e94\u76ee\u5f55 chmod 777 *.pem cp http.pem /etc/ssl/certs/http_sdskills_com.pem Apache \u63d0\u4f9b\u4e86 SSL \u7684\u865a\u62df\u4e3b\u673a\u6a21\u677f\uff0c\u5728 `/etc/apache2/sites-available/default-ssl.conf \u5c06\u8fd9\u4e2a\u6587\u4ef6\u590d\u5236\u4e00\u4efd\uff0c\u7136\u540e\u4fee\u6539 cp /etc/apache2/sites-available/default-ssl.conf /etc/apache2/sites-available/www.sdskills.com.conf vim /etc/apache2/sites-available/www.sdskills.com \u539f\u6587\u4ef6\u5185\u5bb9\u5f88\u591a\uff0c\u53ea\u622a\u53d6\u9700\u8981\u6ce8\u610f\u7684\u90e8\u5206 <VirtualHost _default_:443> ServerName www.sdskills.com ServerAlias *.sdskills.com DocumentRoot /data/share/webroot SSLEngine On SSLCertificateFile /etc/ssl/certs/http_sdskills_com.pem SSLCertificateKeyFile /etc/ssl/certs/Rserver.key </VirtualHost> \u542f\u7528 SSL \u6a21\u5757\uff0c\u542f\u7528\u521a\u624d\u4fee\u6539\u7684\u7f51\u7ad9\u914d\u7f6e\u6587\u4ef6 $ a2enmod ssl $ a2ensite www.sdskills.com.conf \u4fee\u6539\u539f\u59cb\u9ed8\u8ba4\u7f51\u7ad9\u6587\u4ef6\uff0c\u5c06 80 \u7aef\u53e3\u8bbf\u95ee\u91cd\u5b9a\u5411\u5230 HTTPS $ vim /etc/apache2/sites-enabled/000-default.conf <VirtualHost *:80> ServerName www.sdskills.com ServerAlias *.sdskills.com # \u628a\u539f\u6709\u914d\u7f6e\u6ce8\u91ca # DocumentRoot /var/www/html # \u52a0\u5165 redirect permanent / https://www.sdskills.com/ </VirtualHost> \u914d\u7f6e LDAP \u9a8c\u8bc1 \u4fee\u6539\u521a\u624d\u5199\u597d\u7684 /etc/apache2/conf-enabled/security.conf <Dictory \"/data/share/webroot\"> AllowOverride None Options +ExecCGI -MultiViews AddHandler cgi-script .cgi .sh .pl # \u589e\u52a0 AuthType basic AuthBasicProvider ldap AuthLDAPUrl \"ldaps://localhost/ou=People,dc=sdskills,dc=com\" AuthName LDAP # \u6ce8\u91ca\u6389\u8fd9\u884c\uff0c\u91cd\u5199 #Require all granted Require valid-user </Directory> # \u5728\u5916\u9762\u589e\u52a0 LDAPVerifyServerCert off MariaDB $ apt install mariadb-server $ mysql_secure_installation \u589e\u52a0\u4e00\u4e2a\u8d85\u7ea7\u7528\u6237\u7528\u4e8e\u7f51\u9875\u7aef\u7ba1\u7406\uff0c\u65b0\u7248\u7684 MariaDB \u4e0e MySQL \u5df2\u4e0d\u5141\u8bb8\u7528\u6237\u4f7f\u7528 root \u5728\u547d\u4ee4\u884c\u4ee5\u5916\u7684\u573a\u5408\u767b\u5f55 $ mariadb -uroot -p CREATE USER '\u65b0\u7528\u6237'@'%' IDENTIFIED BY '\u65b0\u7528\u6237\u7684\u5bc6\u7801'; GRANT ALL PRIVILEGES ON *.* TO '\u65b0\u7528\u6237'@'%' WITH GRANT OPTION; \u63a5\u4e0b\u6765\u6258\u7ba1 phpMyAdmin \u5373\u53ef\u4f7f\u7528\u65b0\u521b\u5efa\u7684\u7528\u6237\u767b\u5f55 PHP $ apt install php libapache2-mod-php php-mysql \u6258\u7ba1 phpMyAdmin \u9700\u8981\u5b89\u88c5 php-xml \u6a21\u5757 $ apt install php-xml $ systemctl restart apache2 \u5c06\u7f51\u7ad9\u6587\u4ef6\u590d\u5236\u540e\u786e\u8ba4\u6743\u9650\u6b63\u786e $ chown -R webuser:webuser /data/share/htdocs SSH \u51e0\u4e4e\u540c\u7406\uff0c\u53c2\u7167 Rserver \u914d\u7f6e LDAP \u5b89\u88c5\u914d\u7f6e LDAP \u524d\uff0c\u5148\u521b\u5efa\u597d\u9700\u6c42\u7684 100 \u4e2a\u7528\u6237 \u8fd9\u4e2a\u80af\u5b9a\u4e0d\u80fd\u624b\u6572\uff0c\u6240\u4ee5\u4e0a Shell \u811a\u672c: #!/bin/bash # \u5728\u4e00\u4e2a\u7b49\u5bbd\u7684 100 \u4e2a\u6570\u4e2d\u5faa\u73af for i in $(seq -w 100) do # \u65b0\u5efa\u7528\u6237 useradd lduser$i # \u7ed9\u7528\u6237\u8bbe\u7f6e\u5bc6\u7801 echo \"lduser$i:Chinaskill20!\" | chpasswd done \u7ea2\u5e3d\u7cfb\u53ef\u4ee5\u4f7f\u7528 passwd --stdin \uff0c\u4f46 Debian \u7684 passwd \u4e0d\u652f\u6301\u8fd9\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528\u53e6\u4e00\u4e2a\u5de5\u5177 chpasswd \u811a\u672c\u5199\u5b8c\uff0c\u4fdd\u5b58\u4e3a useradd.sh\uff0c\u8d4b\u4e88\u6267\u884c\u6743\u9650\u76f4\u63a5\u8fd0\u884c\uff0c\u6216\u8005\uff1a $ bash useradd.sh \u5b89\u88c5 slapd \u4e0e migrationtools $ apt install slapd migrationtools \u5e76\u914d\u7f6e slapd $ dpkg-reconfigure slapd \u4fee\u6539 /etc/migrationtools/migrate_common.ph ,\u5c06\u539f\u6709\u57df\u540d\u6539\u6210\u9700\u6c42\u7684 dc=sdskills,dc=com migrationtools \u811a\u672c\u6709\u4e00\u4e2a bug\uff0c\u7531\u4e8e Debian \u6ca1\u6709\u5c06\u6587\u4ef6\u653e\u5728\u8be5\u653e\u7684\u4f4d\u7f6e\u5bfc\u81f4\u811a\u672c\u627e\u4e0d\u5230 migrate_common.ph \u6587\u4ef6\u800c\u62a5\u9519\u3002 \u8fdb\u5165\u811a\u672c\u7684\u5b58\u653e\u76ee\u5f55 $ cd /usr/share/migrationtools \u4fee\u590d\u53d1\u884c\u7248\u7684\u4e00\u4e2a Bug\uff0c\u94fe\u63a5 migrate_common.ph \u5230 /etc/perl $ ln -s /etc/migrationtools/migrate_common.ph /etc/perl \u8fd0\u884c migrate_all_online.sh \u5c06\u672c\u5730\u4fe1\u606f\u5408\u5e76\u8fdb LDAP $ LDAPADD=\"/usr/bin/ldapadd -c\" ETC_ALIASES=\"/dev/null\" ./migrate_all_online.sh \u5176\u4e2d\uff0c\u624b\u52a8\u6307\u5b9a ldapadd \u547d\u4ee4\u7684 -c \u53c2\u6570\u4f7f\u5176\u5ffd\u7565\u9519\u8bef\uff0c\u6839\u636e Debian \u6587\u6863\u6307\u5b9a ETC_ALIASES \u53d8\u91cf\u6765\u907f\u514d\u4e00\u4e2a\u9519\u8bef Question Answer X.500 naming context dc=sdskill,dc=com LDAP server hostname localhost Manager DN cn=admin,dc=sdskill,dc=com Bind credentials \u8f93\u5165\u5bc6\u7801 Create DUAConfigProfile no \u751f\u6210\u8bc1\u4e66\u79c1\u94a5\u4e0e\u8bc1\u4e66\u7b7e\u53d1\u8bf7\u6c42 $ openssl genrsa -out Rserver.pem 4096 $ openssl req -new -key Rserver.pem -out ldap.csr \u5728 Rserver \u4e0a\u7ed9\u8bc1\u4e66\u7b7e\u540d $ openssl ca -in ldap.csr -out ldap.pem \u5c06\u8bc1\u4e66\u4f20\u56de Server01 \u7ed9\u8bc1\u4e66\u6587\u4ef6\u8d4b\u4e88\u6743\u9650\uff1a $ chmod 777 *.pem \u672c\u4f8b\u4e2d\u6240\u6709\u8bc1\u4e66\u5b58\u653e\u5728 /root \u4e0b \u5c06 CA \u6839\u8bc1\u4e66\uff0cServer01 \u7684\u79c1\u94a5\uff0c\u4ee5\u53ca LDAP \u8bc1\u4e66\u5b58\u653e\u81f3 /etc/ssl/certs/ \u914d\u7f6e LDAP config\uff0c\u52a0\u5165\u8bc1\u4e66\u4f4d\u7f6e $ apt install ldapvi $ ldapvi -Y EXTERNAL -h ldapi:/// -b cn=config \u5728 cn=config olcTLSCACertificateFile: /etc/ssl/certs/Skill_Root_Global_CA.pem olcTLSCertificateKeyFile: /etc/ssl/certs/Rserver.key olcTLSCertificateFile: /etc/ssl/certs/Rserver_ldap.pem \u4fdd\u5b58\u9000\u51fa\uff0c\u6309 y \u786e\u8ba4\u4fee\u6539 \u4fee\u6539 /etc/default/slapd \u6253\u5f00 ldaps:// \u76d1\u542c $ vim /etc/default/slapd SLAPD_SERVICES=\"ldaps:/// ldapi:///\" Server02 Network \u5927\u540c\u5c0f\u5f02\uff0c\u4e0d\u518d\u8d58\u8ff0 Disk ( Raid5 ) $ apt install mdadm \u6dfb\u52a0\u786c\u76d8 $ mdadm -Cv /dev/md0 -l 5 -n 3 -x 1 /dev/sdb /dev/sdc /dev/sdd /dev/sde \u53c2\u6570 \u8bf4\u660e -C \u521b\u5efa\u8f6f\u4ef6 RAID -v \u663e\u793a\u8be6\u7ec6\u4fe1\u606f -l \u6307\u5b9a\u9635\u5217\u7c7b\u578b\uff0c\u6b64\u5904\u4e3a RAID 5 -n \u6307\u5b9a\u4f7f\u7528\u51e0\u5757\u786c\u76d8\uff0c\u4e0d\u7b97\u5907\u4efd\u76d8 -x \u6307\u5b9a\u4f7f\u7528\u51e0\u5757\u786c\u76d8\u4f5c\u4e3a\u5907\u4efd \u521b\u5efa LVM # \u5b89\u88c5\u903b\u8f91\u5377\u7ba1\u7406\u5de5\u5177 $ apt install lvm2 # \u521b\u5efa\u5377\u7ec4\u4e0e\u903b\u8f91\u5377 $ vgcreate /dev/vg01 /dev/md0 $ lvcreate -l 510 -n lv01 /dev/vg01 # \u4f7f\u7528 ext4 \u683c\u5f0f\u5316 $ mkfs.ext4 /dev/vg01/lv01 \u5199\u5165 /etc/fstab \u5b9e\u73b0\u81ea\u52a8\u6302\u8f7d $ mkdir /data $ vim /etc/fstab \u5199\u5165 $ /dev/vg01/lv01 /data ext4 defaults 0 0 $ mount -a NFS apt install nfs-kernel-server \u4fee\u6539 /etc/exports /data/share 172.16.100.128/25(rw,sync,no_subtree_check) \u91cd\u542f\u670d\u52a1 systemctl restart nfs-kernel-server Server04 \u5173\u4e8e DNS \u89e3\u6790\u7684\u7b2c\u4e09\u95ee DNS \u6839\u8fd9\u4e48\u5199 DNS \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6 /etc/bind/named.conf.default-zones \u4fee\u6539\u6839\u57df\u540d\u90e8\u5206 \u5373\u4e00\u4e2a\u70b9","title":"\u7b2c\u4e00\u5957\u9898\u76ee\u4e0e\u9898\u89e3"},{"location":"ch13/solves/#_1","text":"Username\uff1aroot Password\uff1aChinaSkill20! Username\uff1aChinaskill20 Password\uff1aChinaskill20! \u9664\u7279\u522b\u6307\u5b9a\u5916\uff0c\u6240\u6709\u8d26\u53f7\u5bc6\u7801\u5747\u4e3a Chinaskill20!","title":"\u767b\u5f55"},{"location":"ch13/solves/#_2","text":"Region\uff1aChina Locale\uff1aen_US.UTF-8 KeyMap\uff1aEnglish US \u5f53\u4efb\u52a1\u4e3a\u914d\u7f6e SSL \u6216 TLS\uff0c\u5982\u8981\u6c42\u9690\u85cf\u6240\u6709\u8b66\u544a\uff0c\u8bf7\u5c0f\u5fc3\u6267\u884c\u3002","title":"\u7cfb\u7edf\u914d\u7f6e"},{"location":"ch13/solves/#_3","text":"\u7269\u7406\u673a\uff1a \u6587\u4ef6\u5939\u8def\u5f84\uff1a \u865a\u62df\u673a:[datastore1] ( VMware ESXi ) ISO \u955c\u50cf\uff1a[DATA]ISO/ ( VMware ESXi ) \u8f6f\u4ef6\uff1aD:\\\u8f6f\u4ef6 ( Host )","title":"\u7ade\u8d5b\u73af\u5883"},{"location":"ch13/solves/#_4","text":"\u62d3\u6251\u89c1\u6837\u9898 \u57fa\u672c\u914d\u7f6e\uff1a Device Hostname System FQDN IP Address Service Server01 Server01 \u9884\u88c5 Linux Server01.sdskills.com 172.16.100.201/25 DNS Web SSH LDAP DBMS Server02 Server02 \u5f85\u5b89\u88c5 Linux Server02.sdskills.com 172.16.100.202/25 RAID5 NFS FTP Mail SSH Server03 Server03 \u9884\u88c5 Linux Server03.skills.com 192.168.10.3/28 NTP OpenVPN Server04 Server04 \u5f85\u5b89\u88c5 Linux Server04.skills.com 192.168.10.4/28 DNS Web Rserver Rserver \u9884\u88c5 Linux Rserver.sdskills.com 172.16.100.254/25 192.168.10.2/28 10.10.10.254/24 firewall DHCP SSH CA Client Client Linux Desktop 10.10.100.x none \u7f51\u7edc\uff1a Network CIDR office 10.10.100.0/24 service 172.16.100.128/25 internet 192.168.10.0/28","title":"\u9879\u76ee\u4efb\u52a1\u63cf\u8ff0"},{"location":"ch13/solves/#client-task","text":"Client \u5df2\u9884\u88c5\u7b80\u6613 Debian\uff0c\u8981\u6c42\u5982\u4e0b\uff1a \u8981\u6c42\u80fd\u8bbf\u95ee\u6240\u6709\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u6d4b\u8bd5\u5e94\u7528\u670d\u52a1 \u4e3a\u4e3b\u673a\u5b89\u88c5 GNOME \u684c\u9762\u73af\u5883 \u8c03\u6574\u5206\u8fa8\u7387\u81f3 1280x768 \u6d4b\u8bd5 DHCP\uff0cIPv4 \u5730\u5740\u4e3a\u81ea\u52a8\u83b7\u53d6 \u6d4b\u8bd5 DNS\uff0c\u5b89\u88c5 dnsutils \u4e0e dig \u547d\u4ee4\u884c\u7a0b\u5e8f \u6d4b\u8bd5 Web\uff0c\u5b89\u88c5 Firefox \u6d4f\u89c8\u5668\uff0ccUrl \u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5728\u4efb\u4f55\u65f6\u5019\u8fdb\u884c\u8bbf\u95ee\u6d4b\u8bd5\u4e0d\u5141\u8bb8\u5f39\u51fa\u5b89\u5168\u8b66\u544a\u4fe1\u606f \u6d4b\u8bd5 SSH\uff0c\u5b89\u88c5 SSH \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 VPN \u5b89\u88c5 VPN \u5ba2\u6237\u7aef \u6d4b\u8bd5 FTP\uff0c\u5b89\u88c5 FTP \u5ba2\u6237\u7aef \u6d4b\u8bd5\u6587\u4ef6\u5171\u4eab\uff0c\u5b89\u88c5 Samba \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 Mail\uff0c\u5b89\u88c5 Thunderbird\uff0c\u5e76\u80fd\u6b63\u5e38\u8fdb\u884c\u90ae\u4ef6\u6536\u53d1 \u5176\u4ed6\u6d4b\u8bd5\u91c7\u7528\u9ed8\u8ba4\u8bbe\u5b9a","title":"Client Task"},{"location":"ch13/solves/#_5","text":"\u5148\u914d\u7f6e\u4e3b\u673a\u540d $ hostnamectl set-hostname client \u5e76\u4e14\u4e0d\u8981\u5fd8\u8bb0\u4fee\u6539 hosts \u6587\u4ef6 $ vi /etc/hosts \u9ed8\u8ba4\u7684 vi \u8fd0\u884c\u5728 vi \u517c\u5bb9\u6a21\u5f0f\u4e0b\uff0c\u5982\u679c\u4f7f\u7528\u5f88\u522b\u626d\u7684\u8bdd\u53ef\u5b89\u88c5 vim \u8f6f\u4ef6\u5305\uff0c\u6216\u76f4\u63a5\u5728 vi \u4e2d\u8f93\u5165 :set nocp \u5173\u95ed vi \u517c\u5bb9\u6a21\u5f0f\u3002 \u5c06\u539f\u6765\u7684\u4e3b\u673a\u540d debian \u4fee\u6539\u4e3a\u65b0\u7684\u4e3b\u673a\u540d client \u6b64\u9898\u76ee\u4ec5\u5b89\u88c5\u4e00\u5806\u8f6f\u4ef6\u5305\u5373\u53ef \u4f46\u4e00\u90e8\u5206\u9898\u76ee\u9700\u8981\u540e\u7eed\u505a\u5b8c\u5176\u4ed6\u670d\u52a1\u5668\u914d\u7f6e\u540e\u8fd4\u56de\u6765\u8fdb\u884c\uff0c\u6240\u4ee5\u8fd9\u4e00\u9636\u6bb5\u5982\u679c Client \u4f5c\u4e3a\u9996\u9898\u53ea\u80fd\u505a\u4e00\u90e8\u5206\u3002 \u53ef\u4ee5\u5148\u5b89\u88c5\u6240\u9700\u8f6f\u4ef6\u5305\uff1a $ apt install gnome dnsutils firefox-esr curl openssh-client ftp thunderbird openvpn smbclient \u5b89\u88c5\u5b8c\u540e reboot \u91cd\u542f\u540e\u8fdb\u5165\u684c\u9762\u73af\u5883 $ reboot \u684c\u9762\u73af\u5883\u9ed8\u8ba4\u65e0\u6cd5\u4f7f\u7528 root \u8d26\u6237\u767b\u5f55\uff0c\u4f7f\u7528 chinaskill20 \u53ef\u767b\u5f55\u8fdb\u5165\u684c\u9762\u73af\u5883\u3002 \u53f3\u952e\u9009\u62e9 Display Settings \uff0c\u6253\u5f00\u663e\u793a\u5668\u8bbe\u7f6e\uff0c\u5c06\u5206\u8fa8\u7387\u6539\u4e3a 1280x768 \u5728\u914d\u7f6e\u540e\u7eed\u673a\u578b\u65f6\uff0c\u4f1a\u56de\u6765\u6b64\u673a\u914d\u7f6e\u540e\u7eed\u9879\u76ee\u3002","title":"\u9898\u89e3"},{"location":"ch13/solves/#client-task_1","text":"\u8981\u6c42\u80fd\u8bbf\u95ee\u6240\u6709\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u6d4b\u8bd5\u5e94\u7528\u670d\u52a1 \u4e3a\u4e3b\u673a\u5b89\u88c5 GNOME \u684c\u9762\u73af\u5883 \u8c03\u6574\u663e\u793a\u5206\u8fa8\u7387\u4e3a 1280x768 \u6d4b\u8bd5 DHCP\uff0c\u7f51\u5361 IPv4 \u5730\u5740\u4e3a\u81ea\u52a8\u83b7\u53d6 \u6d4b\u8bd5 DNS\uff0c\u5b89\u88c5 dnsutils \u4e0e dig \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 Web\uff0c\u5b89\u88c5 Firefox \u6d4f\u89c8\u5668\uff0ccurl \u547d\u4ee4\u884c\u6d4b\u8bd5\u5de5\u5177\uff0c\u5728\u4efb\u4f55\u65f6\u5019\u8fdb\u884c\u8bbf\u95ee\u6d4b\u8bd5\u65f6\u4e0d\u5141\u8bb8\u5f39\u51fa\u5b89\u5168\u8b66\u544a\u4fe1\u606f \u6d4b\u8bd5 SSH\uff0c\u5b89\u88c5 SSH \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 VPN\uff0c\u5b89\u88c5 OPENVPN \u5ba2\u6237\u7aef\u5de5\u5177\u8f6f\u4ef6 \u6d4b\u8bd5 FTP\uff0c\u5b89\u88c5 lftp \u5ba2\u6237\u7aef\u5de5\u5177 \u6d4b\u8bd5\u6587\u4ef6\u5171\u4eab\uff0c\u5b89\u88c5 smbclient \u5ba2\u6237\u7aef\u5de5\u5177 \u6d4b\u8bd5 Mail\uff0c\u5b89\u88c5 Thunderbird\uff0c\u5e76\u80fd\u6b63\u5e38\u8fdb\u884c\u90ae\u4ef6\u6536\u53d1 \u5176\u4ed6\u8bbe\u5b9a\u5747\u91c7\u7528\u9ed8\u8ba4\u8bbe\u5b9a","title":"Client Task"},{"location":"ch13/solves/#_6","text":"\u5b89\u88c5\u684c\u9762\u73af\u5883 $ apt install gnome \u91cd\u542f\u5373\u53ef","title":"\u9898\u89e3"},{"location":"ch13/solves/#rserver-task","text":"Network \u8bf7\u6839\u636e\u57fa\u672c\u914d\u7f6e\u4fe1\u606f\u914d\u7f6e\u670d\u52a1\u5668\u4e3b\u673a\u540d\uff0c\u7f51\u5361 IP \u5730\u5740\u914d\u7f6e\uff0c\u57df\u540d\u7b49 \u5f00\u542f\u8def\u7531\u8f6c\u53d1\u529f\u80fd iptables \u9ed8\u8ba4\u963b\u6321\u6240\u6709\u6d41\u91cf \u6dfb\u52a0\u5fc5\u8981\u7684 NAT \u89c4\u5219\uff0c\u4f7f Office \u548c Service \u7f51\u7edc\u80fd\u591f\u8bbf\u95ee Internet \u6dfb\u52a0\u5fc5\u8981\u7684\u89c4\u5219\u4ee5\u6ee1\u8db3\u5176\u4ed6\u670d\u52a1\u6240\u9700\uff0c\u7981\u6b62\u521b\u5efa\u653e\u884c\u6240\u6709\u6d41\u91cf\u7684\u89c4\u5219 DHCP \u4e3a\u5ba2\u6237\u7aef\u5206\u914d IP \u8303\u56f4\u4e3a 10.10.100.1 - 10.10.100.50 \u6309\u7167\u5b9e\u9645\u914d\u7f6e DNS \u4e0e GATEWAY \u914d\u7f6e Client \u56fa\u5b9a\u83b7\u53d6 IP \u5730\u5740\u4e3a 10.10.100.51 SSH \u5b89\u88c5 SSH \u6b63\u5e38\u76d1\u542c \u9650\u5236\u9664 Client \u4ee5\u5916\u7684\u5ba2\u6237\u7aef\u767b\u5f55\uff0c\u5176\u4ed6\u4e3b\u673a\u90fd\u5e94\u62d2\u7edd \u914d\u7f6e Client \u53ea\u80fd\u5728 Chinaskills20 \u7528\u6237\u53ef\u4ee5\u514d\u5bc6\u767b\u5f55\uff0c\u7aef\u53e3\u4e3a 2222\uff0c\u4e14\u5177\u6709 root \u63a7\u5236\u6743\u9650 CA CA \u6839\u8bc1\u4e66\u8def\u5f84 /CA/cacert.pem \u7b7e\u53d1\u6570\u5b57\u8bc1\u4e66\uff0c\u7b7e\u53d1\u8005\u4fe1\u606f \u56fd\u5bb6 = CN \u5355\u4f4d = Inc \u7ec4\u7ec7\u673a\u6784 = www.skills.com \u516c\u7528\u540d = Skill Global Root CA","title":"Rserver Task"},{"location":"ch13/solves/#_7","text":"","title":"\u9898\u89e3"},{"location":"ch13/solves/#network","text":"\u9996\u5148\u67e5\u770b\u7f51\u5361\u540d\u79f0\uff0c\u4f7f\u7528 ip link $ ip link 1: lo: (LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: ens192: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000 link/ether 00:0c:29:a4:90:60 brd ff:ff:ff:ff:ff:ff 2: ens224: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group DEFAULT qlen 1000 link/ether 00:0c:29:a4:90:Ba brd ff:ff:ff:ff:ff:ff 4: ens256: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000 link/ether 00:0c:29:a4:90:94 brd ff:ff:ff:ff:ff:ff \u5171\u4e09\u5757\u7f51\u5361\uff0c\u5206\u522b\u6309\u7167\u5bf9\u5e94\u7f51\u7edc\u8bbe\u5b9a\u3002 \u7f16\u8f91 /etc/network/interfaces $ vi /etc/network/interfaces auto ens192 iface ens192 inet static address 172.16.100.254/25 auto ens224 iface ens224 inet static address 10.10.100.254/24 auto ens256 iface ens256 inet static address 192.168.10.2/28 \u63a5\u4e0b\u6765\u542f\u7528\u7f51\u5361 $ ifup ens192 ens224 ens256 \u914d\u7f6e\u4e3b\u673a\u540d $ hostnamectl set-hostname Rserver \u4fee\u6539 /etc/hosts ,\u5c06 FQDN \u5199\u5165 hosts \u6587\u4ef6 \u4fee\u6539 127.0.1.1 debian \u8fd9\u4e00\u884c\uff0c\u4fee\u6539\u4e3a 127.0.1.1 Rserver.sdskills.com Rserver \u6253\u5f00\u5185\u6838\u7684 IPv4 \u8f6c\u53d1\uff0c\u7f16\u8f91 /etc/sysctl.conf \uff0c28 \u884c\u5904\u7684 net.ipv4.ip_forward=1 \u53bb\u6389\u524d\u9762\u7684\u6ce8\u91ca\uff0c\u4fdd\u5b58\u6587\u4ef6\u3002 \u4f7f\u914d\u7f6e\u6587\u4ef6\u751f\u6548 $ sysctl -p \u8fd9\u53f0\u7535\u8111\u5b9e\u9645\u4e0a\u8981\u4f5c\u4e3a\u62d3\u6251\u4e2d\u7684\u63a5\u5165\u8def\u7531\u5668\u6765\u4f7f\u7528\uff0c\u56e0\u6b64\u540e\u7eed\u7684\u7f51\u5173\u8bbe\u5907\u5168\u90e8\u6307\u5b9a\u6b64\u8ba1\u7b97\u673a FQDN \u5728 Linux \u4e0a\u662f\u901a\u8fc7 DNS \u89e3\u6790\u5b9e\u73b0\u7684\uff0c\u9a8c\u8bc1\u914d\u7f6e\u4f7f\u7528 hostname -f","title":"Network"},{"location":"ch13/solves/#iptables","text":"\u8fd9\u9053\u9898\u505a\u51fa\u6765\u7684\u4e0d\u591a\uff0c\u6211\u6000\u7591\u5e94\u8be5\u662f\u6ca1\u770b\u61c2\u9898\u76ee\u3002 \u8fd9\u4e2a\u5b9e\u9a8c\u73af\u5883\u662f\u5c06 192.168.10.0/28 \u7f51\u6bb5\u770b\u4f5c\u516c\u6709 Internet\uff0c\u5c06 service \u4ee5\u53ca office \u63a5\u5165\u4e92\u8054\u7f51\uff0c\u56e0\u6b64\u5e94\u5728 Rserver \u914d\u7f6e NAT \u4f7f\u5176\u901a\u8fc7 Rserver \u7684 IP \u5730\u5740\u63a5\u5165\u4e92\u8054\u7f51\uff0c\u80fd\u7406\u89e3\u5230\u8fd9\u4e2a\u7a0b\u5ea6\u90a3\u4e48\u505a\u8d77\u6765\u4e5f\u5c31\u4e0d\u96be\u4e86\u3002 iptables \u914d\u7f6e\u6700\u70e6\u4eba\u7684\u70b9\u5c31\u662f\u5fc5\u987b\u6309\u987a\u5e8f\u5c06\u9632\u706b\u5899\u89c4\u5219\u5199\u8fdb iptables \u914d\u7f6e\u4e2d\uff0c\u4e00\u65e6\u5199\u9519\u5c31\u8981\u6e05\u9664\u914d\u7f6e\u91cd\u6765\uff0c\u4e0d\u50cf\u73b0\u5728\u7684 firewalld \u662f\u5e76\u884c\u5904\u7406\u7684\uff0c\u6240\u4ee5\u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\u5148\u5168\u90e8\u653e\u884c\uff0c\u7b49\u5f85\u5168\u90e8\u914d\u7f6e\u5b8c\u6210\u4e4b\u540e\u518d\u6765\u601d\u8003\u9632\u706b\u5899\u89c4\u5219\u53ef\u80fd\u66f4\u597d\u3002 \u6bd4\u8f83\u65b9\u4fbf\u7684\u65b9\u6cd5\u662f\u5199\u4e00\u4e2a\u914d\u7f6e\u89c4\u5219\u7684 Shell \u811a\u672c\uff0c\u8fd9\u6837\u540e\u7eed\u4fee\u6539\u8d77\u6765\u4f1a\u76f8\u5bf9\u65b9\u4fbf\u3002 #!/bin/bash # \u5f85\u8865\u5168 # \u6e05\u9664\u73b0\u6709\u89c4\u5219 iptables -F iptables -X iptables -Z # \u8bbe\u5b9a\u9ed8\u8ba4\u89c4\u5219 iptables -P INPUT DROP iptables -P OUTPUT DROP iptables -P FORWARD DROP # \u8bbe\u5b9a\u89c4\u5219 iptables -A INPUT -i lo -j ACCEPT # \u653e\u884c\u6240\u6709\u672c\u673a\u6d41\u91cf iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT # \u653e\u884c\u72b6\u6001\u6d41\u91cf iptables -A INPUT -i ens224 -p tcp -dport 2222 -j ACCEPT # \u653e\u884c SSH \u6d41\u91cf","title":"iptables"},{"location":"ch13/solves/#dhcp","text":"\u5b89\u88c5\u8f6f\u4ef6\u5305 isc-dhcp-server $ apt install isc-dhcp-server \u6ca1\u6709\u505a\u914d\u7f6e\u7684\u60c5\u51b5\u4e0b\uff0c\u5b89\u88c5\u65f6\u4f1a\u63d0\u793a\u670d\u52a1\u65e0\u6cd5\u542f\u52a8\uff0c\u8fd9\u662f\u6b63\u5e38\u7684\u3002 \u8981\u4fee\u6539\u7684\u6587\u4ef6\u6709 /etc/default/isc-dhcp-server \u4e0e /etc/dhcp/dhcpd.conf \u9996\u5148\u4fee\u6539 /etc/default/isc-dhcp-server \u6307\u5b9a\u76d1\u542c\u7f51\u5361 INTERFACESv4=\"ens224\" \u63a5\u4e0b\u6765\u7f16\u8f91 /etc/dhcp/dhcpd.conf \u5728\u6587\u4ef6 50 \u884c\u5904\u6709\u4e00\u4e2a\u5199\u7684\u8f83\u5b8c\u6574\u7684\u793a\u4f8b\u914d\u7f6e\uff0c\u53ef\u4ee5\u76f4\u63a5\u590d\u5236\u4f7f\u7528 subnet 10.10.100.0 netmask 255.255.255.0 { range 10.10.100.1 10.10.100.50; option domain-name-servers 172.16.100.201; option domain-name \"sdskills.com\"; option routers 10.10.100.254; option broadcast-address 10.10.100.255; default-lease-time 600; max-lease-time 7200; } host client { hardware ethernet 00:0c:29:4c:e3:a7; fixed-address 10.10.100.51; } \u5176\u4e2d\uff0cclient \u7684 MAC \u5730\u5740\u53ef\u901a\u8fc7\u5728 Client \u4e0a\u4f7f\u7528 ip link \u67e5\u770b \u542f\u52a8\u670d\u52a1\uff0c\u5e76\u786e\u4fdd\u5f00\u673a\u542f\u52a8 $ systemctl start isc-dhcp-server $ systemctl enable isc-dhcp-server","title":"DHCP"},{"location":"ch13/solves/#ssh","text":"\u6bcf\u6b21\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u65f6\uff0c\u4f7f\u7528 systemctl reload ssh \u4f7f\u914d\u7f6e\u751f\u6548 \u7f16\u8f91 /etc/ssh/sshd_config \u4fee\u6539 Port \u4e3a 2222 \u4e34\u65f6\u4fee\u6539 PermitRootLogin \u4e3a yes \u62f7\u8d1d SSH key # \u5728 Client \u4e0a $ ssh-keygen # \u65e0\u8111\u56de\u8f66 $ ssh-copy-id root@10.10.100.254 -p 2222 # \u5148\u5728 Rserver \u7aef\u5141\u8bb8 Root \u8d26\u6237\u767b\u5f55\uff0c\u540e\u518d\u4fee\u6539\u56de\u6765 \u7f16\u8f91 /etc/hosts.deny \u6765\u9650\u5236\u767b\u5f55 sshd:ALL except 10.10.100.51:deny # \u610f\u4e3a\u9664\u53bb 10.10.100.51 \u4e3b\u673a\u4ee5\u5916\u7684\u5176\u4ed6\u6240\u6709\u4e3b\u673a\u5747\u7981\u6b62\u8bbf\u95ee\u672c\u673a\u7684 SSH \u670d\u52a1 \u786e\u4fdd\u670d\u52a1\u5f00\u673a\u542f\u52a8 $ systemctl start ssh $ systemctl enable ssh","title":"SSH"},{"location":"ch13/solves/#ca","text":"\u5728\u914d\u7f6e CA \u4e4b\u524d\uff0c\u786e\u4fdd\u5f53\u524d\u65f6\u95f4\u6b63\u786e\uff0c\u65f6\u533a\u6b63\u786e\uff0c\u6700\u597d\u5148\u914d\u7f6e NTP \u670d\u52a1\u5668\u518d\u56de\u6765\u914d\u7f6e CA \u4fee\u6539 /usr/lib/ssl/openssl.cnf \u7b2c 28 \u884c\u5904\uff0c\u4fee\u6539\u6839\u76ee\u5f55\u4e3a /CA \u521b\u5efa\u5b50\u76ee\u5f55\uff1a $ cd /CA $ mkdir newcerts certs crl private \u5e76\u521b\u5efa\u4e24\u4e2a\u6587\u4ef6\uff1a $ touch ./index.txt $ echo 1000 > serial \u751f\u6210\u6839\u8bc1\u4e66\u79c1\u94a5 $ openssl genrsa -out private/cakey.pem 4096 \u4f7f\u7528\u4e0a\u4e00\u6b65\u751f\u6210\u7684\u79c1\u94a5\u7b7e\u53d1\u8bc1\u4e66\uff1a $ openssl req -x509 -new -key /CA/private/cakey.pem -out /CA/cacert.pem","title":"CA"},{"location":"ch13/solves/#server01","text":"","title":"Server01"},{"location":"ch13/solves/#network_1","text":"\u914d\u7f6e IP \u4e0e\u4e3b\u673a\u540d\u8ddf\u4e0a\u9762\u65b9\u6cd5\u76f8\u540c\uff0c\u4e0d\u591a\u8d58\u8ff0","title":"Network"},{"location":"ch13/solves/#dns","text":"Debian \u5c06 Bind \u7684\u914d\u7f6e\u6587\u4ef6\u5206\u6210\u4e86\u5f88\u591a\u4efd \u5bf9\u4e8e DNS \u8f6c\u53d1\u5668\uff0c\u4fee\u6539 /etc/bind/named.conf.options ,\u6587\u4ef6\u4e2d\u6709\u4e00\u6bb5\u88ab\u6ce8\u91ca\u6389\u7684 forwarders,\u53d6\u6d88\u6ce8\u91ca\u540e\u4fee\u6539\u5373\u53ef \u5c06\u6b63\u5411\u4e0e\u53cd\u5411\u89e3\u6790\u914d\u7f6e\u653e\u8fdb /etc/bind/named.conf.local \uff0c\u5982\u4e0b: zone \"sdskills.com\" { type master; file \"/etc/bind/db.sdskills.com\"; }; zone \"100.16.172.in-addr.aroa\" { type master; file \"/etc/bind/db.172.16.100\"; }; \u4e0d\u8981\u5fd8\u8bb0\u672b\u5c3e\u7684\u5206\u53f7\uff01 \u63a5\u4e0b\u6765\u521b\u5efa\u533a\u57df\u6587\u4ef6\uff0c\u4ece\u5df2\u6709\u7684\u533a\u57df\u6587\u4ef6\u590d\u5236\u4fee\u6539\u5373\u53ef $ cp /etc/bind/db.local /etc/bind/db.sdskills.com $ cp /etc/bind/db.127 /etc/bind/db.172.16.100 \u5c06 SOA \u4fee\u6539\u4e3a\u81ea\u5df1\u7684\u57df\u540d ( \u6ce8\u610f\u57df\u540d\u540e\u7684\u70b9\uff01 ) \u6dfb\u52a0\u81ea\u5df1\u9700\u8981\u7684\u8bb0\u5f55\u5373\u53ef \u4f7f\u7528 named-checkconf \u548c named-checkzone \u6765\u68c0\u67e5\u8bed\u6cd5\u683c\u5f0f\u662f\u5426\u6b63\u786e root@Server01:~# named-checkconf root@Server01:~# named-checkzone sdskills.com /etc/bind/db.sdskills.com zone sdskills.com/IN: loaded serial 2 OK root@Server01:~# \u5f53\u524d\u7684 Bind \u7248\u672c\u9ed8\u8ba4\u53ea\u5141\u8bb8\u672c\u5730\u4e0e\u5df2\u77e5\u7684\u672c\u5730\u5c40\u57df\u7f51\u8bbf\u95ee\u670d\u52a1\u5668\u8fdb\u884c\u67e5\u8be2\uff0c\u56e0\u6b64\u9700\u8981\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u6539\u56de\u4ee5\u524d\u7684\u653e\u884c\u6a21\u5f0f\uff1a \u4fee\u6539 /etc/bind/named.conf.options \uff0c\u5728\u540e\u9762\u589e\u52a0\u4e09\u884c\uff1a options { ... allow-recursion { any; }; allow-query { any; }; allow-query-cache { any; }; ... }; ``` \u653e\u884c\u6240\u6709\u4e3b\u673a\u3002 ## apache \u9898\u76ee\u4e2d\u9700\u8981\u4f7f\u7528 LDAP \u505a\u8ba4\u8bc1\uff0c\u914d\u7f6e\u5b8c LDAP \u540e\u518d\u6765 ```sh apt install apache2 \u65b0\u5efa webuser \u7528\u6237\uff0c\u6307\u5b9a\u4e3a\u7cfb\u7edf\u7528\u6237\u5e76\u7981\u6b62\u767b\u5f55 $ useradd -r webuser -s /sbin/nologin \u4fee\u6539 /etc/apache2/envvars \u5c06\u6307\u5b9a\u8fd0\u884c\u7528\u6237\u4e0e\u7ec4\u7684\u53d8\u91cf\u4fee\u6539 export APACHE_RUN_USER=webuser export APACHE_RUN_GROUP=webuser \u7f51\u7ad9\u76ee\u5f55\u653e\u5728 NFS \u5171\u4eab\u4e2d\uff0c\u5148\u505a Server02 \u518d\u56de\u6765 \u6302\u8f7d /data/share \u5199\u5165 /etc/fstab 172.16.100.202:/data/share /data/share nfs defaults,_netdev 0 0 $ mount -a \u5199 index.sh $ mkdir /data/share/webroot $ vim /data/share/webroot/index.sh #!/bin/bash # This is index.sh echo \"Content-type: text/html\" echo \"\" echo \"Current System Time is: $(date +\"%F %r\")\" \u4fee\u590d\u76ee\u5f55\u6743\u9650\uff0c\u5e76\u4f7f\u811a\u672c\u53ef\u6267\u884c $ chown -R webuser:webuser /data/share/webroot $ chmod 775 /data/share/webroot/index.sh \u914d\u7f6e Apahce\uff0c\u4f7f CGI \u811a\u672c\u53ef\u6267\u884c\uff0c\u5e76\u5141\u8bb8\u5904\u7406 Shell \u811a\u672c $ vim /etc/apache2/conf-enabled/security.conf <Dictory \"/data/share/webroot\"> AllowOverride None Options +ExecCGI -MultiViews AddHandler cgi-script .cgi .sh .pl Require all granted </Directory> \u914d\u7f6e\u865a\u62df\u4e3b\u673a\u4eec\uff0c\u52a0\u4e0a SSL\u3002 \u7b7e\u53d1\u8bc1\u4e66 $ openssl req -new -key Server01.pem -out http.csr $ openssl ca -in http.csr -out http.pem \u5c06\u8bc1\u4e66\u4f20\u56de Server01 \u540e\uff0c\u4fee\u590d\u6743\u9650\u5e76\u653e\u5728\u5bf9\u5e94\u76ee\u5f55 chmod 777 *.pem cp http.pem /etc/ssl/certs/http_sdskills_com.pem Apache \u63d0\u4f9b\u4e86 SSL \u7684\u865a\u62df\u4e3b\u673a\u6a21\u677f\uff0c\u5728 `/etc/apache2/sites-available/default-ssl.conf \u5c06\u8fd9\u4e2a\u6587\u4ef6\u590d\u5236\u4e00\u4efd\uff0c\u7136\u540e\u4fee\u6539 cp /etc/apache2/sites-available/default-ssl.conf /etc/apache2/sites-available/www.sdskills.com.conf vim /etc/apache2/sites-available/www.sdskills.com \u539f\u6587\u4ef6\u5185\u5bb9\u5f88\u591a\uff0c\u53ea\u622a\u53d6\u9700\u8981\u6ce8\u610f\u7684\u90e8\u5206 <VirtualHost _default_:443> ServerName www.sdskills.com ServerAlias *.sdskills.com DocumentRoot /data/share/webroot SSLEngine On SSLCertificateFile /etc/ssl/certs/http_sdskills_com.pem SSLCertificateKeyFile /etc/ssl/certs/Rserver.key </VirtualHost> \u542f\u7528 SSL \u6a21\u5757\uff0c\u542f\u7528\u521a\u624d\u4fee\u6539\u7684\u7f51\u7ad9\u914d\u7f6e\u6587\u4ef6 $ a2enmod ssl $ a2ensite www.sdskills.com.conf \u4fee\u6539\u539f\u59cb\u9ed8\u8ba4\u7f51\u7ad9\u6587\u4ef6\uff0c\u5c06 80 \u7aef\u53e3\u8bbf\u95ee\u91cd\u5b9a\u5411\u5230 HTTPS $ vim /etc/apache2/sites-enabled/000-default.conf <VirtualHost *:80> ServerName www.sdskills.com ServerAlias *.sdskills.com # \u628a\u539f\u6709\u914d\u7f6e\u6ce8\u91ca # DocumentRoot /var/www/html # \u52a0\u5165 redirect permanent / https://www.sdskills.com/ </VirtualHost>","title":"DNS"},{"location":"ch13/solves/#ldap","text":"\u4fee\u6539\u521a\u624d\u5199\u597d\u7684 /etc/apache2/conf-enabled/security.conf <Dictory \"/data/share/webroot\"> AllowOverride None Options +ExecCGI -MultiViews AddHandler cgi-script .cgi .sh .pl # \u589e\u52a0 AuthType basic AuthBasicProvider ldap AuthLDAPUrl \"ldaps://localhost/ou=People,dc=sdskills,dc=com\" AuthName LDAP # \u6ce8\u91ca\u6389\u8fd9\u884c\uff0c\u91cd\u5199 #Require all granted Require valid-user </Directory> # \u5728\u5916\u9762\u589e\u52a0 LDAPVerifyServerCert off","title":"\u914d\u7f6e LDAP \u9a8c\u8bc1"},{"location":"ch13/solves/#mariadb","text":"$ apt install mariadb-server $ mysql_secure_installation \u589e\u52a0\u4e00\u4e2a\u8d85\u7ea7\u7528\u6237\u7528\u4e8e\u7f51\u9875\u7aef\u7ba1\u7406\uff0c\u65b0\u7248\u7684 MariaDB \u4e0e MySQL \u5df2\u4e0d\u5141\u8bb8\u7528\u6237\u4f7f\u7528 root \u5728\u547d\u4ee4\u884c\u4ee5\u5916\u7684\u573a\u5408\u767b\u5f55 $ mariadb -uroot -p CREATE USER '\u65b0\u7528\u6237'@'%' IDENTIFIED BY '\u65b0\u7528\u6237\u7684\u5bc6\u7801'; GRANT ALL PRIVILEGES ON *.* TO '\u65b0\u7528\u6237'@'%' WITH GRANT OPTION; \u63a5\u4e0b\u6765\u6258\u7ba1 phpMyAdmin \u5373\u53ef\u4f7f\u7528\u65b0\u521b\u5efa\u7684\u7528\u6237\u767b\u5f55","title":"MariaDB"},{"location":"ch13/solves/#php","text":"$ apt install php libapache2-mod-php php-mysql \u6258\u7ba1 phpMyAdmin \u9700\u8981\u5b89\u88c5 php-xml \u6a21\u5757 $ apt install php-xml $ systemctl restart apache2 \u5c06\u7f51\u7ad9\u6587\u4ef6\u590d\u5236\u540e\u786e\u8ba4\u6743\u9650\u6b63\u786e $ chown -R webuser:webuser /data/share/htdocs","title":"PHP"},{"location":"ch13/solves/#ssh_1","text":"\u51e0\u4e4e\u540c\u7406\uff0c\u53c2\u7167 Rserver \u914d\u7f6e","title":"SSH"},{"location":"ch13/solves/#ldap_1","text":"\u5b89\u88c5\u914d\u7f6e LDAP \u524d\uff0c\u5148\u521b\u5efa\u597d\u9700\u6c42\u7684 100 \u4e2a\u7528\u6237 \u8fd9\u4e2a\u80af\u5b9a\u4e0d\u80fd\u624b\u6572\uff0c\u6240\u4ee5\u4e0a Shell \u811a\u672c: #!/bin/bash # \u5728\u4e00\u4e2a\u7b49\u5bbd\u7684 100 \u4e2a\u6570\u4e2d\u5faa\u73af for i in $(seq -w 100) do # \u65b0\u5efa\u7528\u6237 useradd lduser$i # \u7ed9\u7528\u6237\u8bbe\u7f6e\u5bc6\u7801 echo \"lduser$i:Chinaskill20!\" | chpasswd done \u7ea2\u5e3d\u7cfb\u53ef\u4ee5\u4f7f\u7528 passwd --stdin \uff0c\u4f46 Debian \u7684 passwd \u4e0d\u652f\u6301\u8fd9\u4e2a\u53c2\u6570\uff0c\u6240\u4ee5\u9700\u8981\u4f7f\u7528\u53e6\u4e00\u4e2a\u5de5\u5177 chpasswd \u811a\u672c\u5199\u5b8c\uff0c\u4fdd\u5b58\u4e3a useradd.sh\uff0c\u8d4b\u4e88\u6267\u884c\u6743\u9650\u76f4\u63a5\u8fd0\u884c\uff0c\u6216\u8005\uff1a $ bash useradd.sh \u5b89\u88c5 slapd \u4e0e migrationtools $ apt install slapd migrationtools \u5e76\u914d\u7f6e slapd $ dpkg-reconfigure slapd \u4fee\u6539 /etc/migrationtools/migrate_common.ph ,\u5c06\u539f\u6709\u57df\u540d\u6539\u6210\u9700\u6c42\u7684 dc=sdskills,dc=com migrationtools \u811a\u672c\u6709\u4e00\u4e2a bug\uff0c\u7531\u4e8e Debian \u6ca1\u6709\u5c06\u6587\u4ef6\u653e\u5728\u8be5\u653e\u7684\u4f4d\u7f6e\u5bfc\u81f4\u811a\u672c\u627e\u4e0d\u5230 migrate_common.ph \u6587\u4ef6\u800c\u62a5\u9519\u3002 \u8fdb\u5165\u811a\u672c\u7684\u5b58\u653e\u76ee\u5f55 $ cd /usr/share/migrationtools \u4fee\u590d\u53d1\u884c\u7248\u7684\u4e00\u4e2a Bug\uff0c\u94fe\u63a5 migrate_common.ph \u5230 /etc/perl $ ln -s /etc/migrationtools/migrate_common.ph /etc/perl \u8fd0\u884c migrate_all_online.sh \u5c06\u672c\u5730\u4fe1\u606f\u5408\u5e76\u8fdb LDAP $ LDAPADD=\"/usr/bin/ldapadd -c\" ETC_ALIASES=\"/dev/null\" ./migrate_all_online.sh \u5176\u4e2d\uff0c\u624b\u52a8\u6307\u5b9a ldapadd \u547d\u4ee4\u7684 -c \u53c2\u6570\u4f7f\u5176\u5ffd\u7565\u9519\u8bef\uff0c\u6839\u636e Debian \u6587\u6863\u6307\u5b9a ETC_ALIASES \u53d8\u91cf\u6765\u907f\u514d\u4e00\u4e2a\u9519\u8bef Question Answer X.500 naming context dc=sdskill,dc=com LDAP server hostname localhost Manager DN cn=admin,dc=sdskill,dc=com Bind credentials \u8f93\u5165\u5bc6\u7801 Create DUAConfigProfile no \u751f\u6210\u8bc1\u4e66\u79c1\u94a5\u4e0e\u8bc1\u4e66\u7b7e\u53d1\u8bf7\u6c42 $ openssl genrsa -out Rserver.pem 4096 $ openssl req -new -key Rserver.pem -out ldap.csr \u5728 Rserver \u4e0a\u7ed9\u8bc1\u4e66\u7b7e\u540d $ openssl ca -in ldap.csr -out ldap.pem \u5c06\u8bc1\u4e66\u4f20\u56de Server01 \u7ed9\u8bc1\u4e66\u6587\u4ef6\u8d4b\u4e88\u6743\u9650\uff1a $ chmod 777 *.pem \u672c\u4f8b\u4e2d\u6240\u6709\u8bc1\u4e66\u5b58\u653e\u5728 /root \u4e0b \u5c06 CA \u6839\u8bc1\u4e66\uff0cServer01 \u7684\u79c1\u94a5\uff0c\u4ee5\u53ca LDAP \u8bc1\u4e66\u5b58\u653e\u81f3 /etc/ssl/certs/ \u914d\u7f6e LDAP config\uff0c\u52a0\u5165\u8bc1\u4e66\u4f4d\u7f6e $ apt install ldapvi $ ldapvi -Y EXTERNAL -h ldapi:/// -b cn=config \u5728 cn=config olcTLSCACertificateFile: /etc/ssl/certs/Skill_Root_Global_CA.pem olcTLSCertificateKeyFile: /etc/ssl/certs/Rserver.key olcTLSCertificateFile: /etc/ssl/certs/Rserver_ldap.pem \u4fdd\u5b58\u9000\u51fa\uff0c\u6309 y \u786e\u8ba4\u4fee\u6539 \u4fee\u6539 /etc/default/slapd \u6253\u5f00 ldaps:// \u76d1\u542c $ vim /etc/default/slapd SLAPD_SERVICES=\"ldaps:/// ldapi:///\"","title":"LDAP"},{"location":"ch13/solves/#server02","text":"","title":"Server02"},{"location":"ch13/solves/#network_2","text":"\u5927\u540c\u5c0f\u5f02\uff0c\u4e0d\u518d\u8d58\u8ff0","title":"Network"},{"location":"ch13/solves/#disk-raid5","text":"$ apt install mdadm \u6dfb\u52a0\u786c\u76d8 $ mdadm -Cv /dev/md0 -l 5 -n 3 -x 1 /dev/sdb /dev/sdc /dev/sdd /dev/sde \u53c2\u6570 \u8bf4\u660e -C \u521b\u5efa\u8f6f\u4ef6 RAID -v \u663e\u793a\u8be6\u7ec6\u4fe1\u606f -l \u6307\u5b9a\u9635\u5217\u7c7b\u578b\uff0c\u6b64\u5904\u4e3a RAID 5 -n \u6307\u5b9a\u4f7f\u7528\u51e0\u5757\u786c\u76d8\uff0c\u4e0d\u7b97\u5907\u4efd\u76d8 -x \u6307\u5b9a\u4f7f\u7528\u51e0\u5757\u786c\u76d8\u4f5c\u4e3a\u5907\u4efd \u521b\u5efa LVM # \u5b89\u88c5\u903b\u8f91\u5377\u7ba1\u7406\u5de5\u5177 $ apt install lvm2 # \u521b\u5efa\u5377\u7ec4\u4e0e\u903b\u8f91\u5377 $ vgcreate /dev/vg01 /dev/md0 $ lvcreate -l 510 -n lv01 /dev/vg01 # \u4f7f\u7528 ext4 \u683c\u5f0f\u5316 $ mkfs.ext4 /dev/vg01/lv01 \u5199\u5165 /etc/fstab \u5b9e\u73b0\u81ea\u52a8\u6302\u8f7d $ mkdir /data $ vim /etc/fstab \u5199\u5165 $ /dev/vg01/lv01 /data ext4 defaults 0 0 $ mount -a","title":"Disk ( Raid5 )"},{"location":"ch13/solves/#nfs","text":"apt install nfs-kernel-server \u4fee\u6539 /etc/exports /data/share 172.16.100.128/25(rw,sync,no_subtree_check) \u91cd\u542f\u670d\u52a1 systemctl restart nfs-kernel-server","title":"NFS"},{"location":"ch13/solves/#server04","text":"\u5173\u4e8e DNS \u89e3\u6790\u7684\u7b2c\u4e09\u95ee DNS \u6839\u8fd9\u4e48\u5199 DNS \u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6 /etc/bind/named.conf.default-zones \u4fee\u6539\u6839\u57df\u540d\u90e8\u5206 \u5373\u4e00\u4e2a\u70b9","title":"Server04"},{"location":"ch13/tasks/","text":"\u5927\u8d5b\u9898\u76ee \u7531\u5df2\u77e5\u4fe1\u606f\u63a8\u65ad\u9898\u76ee\u5e76\u6574\u7406\uff0c\u4e0d\u4fdd\u8bc1\u4e0e\u539f\u9898\u4e00\u81f4 \u767b\u5f55 Username\uff1aroot Password\uff1aChinaSkill20! Username\uff1aChinaskills20 Password\uff1aChinaskills20! \u9664\u7279\u522b\u6307\u5b9a\u5916\uff0c\u6240\u6709\u8d26\u53f7\u5bc6\u7801\u5747\u4e3a Chinaskills20! \u7cfb\u7edf\u914d\u7f6e Region\uff1aChina Locale\uff1aen_US.UTF-8 KeyMap\uff1aEnglish US \u5f53\u4efb\u52a1\u4e3a\u914d\u7f6e SSL \u6216 TLS\uff0c\u5982\u8981\u6c42\u9690\u85cf\u6240\u6709\u8b66\u544a\uff0c\u8bf7\u5c0f\u5fc3\u6267\u884c\u3002 \u7ade\u8d5b\u73af\u5883 \u7269\u7406\u673a\uff1a \u6587\u4ef6\u5939\u8def\u5f84\uff1a \u865a\u62df\u673a:[datastore1] ( VMware ESXi ) ISO \u955c\u50cf\uff1a[DATA]ISO/ ( VMware ESXi ) \u8f6f\u4ef6\uff1aD:\\\u8f6f\u4ef6 ( Host ) \u9879\u76ee\u4efb\u52a1\u63cf\u8ff0 \u62d3\u6251\u89c1\u6837\u9898 \u57fa\u672c\u914d\u7f6e\uff1a Device Hostname System FQDN IP Address Service Server01 Server01 \u9884\u88c5 Linux Server01.sdskills.com 172.16.100.201/25 DNS Web SSH LDAP DBMS Server02 Server02 \u5f85\u5b89\u88c5 Linux Server02.sdskills.com 172.16.100.202/25 RAID5 NFS FTP Mail SSH Server03 Server03 \u9884\u88c5 Linux Server03.skills.com 192.168.10.3/28 NTP OpenVPN Server04 Server04 \u5f85\u5b89\u88c5 Linux Server04.skills.com 192.168.10.4/28 DNS Web Rserver Rserver \u9884\u88c5 Linux Rserver.sdskills.com 172.16.100.254/25 192.168.10.2/28 10.10.10.254/24 firewall DHCP SSH CA Client Client Linux Desktop 10.10.100.x none \u7f51\u7edc\uff1a Network CIDR office 10.10.100.0/24 service 172.16.100.128/25 internet 192.168.10.0/28 Client Task Client \u5df2\u9884\u88c5\u7b80\u6613 Debian\uff0c\u8981\u6c42\u5982\u4e0b\uff1a \u8981\u6c42\u80fd\u8bbf\u95ee\u6240\u6709\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u6d4b\u8bd5\u5e94\u7528\u670d\u52a1 \u4e3a\u4e3b\u673a\u5b89\u88c5 GNOME \u684c\u9762\u73af\u5883 \u8c03\u6574\u5206\u8fa8\u7387\u81f3 1280x768 \u6d4b\u8bd5 DHCP\uff0cIPv4 \u5730\u5740\u4e3a\u81ea\u52a8\u83b7\u53d6 \u6d4b\u8bd5 DNS\uff0c\u5b89\u88c5 dnsutils \u4e0e dig \u547d\u4ee4\u884c\u7a0b\u5e8f \u6d4b\u8bd5 Web\uff0c\u5b89\u88c5 Firefox \u6d4f\u89c8\u5668\uff0ccUrl \u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5728\u4efb\u4f55\u65f6\u5019\u8fdb\u884c\u8bbf\u95ee\u6d4b\u8bd5\u4e0d\u5141\u8bb8\u5f39\u51fa\u5b89\u5168\u8b66\u544a\u4fe1\u606f \u6d4b\u8bd5 SSH\uff0c\u5b89\u88c5 SSH \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 VPN \u5b89\u88c5 VPN \u5ba2\u6237\u7aef \u6d4b\u8bd5 FTP\uff0c\u5b89\u88c5 FTP \u5ba2\u6237\u7aef \u6d4b\u8bd5\u6587\u4ef6\u5171\u4eab\uff0c\u5b89\u88c5 Samba \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 Mail\uff0c\u5b89\u88c5 Thunderbird\uff0c\u5e76\u80fd\u6b63\u5e38\u8fdb\u884c\u90ae\u4ef6\u6536\u53d1 \u5176\u4ed6\u6d4b\u8bd5\u91c7\u7528\u9ed8\u8ba4\u8bbe\u5b9a Rserver Task Network \u8bf7\u6839\u636e\u57fa\u672c\u914d\u7f6e\u4fe1\u606f\u914d\u7f6e\u670d\u52a1\u5668\u4e3b\u673a\u540d\uff0c\u7f51\u5361 IP \u5730\u5740\u914d\u7f6e\uff0c\u57df\u540d\u7b49 \u5f00\u542f\u8def\u7531\u8f6c\u53d1\u529f\u80fd iptables \u9ed8\u8ba4\u963b\u6321\u6240\u6709\u6d41\u91cf \u6dfb\u52a0\u5fc5\u8981\u7684 NAT \u89c4\u5219\u548c\u6d41\u91cf\u653e\u884c\u89c4\u5219\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b Internet \u7f51\u7edc\u4e0d\u80fd\u8bbf\u95ee office \u7f51\u7edc\uff0c\u5e76\u4f7f\u6240\u6709\u670d\u52a1\u6b63\u5e38\u5de5\u4f5c \u6dfb\u52a0\u5fc5\u8981\u7684\u7aef\u53e3\u8f6c\u53d1\u89c4\u5219 DHCP \u4e3a\u5ba2\u6237\u7aef\u5206\u914d IP \u8303\u56f4\u4e3a 10.10.100.1 - 10.10.100.50 \u6309\u7167\u5b9e\u9645\u914d\u7f6e DNS \u4e0e GATEWAY \u914d\u7f6e Client \u56fa\u5b9a\u83b7\u53d6 IP \u5730\u5740\u4e3a 10.10.100.51 SSH \u5b89\u88c5 SSH \u6b63\u5e38\u76d1\u542c \u9650\u5236\u9664 Client \u4ee5\u5916\u7684\u5ba2\u6237\u7aef\u767b\u5f55\uff0c\u5176\u4ed6\u4e3b\u673a\u90fd\u5e94\u62d2\u7edd \u914d\u7f6e Client \u53ea\u80fd\u5728 Chinaskills20 \u7528\u6237\u53ef\u4ee5\u514d\u5bc6\u767b\u5f55\uff0c\u7aef\u53e3\u4e3a 2222\uff0c\u4e14\u5177\u6709 root \u63a7\u5236\u6743\u9650 CA CA \u6839\u8bc1\u4e66\u8def\u5f84 /CA/cacert.pem \u7b7e\u53d1\u6570\u5b57\u8bc1\u4e66\uff0c\u7b7e\u53d1\u8005\u4fe1\u606f \u56fd\u5bb6 = CN \u5355\u4f4d = Inc \u7ec4\u7ec7\u673a\u6784 = www.sdskills.com \u516c\u7528\u540d = Skill Global Root CA Server01 Task Network \u914d\u7f6e\u4e3b\u673a\u540d IP DNS \u7f51\u5173\u7b49 DNS \u5b89\u88c5 Bind \u670d\u52a1 \u5efa\u7acb sdskills.com \u57df\uff0c\u4e3a\u9664 Internet \u533a\u57df\u7684\u4e3b\u673a\u5efa\u7acb\u6b63\u53cd\u89e3\u6790 \u5f53\u51fa\u73b0\u65e0\u6cd5\u89e3\u6790\u7684\u57df\u540d\u65f6\uff0c\u5411\u57df skills.com \u7533\u8bf7\u66f4\u9ad8\u5c42\u6b21\u7684\u89e3\u6790 Web \u5b89\u88c5 Apache \u670d\u52a1 \u7531 Server01 \u63d0\u4f9b www.sdskills.com \u7f51\u7ad9 \u670d\u52a1\u4ee5\u7528\u6237 webuser \u8fd0\u884c \u7f51\u7ad9\u6587\u4ef6\u5b58\u653e\u5728 /data/share/webroot \u9875\u9762\u4e3a Shell \u811a\u672c\uff0c\u6587\u4ef6\u540d\u4e3a index.sh \u7f51\u9875\u5185\u5bb9\u4e3a Current system time is:$(date \"+%F %T %p\") \u8be5\u9875\u9762\u9700\u8981\u5458\u5de5\u8d26\u53f7\u8ba4\u8bc1\u624d\u80fd\u8bbf\u95ee \u5458\u5de5\u8d26\u53f7\u5b58\u50a8\u5728 LDAP \u4e2d\uff0c\u8d26\u53f7\u4e3a lduser001 \u7f51\u7ad9\u4f7f\u7528 HTTPS \u534f\u8bae SSL \u4f7f\u7528 RServer \u7b7e\u53d1\u7684\u8bc1\u4e66\uff0c\u9881\u53d1\u7ed9\uff1a","title":"\u7b2c\u4e00\u5957\u9898\u76ee"},{"location":"ch13/tasks/#_1","text":"\u7531\u5df2\u77e5\u4fe1\u606f\u63a8\u65ad\u9898\u76ee\u5e76\u6574\u7406\uff0c\u4e0d\u4fdd\u8bc1\u4e0e\u539f\u9898\u4e00\u81f4","title":"\u5927\u8d5b\u9898\u76ee"},{"location":"ch13/tasks/#_2","text":"Username\uff1aroot Password\uff1aChinaSkill20! Username\uff1aChinaskills20 Password\uff1aChinaskills20! \u9664\u7279\u522b\u6307\u5b9a\u5916\uff0c\u6240\u6709\u8d26\u53f7\u5bc6\u7801\u5747\u4e3a Chinaskills20!","title":"\u767b\u5f55"},{"location":"ch13/tasks/#_3","text":"Region\uff1aChina Locale\uff1aen_US.UTF-8 KeyMap\uff1aEnglish US \u5f53\u4efb\u52a1\u4e3a\u914d\u7f6e SSL \u6216 TLS\uff0c\u5982\u8981\u6c42\u9690\u85cf\u6240\u6709\u8b66\u544a\uff0c\u8bf7\u5c0f\u5fc3\u6267\u884c\u3002","title":"\u7cfb\u7edf\u914d\u7f6e"},{"location":"ch13/tasks/#_4","text":"\u7269\u7406\u673a\uff1a \u6587\u4ef6\u5939\u8def\u5f84\uff1a \u865a\u62df\u673a:[datastore1] ( VMware ESXi ) ISO \u955c\u50cf\uff1a[DATA]ISO/ ( VMware ESXi ) \u8f6f\u4ef6\uff1aD:\\\u8f6f\u4ef6 ( Host )","title":"\u7ade\u8d5b\u73af\u5883"},{"location":"ch13/tasks/#_5","text":"\u62d3\u6251\u89c1\u6837\u9898 \u57fa\u672c\u914d\u7f6e\uff1a Device Hostname System FQDN IP Address Service Server01 Server01 \u9884\u88c5 Linux Server01.sdskills.com 172.16.100.201/25 DNS Web SSH LDAP DBMS Server02 Server02 \u5f85\u5b89\u88c5 Linux Server02.sdskills.com 172.16.100.202/25 RAID5 NFS FTP Mail SSH Server03 Server03 \u9884\u88c5 Linux Server03.skills.com 192.168.10.3/28 NTP OpenVPN Server04 Server04 \u5f85\u5b89\u88c5 Linux Server04.skills.com 192.168.10.4/28 DNS Web Rserver Rserver \u9884\u88c5 Linux Rserver.sdskills.com 172.16.100.254/25 192.168.10.2/28 10.10.10.254/24 firewall DHCP SSH CA Client Client Linux Desktop 10.10.100.x none \u7f51\u7edc\uff1a Network CIDR office 10.10.100.0/24 service 172.16.100.128/25 internet 192.168.10.0/28","title":"\u9879\u76ee\u4efb\u52a1\u63cf\u8ff0"},{"location":"ch13/tasks/#client-task","text":"Client \u5df2\u9884\u88c5\u7b80\u6613 Debian\uff0c\u8981\u6c42\u5982\u4e0b\uff1a \u8981\u6c42\u80fd\u8bbf\u95ee\u6240\u6709\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u6d4b\u8bd5\u5e94\u7528\u670d\u52a1 \u4e3a\u4e3b\u673a\u5b89\u88c5 GNOME \u684c\u9762\u73af\u5883 \u8c03\u6574\u5206\u8fa8\u7387\u81f3 1280x768 \u6d4b\u8bd5 DHCP\uff0cIPv4 \u5730\u5740\u4e3a\u81ea\u52a8\u83b7\u53d6 \u6d4b\u8bd5 DNS\uff0c\u5b89\u88c5 dnsutils \u4e0e dig \u547d\u4ee4\u884c\u7a0b\u5e8f \u6d4b\u8bd5 Web\uff0c\u5b89\u88c5 Firefox \u6d4f\u89c8\u5668\uff0ccUrl \u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5728\u4efb\u4f55\u65f6\u5019\u8fdb\u884c\u8bbf\u95ee\u6d4b\u8bd5\u4e0d\u5141\u8bb8\u5f39\u51fa\u5b89\u5168\u8b66\u544a\u4fe1\u606f \u6d4b\u8bd5 SSH\uff0c\u5b89\u88c5 SSH \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 VPN \u5b89\u88c5 VPN \u5ba2\u6237\u7aef \u6d4b\u8bd5 FTP\uff0c\u5b89\u88c5 FTP \u5ba2\u6237\u7aef \u6d4b\u8bd5\u6587\u4ef6\u5171\u4eab\uff0c\u5b89\u88c5 Samba \u547d\u4ee4\u884c\u5de5\u5177 \u6d4b\u8bd5 Mail\uff0c\u5b89\u88c5 Thunderbird\uff0c\u5e76\u80fd\u6b63\u5e38\u8fdb\u884c\u90ae\u4ef6\u6536\u53d1 \u5176\u4ed6\u6d4b\u8bd5\u91c7\u7528\u9ed8\u8ba4\u8bbe\u5b9a","title":"Client Task"},{"location":"ch13/tasks/#rserver-task","text":"Network \u8bf7\u6839\u636e\u57fa\u672c\u914d\u7f6e\u4fe1\u606f\u914d\u7f6e\u670d\u52a1\u5668\u4e3b\u673a\u540d\uff0c\u7f51\u5361 IP \u5730\u5740\u914d\u7f6e\uff0c\u57df\u540d\u7b49 \u5f00\u542f\u8def\u7531\u8f6c\u53d1\u529f\u80fd iptables \u9ed8\u8ba4\u963b\u6321\u6240\u6709\u6d41\u91cf \u6dfb\u52a0\u5fc5\u8981\u7684 NAT \u89c4\u5219\u548c\u6d41\u91cf\u653e\u884c\u89c4\u5219\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b Internet \u7f51\u7edc\u4e0d\u80fd\u8bbf\u95ee office \u7f51\u7edc\uff0c\u5e76\u4f7f\u6240\u6709\u670d\u52a1\u6b63\u5e38\u5de5\u4f5c \u6dfb\u52a0\u5fc5\u8981\u7684\u7aef\u53e3\u8f6c\u53d1\u89c4\u5219 DHCP \u4e3a\u5ba2\u6237\u7aef\u5206\u914d IP \u8303\u56f4\u4e3a 10.10.100.1 - 10.10.100.50 \u6309\u7167\u5b9e\u9645\u914d\u7f6e DNS \u4e0e GATEWAY \u914d\u7f6e Client \u56fa\u5b9a\u83b7\u53d6 IP \u5730\u5740\u4e3a 10.10.100.51 SSH \u5b89\u88c5 SSH \u6b63\u5e38\u76d1\u542c \u9650\u5236\u9664 Client \u4ee5\u5916\u7684\u5ba2\u6237\u7aef\u767b\u5f55\uff0c\u5176\u4ed6\u4e3b\u673a\u90fd\u5e94\u62d2\u7edd \u914d\u7f6e Client \u53ea\u80fd\u5728 Chinaskills20 \u7528\u6237\u53ef\u4ee5\u514d\u5bc6\u767b\u5f55\uff0c\u7aef\u53e3\u4e3a 2222\uff0c\u4e14\u5177\u6709 root \u63a7\u5236\u6743\u9650 CA CA \u6839\u8bc1\u4e66\u8def\u5f84 /CA/cacert.pem \u7b7e\u53d1\u6570\u5b57\u8bc1\u4e66\uff0c\u7b7e\u53d1\u8005\u4fe1\u606f \u56fd\u5bb6 = CN \u5355\u4f4d = Inc \u7ec4\u7ec7\u673a\u6784 = www.sdskills.com \u516c\u7528\u540d = Skill Global Root CA","title":"Rserver Task"},{"location":"ch13/tasks/#server01-task","text":"Network \u914d\u7f6e\u4e3b\u673a\u540d IP DNS \u7f51\u5173\u7b49 DNS \u5b89\u88c5 Bind \u670d\u52a1 \u5efa\u7acb sdskills.com \u57df\uff0c\u4e3a\u9664 Internet \u533a\u57df\u7684\u4e3b\u673a\u5efa\u7acb\u6b63\u53cd\u89e3\u6790 \u5f53\u51fa\u73b0\u65e0\u6cd5\u89e3\u6790\u7684\u57df\u540d\u65f6\uff0c\u5411\u57df skills.com \u7533\u8bf7\u66f4\u9ad8\u5c42\u6b21\u7684\u89e3\u6790 Web \u5b89\u88c5 Apache \u670d\u52a1 \u7531 Server01 \u63d0\u4f9b www.sdskills.com \u7f51\u7ad9 \u670d\u52a1\u4ee5\u7528\u6237 webuser \u8fd0\u884c \u7f51\u7ad9\u6587\u4ef6\u5b58\u653e\u5728 /data/share/webroot \u9875\u9762\u4e3a Shell \u811a\u672c\uff0c\u6587\u4ef6\u540d\u4e3a index.sh \u7f51\u9875\u5185\u5bb9\u4e3a Current system time is:$(date \"+%F %T %p\") \u8be5\u9875\u9762\u9700\u8981\u5458\u5de5\u8d26\u53f7\u8ba4\u8bc1\u624d\u80fd\u8bbf\u95ee \u5458\u5de5\u8d26\u53f7\u5b58\u50a8\u5728 LDAP \u4e2d\uff0c\u8d26\u53f7\u4e3a lduser001 \u7f51\u7ad9\u4f7f\u7528 HTTPS \u534f\u8bae SSL \u4f7f\u7528 RServer \u7b7e\u53d1\u7684\u8bc1\u4e66\uff0c\u9881\u53d1\u7ed9\uff1a","title":"Server01 Task"},{"location":"ch5/mount/","text":"\u6302\u8f7d\u70b9 \u5728 Debian \u8fd9\u7c7b\u7684 Unix-like \u7cfb\u7edf\u91cc\uff0c\u6587\u4ef6\u4ee5\u6811\u72b6\u7684\u6587\u4ef6\u5939\u9636\u5c42\u7ec4\u7ec7\u3002 / \u6587\u4ef6\u5939\u79f0\u4e3a \u201c\u6839\u6587\u4ef6\u5939\u201d\uff1b\u5176\u4ed6\u7684\u6587\u4ef6\u5939\u90fd\u662f\u6b64\u6839\u6587\u4ef6\u5939\u7684\u5b50\u6587\u4ef6\u5939\u3002\u201c\u6302\u8f7d\u201d \u662f\u628a\u5468\u8fb9\u8bbe\u5907 (\u901a\u5e38\u662f\u78c1\u76d8) \u7eb3\u5165\u7cfb\u7edf\u6587\u4ef6\u6811\u7684\u5de5\u4f5c\u3002\u4f8b\u5982\u4ee5\u5176\u4ed6\u78c1\u76d8\u4fdd\u5b58\u7528\u6237\u4e2a\u4eba\u7684\u6570\u636e\uff0c\u5c06 \u201c\u6302\u8f7d\u201d \u4e8e /home/ \u6587\u4ef6\u5939\u3002\u6839\u6587\u4ef6\u7cfb\u7edf\u7531\u7cfb\u7edf\u5185\u6838\u6c38\u8fdc\u6302\u8f7d\u4e8e\u6839\uff1b\u5176\u4ed6\u8bbe\u5907\u53ef\u5219\u7a0d\u540e\u518d\u901a\u8fc7\u542f\u52a8\u987a\u5e8f\u6216\u4ee5 mount \u547d\u4ee4\u6302\u8f7d\u8fdb\u6765\u3002 \u4e00\u4e9b\u53ef\u79fb\u52a8\u5f0f\u8bbe\u5907 ( \u5982 U \u76d8\uff0c\u79fb\u52a8\u786c\u76d8\u7b49 )\uff0c\u4f1a\u5728\u8fde\u63a5\u4e0a\u65f6\u88ab\u81ea\u52a8\u6302\u8f7d\uff0c\u5c24\u5176\u662f\u5f53\u4f7f\u7528 GNOME \u4e00\u7c7b\u7684\u684c\u9762\u73af\u5883\u65f6\uff0c\u5176\u4ed6\u60c5\u51b5\u4e0b\u5219\u9700\u8981\u7528\u6237\u624b\u52a8\u6302\u8f7d\u3002\u540c\u6837\uff0c\u65e2\u7136\u5b58\u5728\u6302\u8f7d\uff0c\u4e5f\u5c31\u5b58\u5728\u5378\u8f7d ( \u4ece\u6587\u4ef6\u6811\u4e2d\u79fb\u9664 )\uff0c\u666e\u901a\u7528\u6237\u901a\u5e38\u6ca1\u6709\u6267\u884c mount \u548c umount \u547d\u4ee4\u7684\u6743\u9650\uff0c\u7ba1\u7406\u5458\u7528\u6237\u624d\u53ef\u4ee5\u3002\u4f46\u662f\u5728 /etc/fstab \u4e2d\u53ef\u4ee5\u901a\u8fc7 user \u9009\u9879\u6307\u5b9a\u5177\u4f53\u7684\u67d0\u4e2a\u6302\u8f7d\u70b9\u5177\u6709\u64cd\u4f5c\u6743\u9650\u3002 mount \u547d\u4ee4\u4e0d\u6307\u5b9a\u4efb\u4f55\u53c2\u6570\u4f1a\u663e\u793a\u51fa\u5f53\u524d\u7684\u6302\u8f7d\u70b9\u5217\u8868\uff0c\u5982\u8981\u53ea\u663e\u793a /etc/fstab \u6587\u4ef6\u4e2d\u5b58\u5728\u7684\u6302\u8f7d\u70b9\u5219\u4f7f\u7528 findmnt --fstab \u547d\u4ee4\u3002\u5bf9\u4e8e\u7b80\u5355\u7684\u60c5\u51b5\uff0c\u8981\u6302\u8f7d\u4e00\u4e2a\u78c1\u76d8\uff0c\u4f8b\u5982 /dev/sdc1 \u4f7f\u7528 ext3 \u6587\u4ef6\u7cfb\u7edf\uff0c\u6302\u8f7d\u5230 /mnt/tmp \u6587\u4ef6\u5939\u4e0b\uff0c\u547d\u4ee4\u4e3a: $ sudo mount -t ext3 /dev/sdc1 /mnt/tmp /etc/fstab \u6587\u4ef6\u5217\u51fa\u6240\u6709\u5f00\u673a\u81ea\u52a8\u6216\u624b\u52a8\u6302\u8f7d\u7684\u8bbe\u5907\uff0c\u6bcf\u4e2a\u6302\u8f7d\u70b9\u7531\u4e00\u5217\u6587\u672c\u8868\u8ff0\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u6587\u4ef6\u4e3a\u5b89\u88c5\u5b8c\u6210\u540e\u5b89\u88c5\u7a0b\u5e8f\u521b\u5efa\u7684 /etc/fstab \u6587\u4ef6\uff1a # /etc/fstab # /etc/fstab: static file system information. # # Use 'blkid' to print the universally unique identifier for a # device; this may be used with UUID= as a more robust way to name devices # that works even if disks are added and removed. See fstab(5). # # <file system> <mount point> <type> <options> <dump> <pass> # / was on /dev/sda2 during installation UUID=3b76a24a-0164-4a6e-8235-c76b7c92776b / ext4 errors=remount-ro 0 1 # /boot/efi was on /dev/sda1 during installation UUID=2079-B588 /boot/efi vfat umask=0077 0 1 # swap was on /dev/sda3 during installation UUID=2d2332fb-19bd-4313-8329-0d17ad4e2612 none swap sw 0 0 /dev/sr0 /media/cdrom0 udf,iso9660 user,noauto 0 0 \u683c\u5f0f\u5982\u4e0b\uff1a \u5b57\u6bb5 \u8bf4\u660e \u8bbe\u5907 \u8fd9\u4e2a\u5b57\u6bb5\u6307\u5b9a\u8981\u88ab\u6302\u8f7d\u7684\u8bbe\u5907\u540d\uff0c\u4ed6\u53ef\u4ee5\u662f\u4e00\u4e2a\u672c\u5730\u8bbe\u5907\uff0c\u6216\u8005\u4e00\u4e2a\u8fdc\u7a0b\u6587\u4ef6\u7cfb\u7edf (\u5982 NFS ) \u6b64\u5b57\u6bb5\u53ef\u4ee5\u4f7f\u7528\u8bbe\u5907\u7684 ID \u53d6\u4ee3 ( \u4f7f\u7528 blkid device \u547d\u4ee4\u67e5\u770b ) \u6302\u8f7d\u70b9 \u8fd9\u4e2a\u5b57\u6bb5\u4ee3\u8868\u5c06\u8bbe\u5907\u6302\u8f7d\u5230\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u4f4d\u7f6e \u7c7b\u578b \u6307\u5b9a\u8981\u6302\u8f7d\u8bbe\u5907\u4f7f\u7528\u7684\u6587\u4ef6\u7cfb\u7edf \u5982 ext4 \u3001 vfat \u3001 ntfs \u7b49 swap \u6307\u5b9a\u8bbe\u5907\u4e3a\u4ea4\u6362\u5206\u533a\uff0c auto \u4ee3\u8868\u8ba9 mount \u7a0b\u5e8f\u81ea\u884c\u68c0\u6d4b \u9009\u9879 \u4f9d\u6587\u4ef6\u7cfb\u7edf\u4e0d\u540c\u4e5f\u5b58\u5728\u4e0d\u540c\u7684\u9009\u9879\uff0c\u53ef\u53c2\u7167 mount \u624b\u518c\u3002\u53ef\u4ee5\u6307\u5b9a\u4e3a default dump \u8fd9\u4e00\u4f4d\u7edd\u5927\u591a\u6570\u60c5\u51b5\u90fd\u8bbe\u7f6e\u4e3a 0,\u4ed6\u914d\u5408 dump \u5de5\u5177\u4f7f\u7528 pass \u8fd9\u4e00\u4f4d\u6307\u5b9a\u662f\u5426\u9700\u8981\u5f00\u673a\u65f6\u8fdb\u884c\u68c0\u6d4b\uff0c\u901a\u5e38\u8bbe\u5b9a\u4e3a 0 \u8868\u793a\u4e0d\u68c0\u6d4b\uff0c\u6839\u76ee\u5f55\u4e00\u5b9a\u8981\u8bbe\u7f6e\u4e3a 1 \uff0c\u5176\u4ed6\u9700\u8981\u68c0\u6d4b\u7684\u8bbe\u7f6e\u4e3a 2 \u6309\u7167\u9700\u6c42\u5c06\u8bbe\u5907\u586b\u5165 /etc/fstab \u5373\u53ef\u5b9e\u73b0\u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u3002","title":"\u6302\u8f7d\u70b9"},{"location":"ch5/mount/#_1","text":"\u5728 Debian \u8fd9\u7c7b\u7684 Unix-like \u7cfb\u7edf\u91cc\uff0c\u6587\u4ef6\u4ee5\u6811\u72b6\u7684\u6587\u4ef6\u5939\u9636\u5c42\u7ec4\u7ec7\u3002 / \u6587\u4ef6\u5939\u79f0\u4e3a \u201c\u6839\u6587\u4ef6\u5939\u201d\uff1b\u5176\u4ed6\u7684\u6587\u4ef6\u5939\u90fd\u662f\u6b64\u6839\u6587\u4ef6\u5939\u7684\u5b50\u6587\u4ef6\u5939\u3002\u201c\u6302\u8f7d\u201d \u662f\u628a\u5468\u8fb9\u8bbe\u5907 (\u901a\u5e38\u662f\u78c1\u76d8) \u7eb3\u5165\u7cfb\u7edf\u6587\u4ef6\u6811\u7684\u5de5\u4f5c\u3002\u4f8b\u5982\u4ee5\u5176\u4ed6\u78c1\u76d8\u4fdd\u5b58\u7528\u6237\u4e2a\u4eba\u7684\u6570\u636e\uff0c\u5c06 \u201c\u6302\u8f7d\u201d \u4e8e /home/ \u6587\u4ef6\u5939\u3002\u6839\u6587\u4ef6\u7cfb\u7edf\u7531\u7cfb\u7edf\u5185\u6838\u6c38\u8fdc\u6302\u8f7d\u4e8e\u6839\uff1b\u5176\u4ed6\u8bbe\u5907\u53ef\u5219\u7a0d\u540e\u518d\u901a\u8fc7\u542f\u52a8\u987a\u5e8f\u6216\u4ee5 mount \u547d\u4ee4\u6302\u8f7d\u8fdb\u6765\u3002 \u4e00\u4e9b\u53ef\u79fb\u52a8\u5f0f\u8bbe\u5907 ( \u5982 U \u76d8\uff0c\u79fb\u52a8\u786c\u76d8\u7b49 )\uff0c\u4f1a\u5728\u8fde\u63a5\u4e0a\u65f6\u88ab\u81ea\u52a8\u6302\u8f7d\uff0c\u5c24\u5176\u662f\u5f53\u4f7f\u7528 GNOME \u4e00\u7c7b\u7684\u684c\u9762\u73af\u5883\u65f6\uff0c\u5176\u4ed6\u60c5\u51b5\u4e0b\u5219\u9700\u8981\u7528\u6237\u624b\u52a8\u6302\u8f7d\u3002\u540c\u6837\uff0c\u65e2\u7136\u5b58\u5728\u6302\u8f7d\uff0c\u4e5f\u5c31\u5b58\u5728\u5378\u8f7d ( \u4ece\u6587\u4ef6\u6811\u4e2d\u79fb\u9664 )\uff0c\u666e\u901a\u7528\u6237\u901a\u5e38\u6ca1\u6709\u6267\u884c mount \u548c umount \u547d\u4ee4\u7684\u6743\u9650\uff0c\u7ba1\u7406\u5458\u7528\u6237\u624d\u53ef\u4ee5\u3002\u4f46\u662f\u5728 /etc/fstab \u4e2d\u53ef\u4ee5\u901a\u8fc7 user \u9009\u9879\u6307\u5b9a\u5177\u4f53\u7684\u67d0\u4e2a\u6302\u8f7d\u70b9\u5177\u6709\u64cd\u4f5c\u6743\u9650\u3002 mount \u547d\u4ee4\u4e0d\u6307\u5b9a\u4efb\u4f55\u53c2\u6570\u4f1a\u663e\u793a\u51fa\u5f53\u524d\u7684\u6302\u8f7d\u70b9\u5217\u8868\uff0c\u5982\u8981\u53ea\u663e\u793a /etc/fstab \u6587\u4ef6\u4e2d\u5b58\u5728\u7684\u6302\u8f7d\u70b9\u5219\u4f7f\u7528 findmnt --fstab \u547d\u4ee4\u3002\u5bf9\u4e8e\u7b80\u5355\u7684\u60c5\u51b5\uff0c\u8981\u6302\u8f7d\u4e00\u4e2a\u78c1\u76d8\uff0c\u4f8b\u5982 /dev/sdc1 \u4f7f\u7528 ext3 \u6587\u4ef6\u7cfb\u7edf\uff0c\u6302\u8f7d\u5230 /mnt/tmp \u6587\u4ef6\u5939\u4e0b\uff0c\u547d\u4ee4\u4e3a: $ sudo mount -t ext3 /dev/sdc1 /mnt/tmp /etc/fstab \u6587\u4ef6\u5217\u51fa\u6240\u6709\u5f00\u673a\u81ea\u52a8\u6216\u624b\u52a8\u6302\u8f7d\u7684\u8bbe\u5907\uff0c\u6bcf\u4e2a\u6302\u8f7d\u70b9\u7531\u4e00\u5217\u6587\u672c\u8868\u8ff0\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u6587\u4ef6\u4e3a\u5b89\u88c5\u5b8c\u6210\u540e\u5b89\u88c5\u7a0b\u5e8f\u521b\u5efa\u7684 /etc/fstab \u6587\u4ef6\uff1a # /etc/fstab # /etc/fstab: static file system information. # # Use 'blkid' to print the universally unique identifier for a # device; this may be used with UUID= as a more robust way to name devices # that works even if disks are added and removed. See fstab(5). # # <file system> <mount point> <type> <options> <dump> <pass> # / was on /dev/sda2 during installation UUID=3b76a24a-0164-4a6e-8235-c76b7c92776b / ext4 errors=remount-ro 0 1 # /boot/efi was on /dev/sda1 during installation UUID=2079-B588 /boot/efi vfat umask=0077 0 1 # swap was on /dev/sda3 during installation UUID=2d2332fb-19bd-4313-8329-0d17ad4e2612 none swap sw 0 0 /dev/sr0 /media/cdrom0 udf,iso9660 user,noauto 0 0 \u683c\u5f0f\u5982\u4e0b\uff1a \u5b57\u6bb5 \u8bf4\u660e \u8bbe\u5907 \u8fd9\u4e2a\u5b57\u6bb5\u6307\u5b9a\u8981\u88ab\u6302\u8f7d\u7684\u8bbe\u5907\u540d\uff0c\u4ed6\u53ef\u4ee5\u662f\u4e00\u4e2a\u672c\u5730\u8bbe\u5907\uff0c\u6216\u8005\u4e00\u4e2a\u8fdc\u7a0b\u6587\u4ef6\u7cfb\u7edf (\u5982 NFS ) \u6b64\u5b57\u6bb5\u53ef\u4ee5\u4f7f\u7528\u8bbe\u5907\u7684 ID \u53d6\u4ee3 ( \u4f7f\u7528 blkid device \u547d\u4ee4\u67e5\u770b ) \u6302\u8f7d\u70b9 \u8fd9\u4e2a\u5b57\u6bb5\u4ee3\u8868\u5c06\u8bbe\u5907\u6302\u8f7d\u5230\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7684\u4f4d\u7f6e \u7c7b\u578b \u6307\u5b9a\u8981\u6302\u8f7d\u8bbe\u5907\u4f7f\u7528\u7684\u6587\u4ef6\u7cfb\u7edf \u5982 ext4 \u3001 vfat \u3001 ntfs \u7b49 swap \u6307\u5b9a\u8bbe\u5907\u4e3a\u4ea4\u6362\u5206\u533a\uff0c auto \u4ee3\u8868\u8ba9 mount \u7a0b\u5e8f\u81ea\u884c\u68c0\u6d4b \u9009\u9879 \u4f9d\u6587\u4ef6\u7cfb\u7edf\u4e0d\u540c\u4e5f\u5b58\u5728\u4e0d\u540c\u7684\u9009\u9879\uff0c\u53ef\u53c2\u7167 mount \u624b\u518c\u3002\u53ef\u4ee5\u6307\u5b9a\u4e3a default dump \u8fd9\u4e00\u4f4d\u7edd\u5927\u591a\u6570\u60c5\u51b5\u90fd\u8bbe\u7f6e\u4e3a 0,\u4ed6\u914d\u5408 dump \u5de5\u5177\u4f7f\u7528 pass \u8fd9\u4e00\u4f4d\u6307\u5b9a\u662f\u5426\u9700\u8981\u5f00\u673a\u65f6\u8fdb\u884c\u68c0\u6d4b\uff0c\u901a\u5e38\u8bbe\u5b9a\u4e3a 0 \u8868\u793a\u4e0d\u68c0\u6d4b\uff0c\u6839\u76ee\u5f55\u4e00\u5b9a\u8981\u8bbe\u7f6e\u4e3a 1 \uff0c\u5176\u4ed6\u9700\u8981\u68c0\u6d4b\u7684\u8bbe\u7f6e\u4e3a 2 \u6309\u7167\u9700\u6c42\u5c06\u8bbe\u5907\u586b\u5165 /etc/fstab \u5373\u53ef\u5b9e\u73b0\u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u3002","title":"\u6302\u8f7d\u70b9"},{"location":"ch5/network/","text":"\u7f51\u7edc \u4f7f\u7528\u6700\u5c0f\u5b89\u88c5 ( \u672a\u5b89\u88c5 GUI \u60c5\u51b5\u4e0b ) \u7684 Debian \u5c06\u4f7f\u7528 ifupdown \u7f51\u7edc\u7ba1\u7406\u5668\u3002 \u800c\u5b89\u88c5 GUI \u7684\u60c5\u51b5\u4e0b\u5219\u4f1a\u5b89\u88c5 NetworkManager \u5373\u4fbf\u662f\u4f7f\u7528\u6700\u5c0f\u65b9\u5f0f\u5b89\u88c5\u7684 Debian\uff0c\u4e5f\u53ef\u914d\u7f6e\u4f7f\u7528 NetworkManager \u6765\u7ba1\u7406\u7f51\u7edc\u3002 ifupdown \u7f51\u7edc\u7ba1\u7406\u5668 ifupdown \u7f51\u7edc\u7ba1\u7406\u5668\u662f\u4e00\u76f4\u4ee5\u6765 Debian \u9ed8\u8ba4\u4f7f\u7528\u7684\u7f51\u7edc\u7ba1\u7406\u5668\u3002 \u4e0e\u65e9\u671f\u7248\u672c\u7684 Red Hat \u53d1\u884c\u7248\u7c7b\u4f3c\uff0c ifupdown \u628a\u7f51\u7edc\u914d\u7f6e\u5199\u5728\u4e00\u4e2a\u6587\u4ef6\u5185\uff0c\u5e76\u4ece\u6587\u4ef6\u5185\u52a0\u8f7d\u914d\u7f6e\u3002 \u4f46\u4e0e Red Hat \u7cfb\u53d1\u884c\u7248\u4e0d\u540c\u7684\u662f\uff0cRed Hat \u53d1\u884c\u7248\u5c06\u7f51\u5361\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u5728 /etc/sysconfig/network-scripts/ifcfg-*name* \u6587\u4ef6\u4e2d\uff0c\u800c Debian \u5c06\u7f51\u7edc\u914d\u7f6e\u6587\u4ef6\u7edf\u4e00\u5199\u5728 /etc/network/interfaces \u6587\u4ef6\u4e2d\uff0c\u5e76\u4e14\u8bed\u6cd5\u4e5f\u6709\u6240\u4e0d\u540c\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728\u4e00\u4e2a\u65b0\u5b89\u88c5\u7684 Debian \u4e2d\uff0c\u7f51\u7edc\u662f\u8fd9\u6837\u914d\u7f6e\u7684\uff0c\u4f46 Debian \u7ed9\u51fa\u7684\u6700\u4f73\u5b9e\u73b0\u662f\u5c06\u7f51\u7edc\u914d\u7f6e\u5206\u7f51\u5361\u4fdd\u5b58\u5230 /etc/network/interface.d/ \u4e0b\u3002 \u5728\u6211\u7684\u5b89\u88c5\u597d\u7684\u7cfb\u7edf\u4e2d\uff0c\u7f51\u5361\u9ed8\u8ba4\u914d\u7f6e\u4e3a DHCP \u65b9\u5f0f\u83b7\u53d6 IP \u5730\u5740\uff0c /etc/network/interfaces \u5185\u5bb9\u5982\u4e0b\uff1a # /etc/network/interfaces # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). source /etc/network/interfaces.d/* # The loopback network interface auto lo iface lo inet loopback # The primary network interface allow-hotplug ens33 iface ens33 inet dhcp \u5f53\u4e0b\uff0c\u4f7f\u7528 systemd \u7684\u7cfb\u7edf\u9ed8\u8ba4\u4f1a\u4f7f\u7528 biosdevname \u65b9\u6848\u6765\u5bf9\u7f51\u5361\u547d\u540d\uff0c\u4ed6\u7684\u597d\u5904\u662f\u7f51\u5361\u540d\u4e0d\u4f1a\u56e0\u91cd\u542f\u6216\u66f4\u6362\u7269\u7406\u786c\u4ef6\u7b49\u5176\u4ed6\u60c5\u51b5\u800c\u6539\u53d8\uff0c\u4f46\u7ed3\u679c\u4f1a\u5bfc\u81f4\u7f51\u5361\u540d\u4e0d\u518d\u50cf\u8fc7\u53bb\u90a3\u79cd eth0 \u4e00\u7c7b\u7684\u540d\u5b57\u6613\u4e8e\u63a8\u65ad\u3002 \u56e0\u6b64\u914d\u7f6e\u7f51\u5361\u524d\uff0c\u53ef\u80fd\u6211\u4eec\u9700\u8981\u4f7f\u7528 ip addr \u547d\u4ee4 ( \u6765\u81ea iproute2 \u5de5\u5177\u5305 ), \u5728\u6211\u7684\u4f8b\u5b50\u4e2d\uff0c\u8fd0\u884c\u5982\u4e0b\uff1a root@debian:~# ip addr 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:f7:01:7f brd ff:ff:ff:ff:ff:ff inet 192.168.28.128/24 brd 192.168.28.255 scope global dynamic ens33 valid_lft 1498sec preferred_lft 1498sec inet6 fe80::20c:29ff:fef7:17f/64 scope link valid_lft forever preferred_lft forever \u5982\u6b64\u53ef\u89c1\uff0c\u672c\u4f8b\u7684\u7f51\u5361\u540d\u4e3a ens33 \u3002 \u5728\u4e3b\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6216\u5728 /etc/network/interface.d/ \u4e2d\uff0c\u521b\u5efa\u914d\u7f6e\u6587\u4ef6 ( \u6587\u4ef6\u540d\u4e0d\u9650 )\uff0c\u5bf9\u7f51\u5361\u8fdb\u884c\u914d\u7f6e\u3002 \u5982\u9700\u8981 DHCP\uff0c\u5199\u4f5c\u5982\u4e0b\uff1a # /etc/network/interface.d/ens33 auto ens33 iface ens33 inet dhcp \u5982\u914d\u7f6e\u9759\u6001 IPv4 \u5730\u5740\uff0c\u5219\u5199\u4f5c\u5982\u4e0b\uff1a # /etc/network/interface.d/ens33 auto ens33 iface ens33 inet static address 192.168.0.3/24 # IP/CIDR \u5f62\u5f0f\u7684 IP \u5730\u5740 gateway 192.168.0.1 # \u7f51\u5173\u5730\u5740 DNS \u4fe1\u606f\u586b\u5165 /etc/resolv.conf # /etc/resolv.conf nameserver 114.114.114.114 \u91cd\u542f\u7f51\u5361\u751f\u6548 $ # \u91cd\u542f\u7f51\u5361 # ifdown ens33 # ifup ens33 \u6587\u6863\uff1a man interface(5) NetworkManager NetworkManager \u662f\u4e00\u4e2a\u7531 GNOME \u9879\u76ee\u5f00\u53d1\u7684\uff0c\u4f7f\u5f97 Linux \u7684\u7f51\u7edc\u914d\u7f6e\u5c3d\u53ef\u80fd\u7b80\u5355\uff0c\u5f00\u7bb1\u5373\u7528\u800c\u5f00\u53d1\u7684\u8f6f\u4ef6\u5305\u3002 \u76ee\u524d Red Hat \u53d1\u884c\u7248\u5df2\u7ecf\u81ea\u5e26\u5e76\u9ed8\u8ba4\u4f7f\u7528 NetworkManager \u6765\u7ba1\u7406\u7f51\u7edc\u3002 \u5982\u4f55\u67e5\u770b\u5f53\u524d\u7684 Debian \u5b89\u88c5\u662f\u5426\u4f7f\u7528 NetworkManager\uff1f \u4f7f\u7528 nmcli \u6216 nmtui \u547d\u4ee4\uff0c\u5982\u679c\u8fd0\u884c\u4e86 NetworkManager \u7684\u7ba1\u7406\u5de5\u5177\uff0c\u5219\u5f53\u524d\u7cfb\u7edf\u53ef\u80fd\u5728\u4f7f\u7528 NetworkManager \u7ba1\u7406\u7f51\u7edc \u4f7f\u7528 systemctl status network-manager \u67e5\u770b\u670d\u52a1\u72b6\u6001\uff0c\u5982\u679c\u5177\u6709\u8be5\u670d\u52a1\uff0c\u5e76\u4e14\u670d\u52a1\u6b63\u5728\u8fd0\u884c\uff0c\u5219\u8bf4\u660e\u5f53\u524d\u7cfb\u7edf\u6b63\u5728\u4f7f\u7528 NetworkManager \u7ba1\u7406\u7f51\u7edc NetworkManager \u4e0e\u4f20\u7edf\u7684 network \u7f51\u7edc\u7ba1\u7406\u5668\u4e0d\u53ef\u540c\u65f6\u4f7f\u7528\uff0c\u5982\u679c\u4f7f\u7528\u4e24\u8005\u540c\u65f6\u7ba1\u7406\u540c\u4e00\u7f51\u5361\u4f1a\u9020\u6210\u51b2\u7a81\u3002 \u5b89\u88c5 \u6700\u5c0f\u5316\u5b89\u88c5\u7684 Debian \u4e0d\u4f1a\u5b89\u88c5 NetworkManager\uff0c\u82e5\u8981\u4f7f\u7528 NetworkManager\uff0c\u9700\u8981\u5b89\u88c5\u8f6f\u4ef6\u5305\u3002 # apt install network-manager \u5c4f\u5e55\u8f93\u51fa root@debian:~# apt install network-manager Reading package lists... Done Building dependency tree Reading state information... Done The following additional packages will be installed: crda dns-root-data dnsmasq-base iw libbluetooth3 libgudev-1.0-0 libjansson4 libjim0.77 libmbim-glib4 libmbim-proxy libmm-glib0 libndp0 libnl-3-200 libnl-genl-3-200 libnl-route-3-200 libnm0 libpcap0.8 libpcsclite1 libpolkit-agent-1-0 libpolkit-backend-1-0 libpolkit-gobject-1-0 libqmi-glib5 libqmi-proxy libteamdctl0 modemmanager policykit-1 ppp usb-modeswitch usb-modeswitch-data wireless-regdb wpasupplicant Suggested packages: pcscd libteam-utils comgt wvdial wpagui libengine-pkcs11-openssl The following NEW packages will be installed: crda dns-root-data dnsmasq-base iw libbluetooth3 libgudev-1.0-0 libjansson4 libjim0.77 libmbim-glib4 libmbim-proxy libmm-glib0 libndp0 libnl-3-200 libnl-genl-3-200 libnl-route-3-200 libnm0 libpcap0.8 libpcsclite1 libpolkit-agent-1-0 libpolkit-backend-1-0 libpolkit-gobject-1-0 libqmi-glib5 libqmi-proxy libteamdctl0 modemmanager network-manager policykit-1 ppp usb-modeswitch usb-modeswitch-data wireless-regdb wpasupplicant 0 upgraded, 32 newly installed, 0 to remove and 0 not upgraded. Need to get 9,152 kB of archives. After this operation, 31.4 MB of additional disk space will be used. Do you want to continue? [Y/n] y Get:1 http://mirrors.163.com/debian buster/main amd64 libbluetooth3 amd64 5.50-1.2~deb10u1 [100 kB] Get:2 http://mirrors.163.com/debian buster/main amd64 libjansson4 amd64 2.12-1 [38.0 kB] Get:3 http://mirrors.163.com/debian buster/main amd64 libmm-glib0 amd64 1.10.0-1 [942 kB] --- # \u7701\u7565\u90e8\u5206\u8f93\u51fa Setting up libqmi-proxy (1.22.0-1.2) ... Setting up network-manager (1.14.6-2+deb10u1) ... The following network interfaces were found in /etc/network/interfaces which means they are currently configured by ifupdown: - ens33 If you want to manage those interfaces with NetworkManager instead remove their configuration from /etc/network/interfaces. Created symlink /etc/systemd/system/dbus-org.freedesktop.nm-dispatcher.service \u2192 /lib/systemd/system/NetworkManager-dispatcher.service. Created symlink /etc/systemd/system/network-online.target.wants/NetworkManager-w ait-online.service \u2192 /lib/systemd/system/NetworkManager-wait-online.service. Created symlink /etc/systemd/system/multi-user.target.wants/NetworkManager.servi ce \u2192 /lib/systemd/system/NetworkManager.service. Setting up modemmanager (1.10.0-1) ... Created symlink /etc/systemd/system/dbus-org.freedesktop.ModemManager1.service \u2192 /lib/systemd/system/ModemManager.service. Created symlink /etc/systemd/system/multi-user.target.wants/ModemManager.service \u2192 /lib/systemd/system/ModemManager.service. Processing triggers for systemd (241-7~deb10u5) ... Processing triggers for man-db (2.8.5-2) ... Processing triggers for dbus (1.12.20-0+deb10u1) ... Processing triggers for libc-bin (2.28-10) ... root@debian:~# \u5b89\u88c5 NetworkManager \u540e\uff0c\u5b89\u88c5\u8fc7\u7a0b\u63d0\u793a\u5728\u539f\u6709 /etc/network/interfaces \u4e2d\u7684\u7f51\u5361\u4e0d\u4f1a\u88ab\u81ea\u52a8\u7531 NetworkManager \u914d\u7f6e\u3002 \u914d\u7f6e \u8fc1\u79fb NetworkManager \u4f1a\u5e26\u6765\u4e24\u4e2a\u65b0\u7684\u7f51\u7edc\u914d\u7f6e\u5de5\u5177\uff0c nmcli \u4e0e nmtui \u3002 \u4f46 NetworkManager \u4f1a\u8986\u76d6\u5df2\u6709\u7684\u6240\u6709\u7f51\u7edc\u914d\u7f6e\uff0c\u5305\u62ec DNS \u5728\u5185\uff0c\u56e0\u6b64\u6240\u6709\u914d\u7f6e\u8981\u4f7f\u7528 NetworkManager \u914d\u5957\u5de5\u5177\u8fdb\u884c\u3002 \u5982\u679c\u8981\u6574\u4f53\u5bf9\u7f51\u7edc\u7ba1\u7406\u5668\u8fdb\u884c\u8fc1\u79fb\uff0c\u9700\u8981\u8fdb\u884c\u4e00\u756a\u64cd\u4f5c\u3002 \u5728\u7ee7\u7eed\u4f7f\u7528\u4e4b\u524d\uff0c\u6211\u4eec\u5c06\u539f\u914d\u7f6e\u6587\u4ef6\u7684\u7f51\u5361\u914d\u7f6e\u6ce8\u91ca\u3002 # vi /etc/network/interfaces # /etc/network/interfaces # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). source /etc/network/interfaces.d/* # The loopback network interface auto lo iface lo inet loopback # The primary network interface #allow-hotplug ens33 # \u5728\u6e90\u914d\u7f6e\u524d\u52a0 # \u6ce8\u91ca #iface ens33 inet dhcp \u63a5\u4e0b\u6765\u91cd\u542f networking \u4e0e network-manager \u670d\u52a1 # systemctl restart networking # systemctl restart network-manager nmtui nmtui \u662f\u4e00\u4e2a\u56fe\u5f62\u5316\u65b9\u5f0f\u914d\u7f6e\u7f51\u7edc\u7684\u5de5\u5177\uff0c\u6613\u4e8e\u4e0a\u624b\u3002 \u5728\u7ec8\u7aef\u4e2d\u8f93\u5165 $ nmtui \u5373\u53ef\u6253\u5f00 nmtui \u5de5\u5177\u3002 \u250c\u2500\u2524 NetworkManager TUI \u251c\u2500\u2500\u2510 \u2502 \u2502 \u2502 Please select an option \u2502 \u2502 \u2502 \u2502 Edit a connection \u2502 \u2502 Activate a connection \u2502 \u2502 Set system hostname \u2502 \u2502 \u2502 \u2502 Quit \u2502 \u2502 \u2502 \u2502 <OK> \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u56db\u4e2a\u9009\u9879\u5206\u522b\u4e3a\uff1a \u7f16\u8f91\u8fde\u63a5 \u542f\u7528\u8fde\u63a5 \u8bbe\u7f6e\u7cfb\u7edf\u4e3b\u673a\u540d \u9000\u51fa \u9009\u62e9 Edit a connection \u8fdb\u5165\u7f16\u8f91 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Ethernet \u2191 \u2502 <Add> \u2502 \u2502 \u2502 ens33 \u2592 \u2502 \u2502 \u2502 \u2502 Wired connection 1 \u2592 \u2502 <Edit...> \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 <Delete> \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u25ae \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2193 \u2502 <Back> \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u8fc1\u79fb\u7f51\u7edc\u540e\uff0c\u51fa\u73b0\u4e86\u4e24\u4e2a\u914d\u7f6e\uff0c\u5b9e\u9645\u4e0a\u4ed6\u4eec\u914d\u7f6e\u7684\u662f\u4e00\u5f20\u7f51\u5361\uff0c\u53ef\u4ee5\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\u5220\u9664\u3002 \u9009\u4e2d\u4e00\u4e2a\u8fde\u63a5\u6309 Enter \u952e\u540e\uff0c\u53ef\u4ee5\u5f88\u8f7b\u677e\u7684\u4fee\u6539\u914d\u7f6e\u3002 \u4fee\u6539\u597d\u914d\u7f6e\u540e\uff0c\u56de\u5230\u7b2c\u4e00\u4e2a\u754c\u9762\uff0c\u8fdb\u5165 Activate a connection \uff0c\u9009\u62e9\u4fee\u6539\u7684\u8fde\u63a5\uff0c\u6309\u4e24\u4e0b Enter \u952e\u91cd\u65b0\u6fc0\u6d3b\u5373\u53ef\u3002 \u6269\u5c55\u9605\u8bfb\uff1a Red Hat Enterprise Linux 7 \u8054\u7f51\u6307\u5357","title":"\u7f51\u7edc"},{"location":"ch5/network/#_1","text":"\u4f7f\u7528\u6700\u5c0f\u5b89\u88c5 ( \u672a\u5b89\u88c5 GUI \u60c5\u51b5\u4e0b ) \u7684 Debian \u5c06\u4f7f\u7528 ifupdown \u7f51\u7edc\u7ba1\u7406\u5668\u3002 \u800c\u5b89\u88c5 GUI \u7684\u60c5\u51b5\u4e0b\u5219\u4f1a\u5b89\u88c5 NetworkManager \u5373\u4fbf\u662f\u4f7f\u7528\u6700\u5c0f\u65b9\u5f0f\u5b89\u88c5\u7684 Debian\uff0c\u4e5f\u53ef\u914d\u7f6e\u4f7f\u7528 NetworkManager \u6765\u7ba1\u7406\u7f51\u7edc\u3002","title":"\u7f51\u7edc"},{"location":"ch5/network/#ifupdown","text":"ifupdown \u7f51\u7edc\u7ba1\u7406\u5668\u662f\u4e00\u76f4\u4ee5\u6765 Debian \u9ed8\u8ba4\u4f7f\u7528\u7684\u7f51\u7edc\u7ba1\u7406\u5668\u3002 \u4e0e\u65e9\u671f\u7248\u672c\u7684 Red Hat \u53d1\u884c\u7248\u7c7b\u4f3c\uff0c ifupdown \u628a\u7f51\u7edc\u914d\u7f6e\u5199\u5728\u4e00\u4e2a\u6587\u4ef6\u5185\uff0c\u5e76\u4ece\u6587\u4ef6\u5185\u52a0\u8f7d\u914d\u7f6e\u3002 \u4f46\u4e0e Red Hat \u7cfb\u53d1\u884c\u7248\u4e0d\u540c\u7684\u662f\uff0cRed Hat \u53d1\u884c\u7248\u5c06\u7f51\u5361\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u5728 /etc/sysconfig/network-scripts/ifcfg-*name* \u6587\u4ef6\u4e2d\uff0c\u800c Debian \u5c06\u7f51\u7edc\u914d\u7f6e\u6587\u4ef6\u7edf\u4e00\u5199\u5728 /etc/network/interfaces \u6587\u4ef6\u4e2d\uff0c\u5e76\u4e14\u8bed\u6cd5\u4e5f\u6709\u6240\u4e0d\u540c\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728\u4e00\u4e2a\u65b0\u5b89\u88c5\u7684 Debian \u4e2d\uff0c\u7f51\u7edc\u662f\u8fd9\u6837\u914d\u7f6e\u7684\uff0c\u4f46 Debian \u7ed9\u51fa\u7684\u6700\u4f73\u5b9e\u73b0\u662f\u5c06\u7f51\u7edc\u914d\u7f6e\u5206\u7f51\u5361\u4fdd\u5b58\u5230 /etc/network/interface.d/ \u4e0b\u3002 \u5728\u6211\u7684\u5b89\u88c5\u597d\u7684\u7cfb\u7edf\u4e2d\uff0c\u7f51\u5361\u9ed8\u8ba4\u914d\u7f6e\u4e3a DHCP \u65b9\u5f0f\u83b7\u53d6 IP \u5730\u5740\uff0c /etc/network/interfaces \u5185\u5bb9\u5982\u4e0b\uff1a # /etc/network/interfaces # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). source /etc/network/interfaces.d/* # The loopback network interface auto lo iface lo inet loopback # The primary network interface allow-hotplug ens33 iface ens33 inet dhcp \u5f53\u4e0b\uff0c\u4f7f\u7528 systemd \u7684\u7cfb\u7edf\u9ed8\u8ba4\u4f1a\u4f7f\u7528 biosdevname \u65b9\u6848\u6765\u5bf9\u7f51\u5361\u547d\u540d\uff0c\u4ed6\u7684\u597d\u5904\u662f\u7f51\u5361\u540d\u4e0d\u4f1a\u56e0\u91cd\u542f\u6216\u66f4\u6362\u7269\u7406\u786c\u4ef6\u7b49\u5176\u4ed6\u60c5\u51b5\u800c\u6539\u53d8\uff0c\u4f46\u7ed3\u679c\u4f1a\u5bfc\u81f4\u7f51\u5361\u540d\u4e0d\u518d\u50cf\u8fc7\u53bb\u90a3\u79cd eth0 \u4e00\u7c7b\u7684\u540d\u5b57\u6613\u4e8e\u63a8\u65ad\u3002 \u56e0\u6b64\u914d\u7f6e\u7f51\u5361\u524d\uff0c\u53ef\u80fd\u6211\u4eec\u9700\u8981\u4f7f\u7528 ip addr \u547d\u4ee4 ( \u6765\u81ea iproute2 \u5de5\u5177\u5305 ), \u5728\u6211\u7684\u4f8b\u5b50\u4e2d\uff0c\u8fd0\u884c\u5982\u4e0b\uff1a root@debian:~# ip addr 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:f7:01:7f brd ff:ff:ff:ff:ff:ff inet 192.168.28.128/24 brd 192.168.28.255 scope global dynamic ens33 valid_lft 1498sec preferred_lft 1498sec inet6 fe80::20c:29ff:fef7:17f/64 scope link valid_lft forever preferred_lft forever \u5982\u6b64\u53ef\u89c1\uff0c\u672c\u4f8b\u7684\u7f51\u5361\u540d\u4e3a ens33 \u3002 \u5728\u4e3b\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6216\u5728 /etc/network/interface.d/ \u4e2d\uff0c\u521b\u5efa\u914d\u7f6e\u6587\u4ef6 ( \u6587\u4ef6\u540d\u4e0d\u9650 )\uff0c\u5bf9\u7f51\u5361\u8fdb\u884c\u914d\u7f6e\u3002 \u5982\u9700\u8981 DHCP\uff0c\u5199\u4f5c\u5982\u4e0b\uff1a # /etc/network/interface.d/ens33 auto ens33 iface ens33 inet dhcp \u5982\u914d\u7f6e\u9759\u6001 IPv4 \u5730\u5740\uff0c\u5219\u5199\u4f5c\u5982\u4e0b\uff1a # /etc/network/interface.d/ens33 auto ens33 iface ens33 inet static address 192.168.0.3/24 # IP/CIDR \u5f62\u5f0f\u7684 IP \u5730\u5740 gateway 192.168.0.1 # \u7f51\u5173\u5730\u5740 DNS \u4fe1\u606f\u586b\u5165 /etc/resolv.conf # /etc/resolv.conf nameserver 114.114.114.114 \u91cd\u542f\u7f51\u5361\u751f\u6548 $ # \u91cd\u542f\u7f51\u5361 # ifdown ens33 # ifup ens33 \u6587\u6863\uff1a man interface(5)","title":"ifupdown \u7f51\u7edc\u7ba1\u7406\u5668"},{"location":"ch5/network/#networkmanager","text":"NetworkManager \u662f\u4e00\u4e2a\u7531 GNOME \u9879\u76ee\u5f00\u53d1\u7684\uff0c\u4f7f\u5f97 Linux \u7684\u7f51\u7edc\u914d\u7f6e\u5c3d\u53ef\u80fd\u7b80\u5355\uff0c\u5f00\u7bb1\u5373\u7528\u800c\u5f00\u53d1\u7684\u8f6f\u4ef6\u5305\u3002 \u76ee\u524d Red Hat \u53d1\u884c\u7248\u5df2\u7ecf\u81ea\u5e26\u5e76\u9ed8\u8ba4\u4f7f\u7528 NetworkManager \u6765\u7ba1\u7406\u7f51\u7edc\u3002 \u5982\u4f55\u67e5\u770b\u5f53\u524d\u7684 Debian \u5b89\u88c5\u662f\u5426\u4f7f\u7528 NetworkManager\uff1f \u4f7f\u7528 nmcli \u6216 nmtui \u547d\u4ee4\uff0c\u5982\u679c\u8fd0\u884c\u4e86 NetworkManager \u7684\u7ba1\u7406\u5de5\u5177\uff0c\u5219\u5f53\u524d\u7cfb\u7edf\u53ef\u80fd\u5728\u4f7f\u7528 NetworkManager \u7ba1\u7406\u7f51\u7edc \u4f7f\u7528 systemctl status network-manager \u67e5\u770b\u670d\u52a1\u72b6\u6001\uff0c\u5982\u679c\u5177\u6709\u8be5\u670d\u52a1\uff0c\u5e76\u4e14\u670d\u52a1\u6b63\u5728\u8fd0\u884c\uff0c\u5219\u8bf4\u660e\u5f53\u524d\u7cfb\u7edf\u6b63\u5728\u4f7f\u7528 NetworkManager \u7ba1\u7406\u7f51\u7edc NetworkManager \u4e0e\u4f20\u7edf\u7684 network \u7f51\u7edc\u7ba1\u7406\u5668\u4e0d\u53ef\u540c\u65f6\u4f7f\u7528\uff0c\u5982\u679c\u4f7f\u7528\u4e24\u8005\u540c\u65f6\u7ba1\u7406\u540c\u4e00\u7f51\u5361\u4f1a\u9020\u6210\u51b2\u7a81\u3002","title":"NetworkManager"},{"location":"ch5/network/#_2","text":"\u6700\u5c0f\u5316\u5b89\u88c5\u7684 Debian \u4e0d\u4f1a\u5b89\u88c5 NetworkManager\uff0c\u82e5\u8981\u4f7f\u7528 NetworkManager\uff0c\u9700\u8981\u5b89\u88c5\u8f6f\u4ef6\u5305\u3002 # apt install network-manager \u5c4f\u5e55\u8f93\u51fa root@debian:~# apt install network-manager Reading package lists... Done Building dependency tree Reading state information... Done The following additional packages will be installed: crda dns-root-data dnsmasq-base iw libbluetooth3 libgudev-1.0-0 libjansson4 libjim0.77 libmbim-glib4 libmbim-proxy libmm-glib0 libndp0 libnl-3-200 libnl-genl-3-200 libnl-route-3-200 libnm0 libpcap0.8 libpcsclite1 libpolkit-agent-1-0 libpolkit-backend-1-0 libpolkit-gobject-1-0 libqmi-glib5 libqmi-proxy libteamdctl0 modemmanager policykit-1 ppp usb-modeswitch usb-modeswitch-data wireless-regdb wpasupplicant Suggested packages: pcscd libteam-utils comgt wvdial wpagui libengine-pkcs11-openssl The following NEW packages will be installed: crda dns-root-data dnsmasq-base iw libbluetooth3 libgudev-1.0-0 libjansson4 libjim0.77 libmbim-glib4 libmbim-proxy libmm-glib0 libndp0 libnl-3-200 libnl-genl-3-200 libnl-route-3-200 libnm0 libpcap0.8 libpcsclite1 libpolkit-agent-1-0 libpolkit-backend-1-0 libpolkit-gobject-1-0 libqmi-glib5 libqmi-proxy libteamdctl0 modemmanager network-manager policykit-1 ppp usb-modeswitch usb-modeswitch-data wireless-regdb wpasupplicant 0 upgraded, 32 newly installed, 0 to remove and 0 not upgraded. Need to get 9,152 kB of archives. After this operation, 31.4 MB of additional disk space will be used. Do you want to continue? [Y/n] y Get:1 http://mirrors.163.com/debian buster/main amd64 libbluetooth3 amd64 5.50-1.2~deb10u1 [100 kB] Get:2 http://mirrors.163.com/debian buster/main amd64 libjansson4 amd64 2.12-1 [38.0 kB] Get:3 http://mirrors.163.com/debian buster/main amd64 libmm-glib0 amd64 1.10.0-1 [942 kB] --- # \u7701\u7565\u90e8\u5206\u8f93\u51fa Setting up libqmi-proxy (1.22.0-1.2) ... Setting up network-manager (1.14.6-2+deb10u1) ... The following network interfaces were found in /etc/network/interfaces which means they are currently configured by ifupdown: - ens33 If you want to manage those interfaces with NetworkManager instead remove their configuration from /etc/network/interfaces. Created symlink /etc/systemd/system/dbus-org.freedesktop.nm-dispatcher.service \u2192 /lib/systemd/system/NetworkManager-dispatcher.service. Created symlink /etc/systemd/system/network-online.target.wants/NetworkManager-w ait-online.service \u2192 /lib/systemd/system/NetworkManager-wait-online.service. Created symlink /etc/systemd/system/multi-user.target.wants/NetworkManager.servi ce \u2192 /lib/systemd/system/NetworkManager.service. Setting up modemmanager (1.10.0-1) ... Created symlink /etc/systemd/system/dbus-org.freedesktop.ModemManager1.service \u2192 /lib/systemd/system/ModemManager.service. Created symlink /etc/systemd/system/multi-user.target.wants/ModemManager.service \u2192 /lib/systemd/system/ModemManager.service. Processing triggers for systemd (241-7~deb10u5) ... Processing triggers for man-db (2.8.5-2) ... Processing triggers for dbus (1.12.20-0+deb10u1) ... Processing triggers for libc-bin (2.28-10) ... root@debian:~# \u5b89\u88c5 NetworkManager \u540e\uff0c\u5b89\u88c5\u8fc7\u7a0b\u63d0\u793a\u5728\u539f\u6709 /etc/network/interfaces \u4e2d\u7684\u7f51\u5361\u4e0d\u4f1a\u88ab\u81ea\u52a8\u7531 NetworkManager \u914d\u7f6e\u3002","title":"\u5b89\u88c5"},{"location":"ch5/network/#_3","text":"","title":"\u914d\u7f6e"},{"location":"ch5/network/#_4","text":"NetworkManager \u4f1a\u5e26\u6765\u4e24\u4e2a\u65b0\u7684\u7f51\u7edc\u914d\u7f6e\u5de5\u5177\uff0c nmcli \u4e0e nmtui \u3002 \u4f46 NetworkManager \u4f1a\u8986\u76d6\u5df2\u6709\u7684\u6240\u6709\u7f51\u7edc\u914d\u7f6e\uff0c\u5305\u62ec DNS \u5728\u5185\uff0c\u56e0\u6b64\u6240\u6709\u914d\u7f6e\u8981\u4f7f\u7528 NetworkManager \u914d\u5957\u5de5\u5177\u8fdb\u884c\u3002 \u5982\u679c\u8981\u6574\u4f53\u5bf9\u7f51\u7edc\u7ba1\u7406\u5668\u8fdb\u884c\u8fc1\u79fb\uff0c\u9700\u8981\u8fdb\u884c\u4e00\u756a\u64cd\u4f5c\u3002 \u5728\u7ee7\u7eed\u4f7f\u7528\u4e4b\u524d\uff0c\u6211\u4eec\u5c06\u539f\u914d\u7f6e\u6587\u4ef6\u7684\u7f51\u5361\u914d\u7f6e\u6ce8\u91ca\u3002 # vi /etc/network/interfaces # /etc/network/interfaces # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). source /etc/network/interfaces.d/* # The loopback network interface auto lo iface lo inet loopback # The primary network interface #allow-hotplug ens33 # \u5728\u6e90\u914d\u7f6e\u524d\u52a0 # \u6ce8\u91ca #iface ens33 inet dhcp \u63a5\u4e0b\u6765\u91cd\u542f networking \u4e0e network-manager \u670d\u52a1 # systemctl restart networking # systemctl restart network-manager","title":"\u8fc1\u79fb"},{"location":"ch5/network/#nmtui","text":"nmtui \u662f\u4e00\u4e2a\u56fe\u5f62\u5316\u65b9\u5f0f\u914d\u7f6e\u7f51\u7edc\u7684\u5de5\u5177\uff0c\u6613\u4e8e\u4e0a\u624b\u3002 \u5728\u7ec8\u7aef\u4e2d\u8f93\u5165 $ nmtui \u5373\u53ef\u6253\u5f00 nmtui \u5de5\u5177\u3002 \u250c\u2500\u2524 NetworkManager TUI \u251c\u2500\u2500\u2510 \u2502 \u2502 \u2502 Please select an option \u2502 \u2502 \u2502 \u2502 Edit a connection \u2502 \u2502 Activate a connection \u2502 \u2502 Set system hostname \u2502 \u2502 \u2502 \u2502 Quit \u2502 \u2502 \u2502 \u2502 <OK> \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u56db\u4e2a\u9009\u9879\u5206\u522b\u4e3a\uff1a \u7f16\u8f91\u8fde\u63a5 \u542f\u7528\u8fde\u63a5 \u8bbe\u7f6e\u7cfb\u7edf\u4e3b\u673a\u540d \u9000\u51fa \u9009\u62e9 Edit a connection \u8fdb\u5165\u7f16\u8f91 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Ethernet \u2191 \u2502 <Add> \u2502 \u2502 \u2502 ens33 \u2592 \u2502 \u2502 \u2502 \u2502 Wired connection 1 \u2592 \u2502 <Edit...> \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 <Delete> \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u25ae \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2592 \u2502 \u2502 \u2502 \u2502 \u2193 \u2502 <Back> \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u8fc1\u79fb\u7f51\u7edc\u540e\uff0c\u51fa\u73b0\u4e86\u4e24\u4e2a\u914d\u7f6e\uff0c\u5b9e\u9645\u4e0a\u4ed6\u4eec\u914d\u7f6e\u7684\u662f\u4e00\u5f20\u7f51\u5361\uff0c\u53ef\u4ee5\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\u5220\u9664\u3002 \u9009\u4e2d\u4e00\u4e2a\u8fde\u63a5\u6309 Enter \u952e\u540e\uff0c\u53ef\u4ee5\u5f88\u8f7b\u677e\u7684\u4fee\u6539\u914d\u7f6e\u3002 \u4fee\u6539\u597d\u914d\u7f6e\u540e\uff0c\u56de\u5230\u7b2c\u4e00\u4e2a\u754c\u9762\uff0c\u8fdb\u5165 Activate a connection \uff0c\u9009\u62e9\u4fee\u6539\u7684\u8fde\u63a5\uff0c\u6309\u4e24\u4e0b Enter \u952e\u91cd\u65b0\u6fc0\u6d3b\u5373\u53ef\u3002 \u6269\u5c55\u9605\u8bfb\uff1a Red Hat Enterprise Linux 7 \u8054\u7f51\u6307\u5357","title":"nmtui"},{"location":"ch5/ntp/","text":"\u65f6\u95f4\u540c\u6b65 \u5728\u914d\u7f6e\u96c6\u7fa4\u7b49\u670d\u52a1\u65f6\uff0c\u9700\u8981\u4fdd\u6301\u591a\u53f0\u4e3b\u673a\u7684\u65f6\u95f4\u7edf\u4e00\u3002 \u672c\u6587\u4e0d\u6d89\u53ca\u914d\u7f6e NTP \u670d\u52a1\u5668\u5bf9\u5916\u670d\u52a1\uff0c\u800c\u662f\u5982\u4f55\u914d\u7f6e NTP \u5ba2\u6237\u7aef\u3002 \u5bf9\u4e8e\u7b80\u5355\u7684\u65f6\u95f4\u540c\u6b65\uff0c systemd \u81ea\u5e26\u7684 NTP \u5ba2\u6237\u7aef\u5c31\u8db3\u4ee5\u6ee1\u8db3\u8981\u6c42\uff0c\u4f46\u5982\u679c\u6709\u591a\u4e00\u70b9\u7684\u9700\u6c42 ( \u4f8b\u5982\u4f60\u9700\u8981\u8fde\u63a5\u4e00\u4e2a\u786c\u4ef6\u6765\u63d0\u4f9b\u65f6\u949f ) \uff0c\u5219\u9700\u8981\u5b89\u88c5 ntpd \u6216 chrony \u670d\u52a1\u3002 systemd-timesyncd \u5f53\u7cfb\u7edf\u5b89\u88c5\u540e\uff0c\u53ea\u8981\u5b89\u88c5\u65f6\u7f51\u7edc\u7545\u901a\uff0c\u5219 Debian \u4f1a\u81ea\u52a8\u914d\u7f6e systemd-timesyncd \u5e76\u4e0e Debian \u7684\u5b98\u65b9\u65f6\u95f4\u670d\u52a1\u5668\u540c\u6b65\u3002 \u8981\u589e\u52a0 NTP \u670d\u52a1\u5668\uff0c\u5219\u9700\u8981\u4fee\u6539 /etc/systemd/timesyncd.conf # /etc/systemd/timesyncd.conf # This file is part of systemd. # # systemd is free software; you can redistribute it and/or modify it # under the terms of the GNU Lesser General Public License as published by # the Free Software Foundation; either version 2.1 of the License, or # (at your option) any later version. # # Entries in this file show the compile time defaults. # You can change settings by editing this file. # Defaults can be restored by simply deleting this file. # # See timesyncd.conf(5) for details. [Time] #NTP= #FallbackNTP=0.debian.pool.ntp.org 1.debian.pool.ntp.org 2.debian.pool.ntp.org 3.debian.pool.ntp.org #RootDistanceMaxSec=5 #PollIntervalMinSec=32 #PollIntervalMaxSec=2048 \u6dfb\u52a0\u670d\u52a1\u5668\u9700\u8981\u53d6\u6d88 NTP= \u8fd9\u4e00\u884c\u7684\u6ce8\u91ca\uff0c\u5e76\u586b\u5165 NTP \u670d\u52a1\u5668\u5730\u5740\u3002 \u4f8b\u5982\uff1a # /etc/systemd/timesyncd.conf NTP=pool.ntp.org 0.asia.pool.ntp.org 1.asia.pool.ntp.org 2.asia.pool.ntp.org \u591a\u670d\u52a1\u5668\u95f4\u7528\u7a7a\u683c\u5206\u5272\u3002 \u4fdd\u5b58\u66f4\u6539\u540e\uff0c\u91cd\u542f systemd-timesyncd \u670d\u52a1 # systemctl restart systemd-timesyncd \u4e4b\u540e\u9a8c\u8bc1\u914d\u7f6e \u4f7f\u7528 timedatectl show-timesync --all root@debian:~# timedatectl show-timesync --all LinkNTPServers= SystemNTPServers=0.asia.pool.ntp.org 1.asia.pool.ntp.org FallbackNTPServers=0.debian.pool.ntp.org 1.debian.pool.ntp.org 2.debian.pool.ntp.org 3.debian.pool.ntp.org ServerName=0.asia.pool.ntp.org ServerAddress=139.59.15.185 RootDistanceMaxUSec=5s PollIntervalMinUSec=32s PollIntervalMaxUSec=34min 8s PollIntervalUSec=1min 4s NTPMessage={ Leap=0, Version=4, Mode=4, Stratum=4, Precision=-24, RootDelay=86.166ms, RootDispersion=14.190ms, Reference=A29FC801, OriginateTimestamp=Tue 2020-12-22 19:34:01 CST, ReceiveTimestamp=Tue 2020-12-22 19:34:02 CST, TransmitTimestamp=Tue 2020-12-22 19:34:02 CST, DestinationTimestamp=Tue 2020-12-22 19:34:02 CST, Ignored=no PacketCount=1, Jitter=0 } Frequency=7623778 NTP \u670d\u52a1\u5668\u9009\u62e9\u987a\u5e8f\u5982\u4e0b\uff1a systemd-networkd.service(8) \u4e2d\u9488\u5bf9\u6bcf\u4e2a\u63a5\u53e3\u7684\u914d\u7f6e\uff0c\u6216\u8005 DHCP \u670d\u52a1\u4f18\u5148\u3002 /etc/systemd/timesyncd.conf \u4e2d\u5b9a\u4e49\u7684 NTP\u670d\u52a1\u5668\u4f1a\u5728\u8fd0\u884c\u65f6\u88ab\u6dfb\u52a0\u5230\u9488\u5bf9\u6bcf\u4e2a\u63a5\u53e3\u7684\u670d\u52a1\u5668\u5217\u8868\u4e2d\uff0c\u5b88\u62a4\u8fdb\u7a0b\u4f1a\u8f6e\u6d41\u8fde\u63a5\u8fd9\u4e9b\u670d\u52a1\u5668\u76f4\u5230\u67d0\u4e2a\u6709\u5e94\u7b54\u3002 \u5982\u679c\u4e0a\u4e24\u6b65\u6ca1\u6709\u53d6\u5230 NTP \u670d\u52a1\u5668\uff0c \u90a3\u4e48\u5c31\u662f\u7528 FallbackNTP= \u4e2d\u5b9a\u4e49\u7684\u670d\u52a1\u5668\u3002 \u8981\u542f\u7528,\u8fd0\u884c\uff1a # timedatectl set-ntp true \u540c\u6b65\u9700\u8981\u4e00\u70b9\u65f6\u95f4\uff0c\u53ef\u80fd\u4f1a\u5361\u4f4f\u3002 \u67e5\u770b\u72b6\u6001\u4f7f\u7528\uff1a # timedatectl timesync-status ntpd \u5982\u679c\u9700\u8981\u66f4\u591a\u7684\u7279\u6027\uff0c\u6216\u9700\u8981\u540c\u65f6\u90e8\u7f72 NTP \u670d\u52a1\u5668\uff0c\u5219\u9700\u8981\u5b89\u88c5 ntpd \u8f6f\u4ef6\u5305\u3002 ntpd \u4e0e \u7cfb\u7edf\u81ea\u5e26\u7684 systemd-timesyncd \u6709\u51b2\u7a81\uff0c\u9700\u8981\u505c\u6b62\u81ea\u5e26\u670d\u52a1\u3002 systemd \u81ea\u5e26\u7684 timedatectl \u53ea\u80fd\u63a7\u5236\u7cfb\u7edf\u81ea\u5e26\u7684 systemd-timesyncd\uff0c\u5e76\u4e14\u4e24\u8005\u540c\u65f6\u4f7f\u7528\u4f1a\u56e0\u4e3a\u540c\u65f6\u5360\u7528 123/udp \u800c\u4ea7\u751f\u51b2\u7a81\uff0c\u56e0\u6b64\u4f7f\u7528 timedatectl set-ntp false \u505c\u6b62 systemd-timesyncd \u670d\u52a1\u3002 # timedatectl set-ntp false \u5b89\u88c5 ntpd \u670d\u52a1 # apt-get install ntp \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 /etc/ntp.conf \u5728 23 \u884c\u5904\u53ef\u4fee\u6539\u539f\u59cb\u670d\u52a1\u5668\u5730\u5740\u4e3a\u6240\u9700\u7684\u670d\u52a1\u5668\u5730\u5740\uff1a # /etc/ntp.conf # pool.ntp.org maps to about 1000 low-stratum NTP servers. Your server will # pick a different set every time it starts up. Please consider joining the # pool: <http://www.pool.ntp.org/join.html> pool 0.debian.pool.ntp.org iburst pool 1.debian.pool.ntp.org iburst pool 2.debian.pool.ntp.org iburst pool 3.debian.pool.ntp.org iburst \u4f8b\u5982\u4fee\u6539\u4e3a\uff1a # /etc/ntp.conf server ntp1.aliyun.com server ntp2.aliyun.com \u91cd\u542f\u670d\u52a1\u751f\u6548\uff1a # systemctl restart ntpd \u4f7f\u7528 ntpq -p \u67e5\u770b\u540c\u6b65\u72b6\u6001 root@debian:~# ntpq -p remote refid st t when poll reach delay offset jitter ============================================================================== 0.debian.pool.n .POOL. 16 p - 64 0 0.000 0.000 0.000 1.debian.pool.n .POOL. 16 p - 64 0 0.000 0.000 0.000 2.debian.pool.n .POOL. 16 p - 64 0 0.000 0.000 0.000 3.debian.pool.n .POOL. 16 p - 64 0 0.000 0.000 0.000 -tick.ntp.infoma .GPS. 1 u 146 128 176 225.512 -11.584 0.508 +203.107.6.88 100.107.25.114 2 u 12 64 377 29.612 -9.788 0.910 +119.28.183.184 100.122.36.196 2 u 17 64 337 66.883 -8.777 1.218 *202.118.1.130 .PTP. 1 u 77 64 376 44.633 9.074 0.494 -119.28.206.193 100.122.36.4 2 u 73 128 277 69.470 -8.139 5.240 delay, offset \u548c jitter \u4e0d\u5e94\u8be5\u4e3a\u96f6\uff0cntpd \u540c\u6b65\u7684\u670d\u52a1\u5668\u524d\u6709\u661f\u53f7\uff0cntpd \u53ef\u80fd\u7b49\u5f85\u51e0\u5206\u949f\u540e\u624d\u4f1a\u8fdb\u884c\u540c\u6b65 chrony chrony \u4e3a\u65b0\u4e00\u4ee3\u7684 NTP \u5b88\u62a4\u8fdb\u7a0b\u5b9e\u73b0\uff0c\u914d\u7f6e\u6bd4\u8d77 ntpd \u6765\u8bf4\u66f4\u52a0\u7b80\u5355\uff0c chrony \u76ee\u524d\u4e3a Red Hat \u63a8\u8350\u4f7f\u7528\u7684 NTP \u5b88\u62a4\u8fdb\u7a0b \u5bf9\u4e8e Debian\uff0c\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u5728 /etc/chrony/chrony.conf \u53ea\u9700\u5728\u914d\u7f6e\u6587\u4ef6\u91cc\u5199\u5165 server pool.ntp.org iburst \u5176\u4e2d pool.ntp.org \u66ff\u6362\u4e3a\u8981\u540c\u6b65\u4f7f\u7528\u7684\u670d\u52a1\u5668 IP \u6216\u57df\u540d \u67e5\u770b\u5f53\u524d\u65f6\u95f4\u670d\u52a1\u5668\u4f7f\u7528 chronyc sources \u6b63\u5e38\u60c5\u51b5\u4e0b Chrony \u4f1a\u6b65\u8fdb\u540c\u6b65\u65f6\u949f\uff0c\u5176\u4e0e ntpd \u7684\u5de5\u4f5c\u65b9\u5f0f\u5f88\u4e0d\u76f8\u540c\uff0c\u5e76\u6ca1\u6709\u4e00\u4e2a\u771f\u6b63\u610f\u4e49\u4e0a\u4e0e ntpdate \u547d\u4ee4\u4f5c\u7528\u7c7b\u4f3c\u7684\u5f3a\u5236\u540c\u6b65\u65b9\u5f0f \u4f46\u5982\u679c\u9700\u8981\u7684\u8bdd\uff0c\u4f7f\u7528 chronyc -a makestep \u5f3a\u5236\u6b65\u8fdb\u540c\u6b65\u3002 \u5982\u679c chronyd \u6ca1\u6709\u8fd0\u884c\uff0c\u6b63\u5982 ntpdate \u4f7f\u7528\u7684\u90a3\u79cd\u60c5\u51b5\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 chronyd -q 'server pool.ntp.org iburst' \u624b\u5de5\u540c\u6b65\u65f6\u95f4\u3002 \u53c2\u8003\u8d44\u6599\uff1a ArchWiki:Network Time Protocol daemon (\u7b80\u4f53\u4e2d\u6587) Red Hat Documentation:CONFIGURING NTP USING THE CHRONY SUITE","title":"\u65f6\u95f4\u540c\u6b65"},{"location":"ch5/ntp/#_1","text":"\u5728\u914d\u7f6e\u96c6\u7fa4\u7b49\u670d\u52a1\u65f6\uff0c\u9700\u8981\u4fdd\u6301\u591a\u53f0\u4e3b\u673a\u7684\u65f6\u95f4\u7edf\u4e00\u3002 \u672c\u6587\u4e0d\u6d89\u53ca\u914d\u7f6e NTP \u670d\u52a1\u5668\u5bf9\u5916\u670d\u52a1\uff0c\u800c\u662f\u5982\u4f55\u914d\u7f6e NTP \u5ba2\u6237\u7aef\u3002 \u5bf9\u4e8e\u7b80\u5355\u7684\u65f6\u95f4\u540c\u6b65\uff0c systemd \u81ea\u5e26\u7684 NTP \u5ba2\u6237\u7aef\u5c31\u8db3\u4ee5\u6ee1\u8db3\u8981\u6c42\uff0c\u4f46\u5982\u679c\u6709\u591a\u4e00\u70b9\u7684\u9700\u6c42 ( \u4f8b\u5982\u4f60\u9700\u8981\u8fde\u63a5\u4e00\u4e2a\u786c\u4ef6\u6765\u63d0\u4f9b\u65f6\u949f ) \uff0c\u5219\u9700\u8981\u5b89\u88c5 ntpd \u6216 chrony \u670d\u52a1\u3002","title":"\u65f6\u95f4\u540c\u6b65"},{"location":"ch5/ntp/#systemd-timesyncd","text":"\u5f53\u7cfb\u7edf\u5b89\u88c5\u540e\uff0c\u53ea\u8981\u5b89\u88c5\u65f6\u7f51\u7edc\u7545\u901a\uff0c\u5219 Debian \u4f1a\u81ea\u52a8\u914d\u7f6e systemd-timesyncd \u5e76\u4e0e Debian \u7684\u5b98\u65b9\u65f6\u95f4\u670d\u52a1\u5668\u540c\u6b65\u3002 \u8981\u589e\u52a0 NTP \u670d\u52a1\u5668\uff0c\u5219\u9700\u8981\u4fee\u6539 /etc/systemd/timesyncd.conf # /etc/systemd/timesyncd.conf # This file is part of systemd. # # systemd is free software; you can redistribute it and/or modify it # under the terms of the GNU Lesser General Public License as published by # the Free Software Foundation; either version 2.1 of the License, or # (at your option) any later version. # # Entries in this file show the compile time defaults. # You can change settings by editing this file. # Defaults can be restored by simply deleting this file. # # See timesyncd.conf(5) for details. [Time] #NTP= #FallbackNTP=0.debian.pool.ntp.org 1.debian.pool.ntp.org 2.debian.pool.ntp.org 3.debian.pool.ntp.org #RootDistanceMaxSec=5 #PollIntervalMinSec=32 #PollIntervalMaxSec=2048 \u6dfb\u52a0\u670d\u52a1\u5668\u9700\u8981\u53d6\u6d88 NTP= \u8fd9\u4e00\u884c\u7684\u6ce8\u91ca\uff0c\u5e76\u586b\u5165 NTP \u670d\u52a1\u5668\u5730\u5740\u3002 \u4f8b\u5982\uff1a # /etc/systemd/timesyncd.conf NTP=pool.ntp.org 0.asia.pool.ntp.org 1.asia.pool.ntp.org 2.asia.pool.ntp.org \u591a\u670d\u52a1\u5668\u95f4\u7528\u7a7a\u683c\u5206\u5272\u3002 \u4fdd\u5b58\u66f4\u6539\u540e\uff0c\u91cd\u542f systemd-timesyncd \u670d\u52a1 # systemctl restart systemd-timesyncd \u4e4b\u540e\u9a8c\u8bc1\u914d\u7f6e \u4f7f\u7528 timedatectl show-timesync --all root@debian:~# timedatectl show-timesync --all LinkNTPServers= SystemNTPServers=0.asia.pool.ntp.org 1.asia.pool.ntp.org FallbackNTPServers=0.debian.pool.ntp.org 1.debian.pool.ntp.org 2.debian.pool.ntp.org 3.debian.pool.ntp.org ServerName=0.asia.pool.ntp.org ServerAddress=139.59.15.185 RootDistanceMaxUSec=5s PollIntervalMinUSec=32s PollIntervalMaxUSec=34min 8s PollIntervalUSec=1min 4s NTPMessage={ Leap=0, Version=4, Mode=4, Stratum=4, Precision=-24, RootDelay=86.166ms, RootDispersion=14.190ms, Reference=A29FC801, OriginateTimestamp=Tue 2020-12-22 19:34:01 CST, ReceiveTimestamp=Tue 2020-12-22 19:34:02 CST, TransmitTimestamp=Tue 2020-12-22 19:34:02 CST, DestinationTimestamp=Tue 2020-12-22 19:34:02 CST, Ignored=no PacketCount=1, Jitter=0 } Frequency=7623778 NTP \u670d\u52a1\u5668\u9009\u62e9\u987a\u5e8f\u5982\u4e0b\uff1a systemd-networkd.service(8) \u4e2d\u9488\u5bf9\u6bcf\u4e2a\u63a5\u53e3\u7684\u914d\u7f6e\uff0c\u6216\u8005 DHCP \u670d\u52a1\u4f18\u5148\u3002 /etc/systemd/timesyncd.conf \u4e2d\u5b9a\u4e49\u7684 NTP\u670d\u52a1\u5668\u4f1a\u5728\u8fd0\u884c\u65f6\u88ab\u6dfb\u52a0\u5230\u9488\u5bf9\u6bcf\u4e2a\u63a5\u53e3\u7684\u670d\u52a1\u5668\u5217\u8868\u4e2d\uff0c\u5b88\u62a4\u8fdb\u7a0b\u4f1a\u8f6e\u6d41\u8fde\u63a5\u8fd9\u4e9b\u670d\u52a1\u5668\u76f4\u5230\u67d0\u4e2a\u6709\u5e94\u7b54\u3002 \u5982\u679c\u4e0a\u4e24\u6b65\u6ca1\u6709\u53d6\u5230 NTP \u670d\u52a1\u5668\uff0c \u90a3\u4e48\u5c31\u662f\u7528 FallbackNTP= \u4e2d\u5b9a\u4e49\u7684\u670d\u52a1\u5668\u3002 \u8981\u542f\u7528,\u8fd0\u884c\uff1a # timedatectl set-ntp true \u540c\u6b65\u9700\u8981\u4e00\u70b9\u65f6\u95f4\uff0c\u53ef\u80fd\u4f1a\u5361\u4f4f\u3002 \u67e5\u770b\u72b6\u6001\u4f7f\u7528\uff1a # timedatectl timesync-status","title":"systemd-timesyncd"},{"location":"ch5/ntp/#ntpd","text":"\u5982\u679c\u9700\u8981\u66f4\u591a\u7684\u7279\u6027\uff0c\u6216\u9700\u8981\u540c\u65f6\u90e8\u7f72 NTP \u670d\u52a1\u5668\uff0c\u5219\u9700\u8981\u5b89\u88c5 ntpd \u8f6f\u4ef6\u5305\u3002 ntpd \u4e0e \u7cfb\u7edf\u81ea\u5e26\u7684 systemd-timesyncd \u6709\u51b2\u7a81\uff0c\u9700\u8981\u505c\u6b62\u81ea\u5e26\u670d\u52a1\u3002 systemd \u81ea\u5e26\u7684 timedatectl \u53ea\u80fd\u63a7\u5236\u7cfb\u7edf\u81ea\u5e26\u7684 systemd-timesyncd\uff0c\u5e76\u4e14\u4e24\u8005\u540c\u65f6\u4f7f\u7528\u4f1a\u56e0\u4e3a\u540c\u65f6\u5360\u7528 123/udp \u800c\u4ea7\u751f\u51b2\u7a81\uff0c\u56e0\u6b64\u4f7f\u7528 timedatectl set-ntp false \u505c\u6b62 systemd-timesyncd \u670d\u52a1\u3002 # timedatectl set-ntp false \u5b89\u88c5 ntpd \u670d\u52a1 # apt-get install ntp \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 /etc/ntp.conf \u5728 23 \u884c\u5904\u53ef\u4fee\u6539\u539f\u59cb\u670d\u52a1\u5668\u5730\u5740\u4e3a\u6240\u9700\u7684\u670d\u52a1\u5668\u5730\u5740\uff1a # /etc/ntp.conf # pool.ntp.org maps to about 1000 low-stratum NTP servers. Your server will # pick a different set every time it starts up. Please consider joining the # pool: <http://www.pool.ntp.org/join.html> pool 0.debian.pool.ntp.org iburst pool 1.debian.pool.ntp.org iburst pool 2.debian.pool.ntp.org iburst pool 3.debian.pool.ntp.org iburst \u4f8b\u5982\u4fee\u6539\u4e3a\uff1a # /etc/ntp.conf server ntp1.aliyun.com server ntp2.aliyun.com \u91cd\u542f\u670d\u52a1\u751f\u6548\uff1a # systemctl restart ntpd \u4f7f\u7528 ntpq -p \u67e5\u770b\u540c\u6b65\u72b6\u6001 root@debian:~# ntpq -p remote refid st t when poll reach delay offset jitter ============================================================================== 0.debian.pool.n .POOL. 16 p - 64 0 0.000 0.000 0.000 1.debian.pool.n .POOL. 16 p - 64 0 0.000 0.000 0.000 2.debian.pool.n .POOL. 16 p - 64 0 0.000 0.000 0.000 3.debian.pool.n .POOL. 16 p - 64 0 0.000 0.000 0.000 -tick.ntp.infoma .GPS. 1 u 146 128 176 225.512 -11.584 0.508 +203.107.6.88 100.107.25.114 2 u 12 64 377 29.612 -9.788 0.910 +119.28.183.184 100.122.36.196 2 u 17 64 337 66.883 -8.777 1.218 *202.118.1.130 .PTP. 1 u 77 64 376 44.633 9.074 0.494 -119.28.206.193 100.122.36.4 2 u 73 128 277 69.470 -8.139 5.240 delay, offset \u548c jitter \u4e0d\u5e94\u8be5\u4e3a\u96f6\uff0cntpd \u540c\u6b65\u7684\u670d\u52a1\u5668\u524d\u6709\u661f\u53f7\uff0cntpd \u53ef\u80fd\u7b49\u5f85\u51e0\u5206\u949f\u540e\u624d\u4f1a\u8fdb\u884c\u540c\u6b65","title":"ntpd"},{"location":"ch5/ntp/#chrony","text":"chrony \u4e3a\u65b0\u4e00\u4ee3\u7684 NTP \u5b88\u62a4\u8fdb\u7a0b\u5b9e\u73b0\uff0c\u914d\u7f6e\u6bd4\u8d77 ntpd \u6765\u8bf4\u66f4\u52a0\u7b80\u5355\uff0c chrony \u76ee\u524d\u4e3a Red Hat \u63a8\u8350\u4f7f\u7528\u7684 NTP \u5b88\u62a4\u8fdb\u7a0b \u5bf9\u4e8e Debian\uff0c\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u5728 /etc/chrony/chrony.conf \u53ea\u9700\u5728\u914d\u7f6e\u6587\u4ef6\u91cc\u5199\u5165 server pool.ntp.org iburst \u5176\u4e2d pool.ntp.org \u66ff\u6362\u4e3a\u8981\u540c\u6b65\u4f7f\u7528\u7684\u670d\u52a1\u5668 IP \u6216\u57df\u540d \u67e5\u770b\u5f53\u524d\u65f6\u95f4\u670d\u52a1\u5668\u4f7f\u7528 chronyc sources \u6b63\u5e38\u60c5\u51b5\u4e0b Chrony \u4f1a\u6b65\u8fdb\u540c\u6b65\u65f6\u949f\uff0c\u5176\u4e0e ntpd \u7684\u5de5\u4f5c\u65b9\u5f0f\u5f88\u4e0d\u76f8\u540c\uff0c\u5e76\u6ca1\u6709\u4e00\u4e2a\u771f\u6b63\u610f\u4e49\u4e0a\u4e0e ntpdate \u547d\u4ee4\u4f5c\u7528\u7c7b\u4f3c\u7684\u5f3a\u5236\u540c\u6b65\u65b9\u5f0f \u4f46\u5982\u679c\u9700\u8981\u7684\u8bdd\uff0c\u4f7f\u7528 chronyc -a makestep \u5f3a\u5236\u6b65\u8fdb\u540c\u6b65\u3002 \u5982\u679c chronyd \u6ca1\u6709\u8fd0\u884c\uff0c\u6b63\u5982 ntpdate \u4f7f\u7528\u7684\u90a3\u79cd\u60c5\u51b5\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 chronyd -q 'server pool.ntp.org iburst' \u624b\u5de5\u540c\u6b65\u65f6\u95f4\u3002 \u53c2\u8003\u8d44\u6599\uff1a ArchWiki:Network Time Protocol daemon (\u7b80\u4f53\u4e2d\u6587) Red Hat Documentation:CONFIGURING NTP USING THE CHRONY SUITE","title":"chrony"},{"location":"ch5/sudo/","text":"sudo \u5728 Linux \u4e2d\uff0c\u8bb8\u591a\u64cd\u4f5c\u9700\u8981\u6211\u4eec\u901a\u8fc7 root \u8d26\u6237\u6743\u9650\u5b8c\u6210\uff0c\u4f46\u6211\u4eec\u901a\u5e38\u4e0d\u60f3\u5f00\u653e\u8fd9\u4e2a\u8d26\u6237\uff0c\u4e5f\u4e0d\u5e0c\u671b\u7ecf\u5e38\u5207\u6362\u7528\u6237\uff0c\u56e0\u6b64\u5c31\u6709\u4e86 sudo \u547d\u4ee4\uff0c\u4ed6\u63d0\u4f9b\u7684\u529f\u80fd\u662f\uff1a\u5f53\u6211\u4eec\u9700\u8981 root \u6743\u9650\u65f6\uff0c\u5c06\u6743\u9650\u4e34\u65f6\u63d0\u5347\u4e3a root \u6267\u884c\u5f53\u524d\u547d\u4ee4\u6765\u4fdd\u969c\u6743\u9650\u5b89\u5168\u3002 \u5728\u672c\u7ae0\u8282\u914d\u7f6e\u597d sudo \u4e4b\u540e\uff0c\u672c\u4e66\u7684\u5176\u4ed6\u6240\u6709\u64cd\u4f5c\u90fd\u5c06\u4f7f\u7528\u666e\u901a\u7528\u6237\u5b8c\u6210\u3002 \u5b89\u88c5 sudo \u9996\u5148\u5b89\u88c5 sudo \u8f6f\u4ef6\u5305\uff1a # apt-get install sudo \u63a5\u4e0b\u6765\u6700\u7b80\u5355\u7684\u64cd\u4f5c\u65b9\u6cd5\u662f\u5c06\u5141\u8bb8\u4f7f\u7528 sudo \u547d\u4ee4\u7684\u7528\u6237\u52a0\u5165 sudo \u7ec4\uff1a # usermod debian -aG sudo # id debian uid=1000(debian) gid=1000(debian) groups=1000(debian),24(cdrom),25(floppy),27(sudo),29(audio),30(dip),44(video),46(plugdev),109(netdev) \u63a5\u4e0b\u6765\u5207\u6362\u56de debian \u7528\u6237\uff0c\u5c1d\u8bd5\u4f7f\u7528\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\u7684\u547d\u4ee4\uff0c\u5e76\u5728\u524d\u9762\u52a0\u4e0a sudo root@debian:~# su - debian debian@debian:~$ apt update Reading package lists... Done E: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied) E: Unable to lock directory /var/lib/apt/lists/ W: Problem unlinking the file /var/cache/apt/pkgcache.bin - RemoveCaches (13: Permission denied) W: Problem unlinking the file /var/cache/apt/srcpkgcache.bin - RemoveCaches (13: Permission denied) debian@debian:~$ sudo apt update We trust you have received the usual lecture from the local System Administrator. It usually boils down to these three things: #1) Respect the privacy of others. #2) Think before you type. #3) With great power comes great responsibility. [sudo] password for debian: Get:1 http://ftp.debian.org/debian buster-backports InRelease [46.7 kB] Hit:2 http://deb.debian.org/debian stable InRelease Get:3 http://deb.debian.org/debian stable-updates InRelease [51.9 kB] Get:4 http://ftp.debian.org/debian buster-backports/main Sources.diff/Index [27.8 kB] Hit:5 http://deb.debian.org/debian-security stable/updates InRelease Get:6 http://ftp.debian.org/debian buster-backports/main Sources 2021-01-12-1400.20.pdiff [1,057 B] Get:6 http://ftp.debian.org/debian buster-backports/main Sources 2021-01-12-1400.20.pdiff [1,057 B] Fetched 127 kB in 2s (76.4 kB/s) Reading package lists... Done Building dependency tree Reading state information... Done 16 packages can be upgraded. Run 'apt list --upgradable' to see them. \u63d0\u793a\u8f93\u5165\u5bc6\u7801\u65f6\uff0c\u8f93\u5165\u5f53\u524d\u7528\u6237 ( debian ) \u7684\u5bc6\u7801\u3002 \u914d\u7f6e sudo sudo \u7684\u914d\u7f6e\u53ef\u4ee5\u4f7f\u7528 sudo -ll \u67e5\u770b\uff0c\u4f7f\u7528 sudo -lU \u67e5\u770b\u7279\u5b9a\u7528\u6237\u7684\u914d\u7f6e debian@debian:~$ sudo -ll Matching Defaults entries for debian on debian: env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin User debian may run the following commands on debian: Sudoers entry: RunAsUsers: ALL RunAsGroups: ALL Commands: ALL debian@debian:~$ sudo -lU debian Matching Defaults entries for debian on debian: env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin User debian may run the following commands on debian: (ALL : ALL) ALL sudo \u7684\u914d\u7f6e\u6587\u4ef6\u4e3a /etc/sudoers \uff0c\u4f46\u4e00\u65e6\u6587\u4ef6\u5185\u90e8\u51fa\u73b0\u95ee\u9898\u4f1a\u5bfc\u81f4 sudo \u65e0\u6cd5\u8fd0\u884c\uff0c\u5982\u6b64\u65f6\u65e0\u6cd5\u4f7f\u7528 root \u8d26\u6237\u5219\u4f1a\u53d1\u751f\u5f88\u4e25\u91cd\u7684\u4e8b\u6545\uff0c\u56e0\u6b64\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u987b\u4f7f\u7528 visudo \u547d\u4ee4\u3002 visudo \u4f1a\u5728\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u91cc\u4fee\u6539 /etc/sudoers \u6587\u4ef6\uff0c\u5e76\u68c0\u67e5\u8bed\u6cd5\u65e0\u8bef\u540e\u518d\u5199\u5165 /etc/sudoers \u6267\u884c\uff1a $ sudo visudo \u5728 Debian \u4e2d\uff0c visudo \u4f1a\u9ed8\u8ba4\u8c03\u7528 nano \u7f16\u8f91\u5668\uff0c\u5982\u8981\u4f7f\u7528 vim \uff0c\u53ef\u5728 /etc/sudoers \u4e2d\u6307\u5b9a\uff1a # /etc/sudoers # Set default EDITOR to vim, and do not allow visudo to use EDITOR/VISUAL. Defaults editor=/usr/bin/vim, !env_editor \u4e3a\u67d0\u4e2a\u7528\u6237\u53ef\u4ee5\u6267\u884c\u6240\u6709\u547d\u4ee4\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u52a0\u5165\uff1a \u7528\u6237\u540d ALL=(ALL) ALL \u5141\u8bb8\u4ee5\u67d0\u4e2a\u4e3b\u673a\u540d\u767b\u5f55\u7528\u6237\u6267\u884c\u547d\u4ee4\uff1a \u7528\u6237\u540d \u4e3b\u673a\u540d=(ALL) ALL \u5141\u8bb8wheel\u7528\u6237\u7ec4\u6210\u5458\u65e0\u5bc6\u7801\u4f7f\u7528sudo\uff1a %wheel ALL=(ALL) NOPASSWD: ALL \u8981\u4e0d\u8be2\u95ee\u67d0\u4e2a\u7528\u6237\u7684\u5bc6\u7801: Defaults:USER_NAME !authenticate \u53ea\u4e3a\u7528\u6237\u542f\u7528\u90e8\u5206\u547d\u4ee4\u7684\u6267\u884c\u6743\u9650\uff1a \u7528\u6237\u540d \u4e3b\u673a\u540d=/sbin/halt,/sbin/poweroff,/sbin/reboot,/usr/bin/apt \u5e38\u89c1\u95ee\u9898 \u6267\u884c visudo \u63d0\u793a command not found \u7531\u4e8e\u975e root \u8d26\u6237\u7684 $PATH \u73af\u5883\u53d8\u91cf\u9ed8\u8ba4\u6ca1\u6709 /sbin \u4e0e /usr/sbin \u76ee\u5f55\uff0c\u56e0\u6b64\u65e0\u6cd5\u76f4\u63a5\u6267\u884c sbin \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728 Debian \u4e2d\uff0c /etc/sudoers \u6307\u5b9a\u4e86\u4f7f\u7528 sudo \u6267\u884c\u547d\u4ee4\u65f6 $PATH \u73af\u5883\u53d8\u91cf\u4f1a\u4ea7\u751f\u53d8\u5316\uff0c\u8fd9\u4e2a\u53d8\u5316\u7684\u73af\u5883\u53d8\u91cf\u4f1a\u52a0\u5165\u4e00\u7cfb\u5217 sbin \u76ee\u5f55\u3002 \u56e0\u6b64\u8bf7\u4f7f\u7528 sudo visudo \u5bf9\u5176\u4ed6\u7c7b\u4f3c\u7684\u60c5\u51b5 ( \u5982 \u6267\u884c usermod \u4e00\u7c7b\u7684\u547d\u4ee4 ) \u4e5f\u540c\u7406\u3002 \u7981\u7528 root \u7528\u6237 \u5728\u914d\u7f6e\u597d sudo \u540e\uff0c\u53ef\u4ee5\u9009\u62e9\u7981\u7528 root \u7528\u6237\uff0c\u6267\u884c\uff1a $ sudo passwd -l root \u5982\u9700\u89e3\u9501\uff0c\u6267\u884c sudo passwd -u root","title":"sudo"},{"location":"ch5/sudo/#sudo","text":"\u5728 Linux \u4e2d\uff0c\u8bb8\u591a\u64cd\u4f5c\u9700\u8981\u6211\u4eec\u901a\u8fc7 root \u8d26\u6237\u6743\u9650\u5b8c\u6210\uff0c\u4f46\u6211\u4eec\u901a\u5e38\u4e0d\u60f3\u5f00\u653e\u8fd9\u4e2a\u8d26\u6237\uff0c\u4e5f\u4e0d\u5e0c\u671b\u7ecf\u5e38\u5207\u6362\u7528\u6237\uff0c\u56e0\u6b64\u5c31\u6709\u4e86 sudo \u547d\u4ee4\uff0c\u4ed6\u63d0\u4f9b\u7684\u529f\u80fd\u662f\uff1a\u5f53\u6211\u4eec\u9700\u8981 root \u6743\u9650\u65f6\uff0c\u5c06\u6743\u9650\u4e34\u65f6\u63d0\u5347\u4e3a root \u6267\u884c\u5f53\u524d\u547d\u4ee4\u6765\u4fdd\u969c\u6743\u9650\u5b89\u5168\u3002 \u5728\u672c\u7ae0\u8282\u914d\u7f6e\u597d sudo \u4e4b\u540e\uff0c\u672c\u4e66\u7684\u5176\u4ed6\u6240\u6709\u64cd\u4f5c\u90fd\u5c06\u4f7f\u7528\u666e\u901a\u7528\u6237\u5b8c\u6210\u3002","title":"sudo"},{"location":"ch5/sudo/#sudo_1","text":"\u9996\u5148\u5b89\u88c5 sudo \u8f6f\u4ef6\u5305\uff1a # apt-get install sudo \u63a5\u4e0b\u6765\u6700\u7b80\u5355\u7684\u64cd\u4f5c\u65b9\u6cd5\u662f\u5c06\u5141\u8bb8\u4f7f\u7528 sudo \u547d\u4ee4\u7684\u7528\u6237\u52a0\u5165 sudo \u7ec4\uff1a # usermod debian -aG sudo # id debian uid=1000(debian) gid=1000(debian) groups=1000(debian),24(cdrom),25(floppy),27(sudo),29(audio),30(dip),44(video),46(plugdev),109(netdev) \u63a5\u4e0b\u6765\u5207\u6362\u56de debian \u7528\u6237\uff0c\u5c1d\u8bd5\u4f7f\u7528\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\u7684\u547d\u4ee4\uff0c\u5e76\u5728\u524d\u9762\u52a0\u4e0a sudo root@debian:~# su - debian debian@debian:~$ apt update Reading package lists... Done E: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied) E: Unable to lock directory /var/lib/apt/lists/ W: Problem unlinking the file /var/cache/apt/pkgcache.bin - RemoveCaches (13: Permission denied) W: Problem unlinking the file /var/cache/apt/srcpkgcache.bin - RemoveCaches (13: Permission denied) debian@debian:~$ sudo apt update We trust you have received the usual lecture from the local System Administrator. It usually boils down to these three things: #1) Respect the privacy of others. #2) Think before you type. #3) With great power comes great responsibility. [sudo] password for debian: Get:1 http://ftp.debian.org/debian buster-backports InRelease [46.7 kB] Hit:2 http://deb.debian.org/debian stable InRelease Get:3 http://deb.debian.org/debian stable-updates InRelease [51.9 kB] Get:4 http://ftp.debian.org/debian buster-backports/main Sources.diff/Index [27.8 kB] Hit:5 http://deb.debian.org/debian-security stable/updates InRelease Get:6 http://ftp.debian.org/debian buster-backports/main Sources 2021-01-12-1400.20.pdiff [1,057 B] Get:6 http://ftp.debian.org/debian buster-backports/main Sources 2021-01-12-1400.20.pdiff [1,057 B] Fetched 127 kB in 2s (76.4 kB/s) Reading package lists... Done Building dependency tree Reading state information... Done 16 packages can be upgraded. Run 'apt list --upgradable' to see them. \u63d0\u793a\u8f93\u5165\u5bc6\u7801\u65f6\uff0c\u8f93\u5165\u5f53\u524d\u7528\u6237 ( debian ) \u7684\u5bc6\u7801\u3002","title":"\u5b89\u88c5 sudo"},{"location":"ch5/sudo/#sudo_2","text":"sudo \u7684\u914d\u7f6e\u53ef\u4ee5\u4f7f\u7528 sudo -ll \u67e5\u770b\uff0c\u4f7f\u7528 sudo -lU \u67e5\u770b\u7279\u5b9a\u7528\u6237\u7684\u914d\u7f6e debian@debian:~$ sudo -ll Matching Defaults entries for debian on debian: env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin User debian may run the following commands on debian: Sudoers entry: RunAsUsers: ALL RunAsGroups: ALL Commands: ALL debian@debian:~$ sudo -lU debian Matching Defaults entries for debian on debian: env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin User debian may run the following commands on debian: (ALL : ALL) ALL sudo \u7684\u914d\u7f6e\u6587\u4ef6\u4e3a /etc/sudoers \uff0c\u4f46\u4e00\u65e6\u6587\u4ef6\u5185\u90e8\u51fa\u73b0\u95ee\u9898\u4f1a\u5bfc\u81f4 sudo \u65e0\u6cd5\u8fd0\u884c\uff0c\u5982\u6b64\u65f6\u65e0\u6cd5\u4f7f\u7528 root \u8d26\u6237\u5219\u4f1a\u53d1\u751f\u5f88\u4e25\u91cd\u7684\u4e8b\u6545\uff0c\u56e0\u6b64\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u987b\u4f7f\u7528 visudo \u547d\u4ee4\u3002 visudo \u4f1a\u5728\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u91cc\u4fee\u6539 /etc/sudoers \u6587\u4ef6\uff0c\u5e76\u68c0\u67e5\u8bed\u6cd5\u65e0\u8bef\u540e\u518d\u5199\u5165 /etc/sudoers \u6267\u884c\uff1a $ sudo visudo \u5728 Debian \u4e2d\uff0c visudo \u4f1a\u9ed8\u8ba4\u8c03\u7528 nano \u7f16\u8f91\u5668\uff0c\u5982\u8981\u4f7f\u7528 vim \uff0c\u53ef\u5728 /etc/sudoers \u4e2d\u6307\u5b9a\uff1a # /etc/sudoers # Set default EDITOR to vim, and do not allow visudo to use EDITOR/VISUAL. Defaults editor=/usr/bin/vim, !env_editor \u4e3a\u67d0\u4e2a\u7528\u6237\u53ef\u4ee5\u6267\u884c\u6240\u6709\u547d\u4ee4\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u52a0\u5165\uff1a \u7528\u6237\u540d ALL=(ALL) ALL \u5141\u8bb8\u4ee5\u67d0\u4e2a\u4e3b\u673a\u540d\u767b\u5f55\u7528\u6237\u6267\u884c\u547d\u4ee4\uff1a \u7528\u6237\u540d \u4e3b\u673a\u540d=(ALL) ALL \u5141\u8bb8wheel\u7528\u6237\u7ec4\u6210\u5458\u65e0\u5bc6\u7801\u4f7f\u7528sudo\uff1a %wheel ALL=(ALL) NOPASSWD: ALL \u8981\u4e0d\u8be2\u95ee\u67d0\u4e2a\u7528\u6237\u7684\u5bc6\u7801: Defaults:USER_NAME !authenticate \u53ea\u4e3a\u7528\u6237\u542f\u7528\u90e8\u5206\u547d\u4ee4\u7684\u6267\u884c\u6743\u9650\uff1a \u7528\u6237\u540d \u4e3b\u673a\u540d=/sbin/halt,/sbin/poweroff,/sbin/reboot,/usr/bin/apt","title":"\u914d\u7f6e sudo"},{"location":"ch5/sudo/#_1","text":"","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"ch5/sudo/#visudo-command-not-found","text":"\u7531\u4e8e\u975e root \u8d26\u6237\u7684 $PATH \u73af\u5883\u53d8\u91cf\u9ed8\u8ba4\u6ca1\u6709 /sbin \u4e0e /usr/sbin \u76ee\u5f55\uff0c\u56e0\u6b64\u65e0\u6cd5\u76f4\u63a5\u6267\u884c sbin \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5728 Debian \u4e2d\uff0c /etc/sudoers \u6307\u5b9a\u4e86\u4f7f\u7528 sudo \u6267\u884c\u547d\u4ee4\u65f6 $PATH \u73af\u5883\u53d8\u91cf\u4f1a\u4ea7\u751f\u53d8\u5316\uff0c\u8fd9\u4e2a\u53d8\u5316\u7684\u73af\u5883\u53d8\u91cf\u4f1a\u52a0\u5165\u4e00\u7cfb\u5217 sbin \u76ee\u5f55\u3002 \u56e0\u6b64\u8bf7\u4f7f\u7528 sudo visudo \u5bf9\u5176\u4ed6\u7c7b\u4f3c\u7684\u60c5\u51b5 ( \u5982 \u6267\u884c usermod \u4e00\u7c7b\u7684\u547d\u4ee4 ) \u4e5f\u540c\u7406\u3002","title":"\u6267\u884c visudo \u63d0\u793a command not found"},{"location":"ch5/sudo/#root","text":"\u5728\u914d\u7f6e\u597d sudo \u540e\uff0c\u53ef\u4ee5\u9009\u62e9\u7981\u7528 root \u7528\u6237\uff0c\u6267\u884c\uff1a $ sudo passwd -l root \u5982\u9700\u89e3\u9501\uff0c\u6267\u884c sudo passwd -u root","title":"\u7981\u7528 root \u7528\u6237"},{"location":"ch5/user/","text":"\u672c\u5730\u7528\u6237 Debian \u5728\u7528\u6237\u914d\u7f6e\u4e0a\u4e0e\u5176\u4ed6\u53d1\u884c\u7248\u65e0\u4efb\u4f55\u533a\u522b\u3002 \u867d\u7136\u6211\u60f3\u8fd9\u4e48\u8bf4\uff0c\u4f46\u867d\u7136\u4f60\u53ef\u4ee5\u50cf RedHat \u7684\u65b9\u5f0f\u521b\u5efa\u7528\u6237\uff0c\u4f46\u9700\u8981\u4f60\u624b\u52a8\u914d\u7f6e\u5f88\u591a\u4fe1\u606f\u3002 Debian \u6587\u6863\u4e2d\u63a8\u8350\u4f7f\u7528\u7684\u662f adduser \u547d\u4ee4\u6765\u521b\u5efa\u7528\u6237 \u56e0 Linux \u4f7f\u7528\u65f6\u6700\u597d\u9075\u5b88\u7684\u6700\u5c0f\u6743\u9650\u6cd5\u5219\uff0c\u901a\u5e38\u8981\u6c42\u7ef4\u62a4\u4e0e\u5b88\u62a4\u8fdb\u7a0b\u5747\u4e0d\u8981\u4f7f\u7528 root \u8d26\u6237\u8fd0\u884c\u3002 \u6211\u4eec\u53ef\u80fd\u9700\u8981\u521b\u5efa\u591a\u4e2a\u8d26\u6237\uff0c\u5e76\u5728\u4e34\u65f6\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\u65f6\u4f7f\u7528 sudo \u547d\u4ee4\u8fdb\u884c\u4e34\u65f6\u63d0\u6743\u3002 sudo \u4f1a\u5728\u540e\u7eed\u7ae0\u8282\u8bb2\u8ff0\uff0c\u800c\u5f53\u524d\u7ae0\u8282\u5219\u4f1a\u91cd\u590d\u5520\u53e8\u4e00\u4e9b Linux \u7528\u6237\u90fd\u77e5\u9053\u7684\u77e5\u8bc6\u3002 \u7528\u6237\u7684\u6e05\u5355\u5747\u5b58\u50a8\u5728 /etc/passwd \u6587\u4ef6\u4e2d\uff0c /etc/shadow \u5b58\u50a8\u4e86\u7528\u6237\u7684\u5bc6\u7801\uff0c\u7fa4\u7ec4\u7684\u6570\u636e\u5219\u5b58\u50a8\u5728 /etc/group \u4e2d \u5c3d\u7ba1\u5b8c\u5168\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u7f16\u8f91\u6587\u4ef6\u6765\u8fbe\u5230\u6dfb\u52a0\u4e0e\u5220\u9664\u7684\u76ee\u7684\uff0c\u4f46\u66f4\u63a8\u8350\u7684\u65b9\u5f0f\u662f\u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177\u3002\u4f8b\u5982\uff1a $ # \u521b\u5efa\u4e00\u4e2a\u540d\u4e3a debian \u7684\u7528\u6237 # useradd debian $ # \u521b\u5efa\u4e00\u4e2a\u7981\u6b62\u767b\u5f55\u7684\u540d\u4e3a apache \u7684\u7528\u6237 # useradd -s /sbin/nologin apache $ # \u521b\u5efa\u4e00\u4e2a admin \u7528\u6237\uff0c\u5e76\u6307\u5b9a\u5176\u9644\u52a0\u7ec4\u5177\u6709 sudo \u7ec4 # useradd -G sudo admin $ # \u5b8c\u5168\u5220\u9664\u7528\u6237 ( \u5305\u62ec\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e0e\u90ae\u7bb1\u76ee\u5f55 ) # userdel -r debian \u4e4b\u540e\u5bf9\u7528\u6237\u8bbe\u7f6e\u5bc6\u7801\u5373\u53ef\u8ba9\u7528\u6237\u6b63\u5e38\u767b\u5f55 $ # \u4ea4\u4e92\u5f0f\u8bbe\u5b9a # passwd debian $ # \u53ef\u7528\u5728\u811a\u672c\u4e2d\u7684\uff0c\u975e\u4ea4\u4e92\u5f0f\u4fee\u6539\u5bc6\u7801\u7684\u65b9\u5f0f # echo \"debian:Skill21!\" | chpasswd $ # Debian \u63d0\u4f9b\u7684 passwd \u6ca1\u6709 --stdin \u53c2\u6570","title":"\u672c\u5730\u7528\u6237"},{"location":"ch5/user/#_1","text":"Debian \u5728\u7528\u6237\u914d\u7f6e\u4e0a\u4e0e\u5176\u4ed6\u53d1\u884c\u7248\u65e0\u4efb\u4f55\u533a\u522b\u3002 \u867d\u7136\u6211\u60f3\u8fd9\u4e48\u8bf4\uff0c\u4f46\u867d\u7136\u4f60\u53ef\u4ee5\u50cf RedHat \u7684\u65b9\u5f0f\u521b\u5efa\u7528\u6237\uff0c\u4f46\u9700\u8981\u4f60\u624b\u52a8\u914d\u7f6e\u5f88\u591a\u4fe1\u606f\u3002 Debian \u6587\u6863\u4e2d\u63a8\u8350\u4f7f\u7528\u7684\u662f adduser \u547d\u4ee4\u6765\u521b\u5efa\u7528\u6237 \u56e0 Linux \u4f7f\u7528\u65f6\u6700\u597d\u9075\u5b88\u7684\u6700\u5c0f\u6743\u9650\u6cd5\u5219\uff0c\u901a\u5e38\u8981\u6c42\u7ef4\u62a4\u4e0e\u5b88\u62a4\u8fdb\u7a0b\u5747\u4e0d\u8981\u4f7f\u7528 root \u8d26\u6237\u8fd0\u884c\u3002 \u6211\u4eec\u53ef\u80fd\u9700\u8981\u521b\u5efa\u591a\u4e2a\u8d26\u6237\uff0c\u5e76\u5728\u4e34\u65f6\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\u65f6\u4f7f\u7528 sudo \u547d\u4ee4\u8fdb\u884c\u4e34\u65f6\u63d0\u6743\u3002 sudo \u4f1a\u5728\u540e\u7eed\u7ae0\u8282\u8bb2\u8ff0\uff0c\u800c\u5f53\u524d\u7ae0\u8282\u5219\u4f1a\u91cd\u590d\u5520\u53e8\u4e00\u4e9b Linux \u7528\u6237\u90fd\u77e5\u9053\u7684\u77e5\u8bc6\u3002 \u7528\u6237\u7684\u6e05\u5355\u5747\u5b58\u50a8\u5728 /etc/passwd \u6587\u4ef6\u4e2d\uff0c /etc/shadow \u5b58\u50a8\u4e86\u7528\u6237\u7684\u5bc6\u7801\uff0c\u7fa4\u7ec4\u7684\u6570\u636e\u5219\u5b58\u50a8\u5728 /etc/group \u4e2d \u5c3d\u7ba1\u5b8c\u5168\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u7f16\u8f91\u6587\u4ef6\u6765\u8fbe\u5230\u6dfb\u52a0\u4e0e\u5220\u9664\u7684\u76ee\u7684\uff0c\u4f46\u66f4\u63a8\u8350\u7684\u65b9\u5f0f\u662f\u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177\u3002\u4f8b\u5982\uff1a $ # \u521b\u5efa\u4e00\u4e2a\u540d\u4e3a debian \u7684\u7528\u6237 # useradd debian $ # \u521b\u5efa\u4e00\u4e2a\u7981\u6b62\u767b\u5f55\u7684\u540d\u4e3a apache \u7684\u7528\u6237 # useradd -s /sbin/nologin apache $ # \u521b\u5efa\u4e00\u4e2a admin \u7528\u6237\uff0c\u5e76\u6307\u5b9a\u5176\u9644\u52a0\u7ec4\u5177\u6709 sudo \u7ec4 # useradd -G sudo admin $ # \u5b8c\u5168\u5220\u9664\u7528\u6237 ( \u5305\u62ec\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e0e\u90ae\u7bb1\u76ee\u5f55 ) # userdel -r debian \u4e4b\u540e\u5bf9\u7528\u6237\u8bbe\u7f6e\u5bc6\u7801\u5373\u53ef\u8ba9\u7528\u6237\u6b63\u5e38\u767b\u5f55 $ # \u4ea4\u4e92\u5f0f\u8bbe\u5b9a # passwd debian $ # \u53ef\u7528\u5728\u811a\u672c\u4e2d\u7684\uff0c\u975e\u4ea4\u4e92\u5f0f\u4fee\u6539\u5bc6\u7801\u7684\u65b9\u5f0f # echo \"debian:Skill21!\" | chpasswd $ # Debian \u63d0\u4f9b\u7684 passwd \u6ca1\u6709 --stdin \u53c2\u6570","title":"\u672c\u5730\u7528\u6237"},{"location":"ch6/apt/","text":"APT APT \u53ef\u80fd\u662f Linux \u4e2d\u6700\u65e9\u7684\u5305\u7ba1\u7406\u5668\u4e86\u3002 \u867d\u7136\u5728\u5f53\u4e0b\u4e0e dnf ( RHEL 8 \u5f00\u59cb\u4f7f\u7528\u7684\u5305\u7ba1\u7406\u5668 ) \u548c pacman ( Arch \u7cfb\u53d1\u884c\u7248\u4f7f\u7528\u7684\u5305\u7ba1\u7406\u5668 ) \u76f8\u6bd4\uff0c\u5e76\u6ca1\u6709\u663e\u793a\u51fa\u660e\u663e\u7684\u4f18\u52bf\uff0c\u4f46\u8f6f\u4ef6\u6e90\u7684\u6570\u91cf\u5374\u53ef\u4ee5\u8ba4\u4e3a\u975e\u5e38\u591a\u3002 APT \u8f6f\u4ef6\u6e90\u5c06\u5199\u8fdb /etc/apt/sources.list \u6587\u4ef6\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u5728 /etc/apt/sources.list.d/ \u4e2d\u521b\u5efa\u7ed3\u5c3e\u4e3a .list \u7684\u6587\u4ef6\u5e76\u5199\u5165\u3002 \u4e4b\u540e\u5373\u53ef\u4f7f\u7528\u4e00\u7cfb\u5217\u547d\u4ee4\u5b89\u88c5\u4e0e\u7ba1\u7406\u8f6f\u4ef6\u5305\u3002 \u5199\u5165\u8f6f\u4ef6\u6e90 /etc/apt/sources.list \u7684\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a deb url distribution component1 component2 component3 [..] componentX deb-src url distribution component1 component2 component3 [..] componentX deb \u8868\u793a\u6b64\u8f6f\u4ef6\u6e90\u5b58\u653e\u4e8c\u8fdb\u5236\u8f6f\u4ef6\u5305 deb-src \u8868\u793a\u6b64\u8f6f\u4ef6\u6e90\u5b58\u653e\u6e90\u7801\u5305 \u5b9e\u9645\u4f7f\u7528\u65f6\uff0c\u53ef\u4ee5\u4e0d\u5199 deb-src \u53ef\u52a0\u5feb\u8f6f\u4ef6\u6e90\u66f4\u65b0\u901f\u5ea6\u3002 url \u586b\u5199\u8f6f\u4ef6\u6e90\u76ee\u6807\u5730\u5740 \u8f6f\u4ef6\u6e90\u652f\u6301\u8bb8\u591a\u7f51\u7edc\u534f\u8bae\uff1a http ( s ) :// file:// ftp ( s ) :// cdrom: distribution \u6307\u5f53\u524d\u7248\u672c\u5185\u90e8\u4ee3\u7801\uff0c\u53ef\u7528 lsb_release -sc \u67e5\u770b\uff1a $ lsb_release -sc buster \u7531\u4e8e\u5404\u79cd\u5404\u6837\u7684\u539f\u56e0\uff0cDebian \u5b98\u65b9\u8f6f\u4ef6\u6e90\u5c06\u8f6f\u4ef6\u5305\u5206\u5272\u6210\u4e86\u591a\u4e2a\u5206\u652f\uff0c\u5982\u9700\u8981\u5b8c\u6574\u7684\u6240\u6709\u8f6f\u4ef6\uff0c\u5219\u9700\u8981\u63d0\u4f9b\u591a\u4e2a\u5206\u652f\u3002 Debian \u5b98\u65b9\u8f6f\u4ef6\u6e90\u7684\u5206\u652f\u6709\uff1a main contrib non-free \u5176\u4ed6\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u6e90\u4e5f\u53ef\u80fd\u5b58\u5728\u591a\u4e2a\u5206\u652f\u3002 \u5982\u4e0a\uff0c\u4e00\u4e2a\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u63d0\u4f9b\u5728\u7ebf\u8f6f\u4ef6\u6e90\u7684 /etc/apt/sources.list \u5e94\u5982\u4e0b\uff1a # /etc/apt/sources.list # Security updates deb http://security.debian.org/ buster/updates main contrib non-free deb-src http://security.debian.org/ buster/updates main contrib non-free ## Debian mirror # Base repository deb https://deb.debian.org/debian buster main contrib non-free deb-src https://deb.debian.org/debian buster main contrib non-free # Stable updates deb https://deb.debian.org/debian buster-updates main contrib non-free deb-src https://deb.debian.org/debian buster-updates main contrib non-free # Stable backports deb https://deb.debian.org/debian buster-backports main contrib non-free deb-src https://deb.debian.org/debian buster-backports main contrib non-free \u5982\u679c\u5b98\u65b9\u5730\u5740\u4ece\u56fd\u5185\u8bbf\u95ee\u901f\u5ea6\u592a\u6162\uff0c\u53ef\u4ee5\u641c\u7d22\u5e76\u6dfb\u52a0\u56fd\u5185\u955c\u50cf\u6e90\uff0c\u66ff\u6362\u4ee5\u4e0a\u7684 URL \u5373\u53ef\u3002 \u5982\u8981\u4f7f\u7528\u5149\u76d8\u4f5c\u4e3a\u8f6f\u4ef6\u6e90\uff0c\u4f7f\u7528 sudo apt-cdrom add \u547d\u4ee4\uff0c\u5c06\u81ea\u52a8\u6dfb\u52a0\u5149\u76d8\u4e3a\u8f6f\u4ef6\u6e90\u3002 \u5728\u6dfb\u52a0\u8f6f\u4ef6\u6e90\u6216\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u6bcf\u6b21\u66f4\u65b0\u7cfb\u7edf\u6216\u5b89\u88c5\u8f6f\u4ef6\u5305\u4e4b\u524d\uff0c\u987b\u66f4\u65b0 APT \u7f13\u5b58\uff1a $ sudo apt update \u5728\u6dfb\u52a0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u6e90\u65f6\uff0c\u53ef\u80fd\u8fd8\u9700\u8981\u6dfb\u52a0\u7b2c\u4e09\u65b9\u6e90\u7684\u5bc6\u94a5\uff0c\u53ef\u4f7f\u7528 apt-key \u6dfb\u52a0\u3002 \u4f8b\u5982\uff0c\u5982\u4e0b\u547d\u4ee4\u5c06\u4e0b\u8f7d Docker \u5b98\u65b9\u8f6f\u4ef6\u6e90\u7684\u5bc6\u94a5\uff0c\u5e76\u901a\u8fc7\u7ba1\u9053\u7b26\u4f20\u7ed9 apt-key \u547d\u4ee4\u6dfb\u52a0\uff1a $ curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add - \u7ba1\u7406\u8f6f\u4ef6\u5305 APT \u53ef\u8f7b\u677e\u7ba1\u7406\u8f6f\u4ef6\u5305\u7684\u5b89\u88c5\uff0c\u5378\u8f7d\uff0c\u5347\u7ea7\uff0c\u4ee5\u53ca\u5bf9\u6574\u4e2a\u53d1\u884c\u7248\u7684\u7248\u672c\u53f7\u8fdb\u884c\u5347\u7ea7\u3002 \u867d\u7136\u591a\u6570\u65f6\u5019\u5e76\u4e0d\u63a8\u8350\u76f4\u63a5\u5347\u7ea7\u53d1\u884c\u7248\u7248\u672c\uff0c\u5c24\u5176\u662f\u8de8\u5927\u7248\u672c\u5347\u7ea7\u3002 APT \u7684\u5e38\u7528\u5b50\u547d\u4ee4\u6709\uff1a update \u66f4\u65b0\u7f13\u5b58 upgrade \u5347\u7ea7\u73b0\u6709\u8f6f\u4ef6\u5305 install \u5b89\u88c5\u8f6f\u4ef6\u5305 remove \u5378\u8f7d\u8f6f\u4ef6\u5305 ( \u4fdd\u7559\u914d\u7f6e ) purge \u5b8c\u5168\u5378\u8f7d\u8f6f\u4ef6\u5305 ( \u6e05\u9664\u914d\u7f6e ) autoremove \u81ea\u52a8\u5378\u8f7d\u672a\u4f7f\u7528\u7684\u8f6f\u4ef6\u5305 ( \u5f53\u7cfb\u7edf\u4e2d\u5b58\u5728\u672a\u4f7f\u7528 APT \u5b89\u88c5\u5e76\u7ba1\u7406\u7684\u8f6f\u4ef6\u5305\u65f6\u614e\u7528\uff01 ) search ( \u6765\u81ea apt-cache ) \u641c\u7d22\u8f6f\u4ef6\u5305 \u4e0b\u9762\u7684\u4f8b\u5b50\u5c06\u66f4\u65b0 APT \u8f6f\u4ef6\u6e90\u7f13\u5b58\u5e76\u4e3a\u6211\u4eec\u7684\u5b9e\u9a8c\u73af\u5883\u865a\u62df\u673a\u5b89\u88c5 open-vm-tools \u5de5\u5177\uff1a $ sudo apt update && sudo apt install open-vm-tools","title":"\u7ba1\u7406\u524d\u7aef APT"},{"location":"ch6/apt/#apt","text":"APT \u53ef\u80fd\u662f Linux \u4e2d\u6700\u65e9\u7684\u5305\u7ba1\u7406\u5668\u4e86\u3002 \u867d\u7136\u5728\u5f53\u4e0b\u4e0e dnf ( RHEL 8 \u5f00\u59cb\u4f7f\u7528\u7684\u5305\u7ba1\u7406\u5668 ) \u548c pacman ( Arch \u7cfb\u53d1\u884c\u7248\u4f7f\u7528\u7684\u5305\u7ba1\u7406\u5668 ) \u76f8\u6bd4\uff0c\u5e76\u6ca1\u6709\u663e\u793a\u51fa\u660e\u663e\u7684\u4f18\u52bf\uff0c\u4f46\u8f6f\u4ef6\u6e90\u7684\u6570\u91cf\u5374\u53ef\u4ee5\u8ba4\u4e3a\u975e\u5e38\u591a\u3002 APT \u8f6f\u4ef6\u6e90\u5c06\u5199\u8fdb /etc/apt/sources.list \u6587\u4ef6\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u5728 /etc/apt/sources.list.d/ \u4e2d\u521b\u5efa\u7ed3\u5c3e\u4e3a .list \u7684\u6587\u4ef6\u5e76\u5199\u5165\u3002 \u4e4b\u540e\u5373\u53ef\u4f7f\u7528\u4e00\u7cfb\u5217\u547d\u4ee4\u5b89\u88c5\u4e0e\u7ba1\u7406\u8f6f\u4ef6\u5305\u3002","title":"APT"},{"location":"ch6/apt/#_1","text":"/etc/apt/sources.list \u7684\u8bed\u6cd5\u683c\u5f0f\u5982\u4e0b\uff1a deb url distribution component1 component2 component3 [..] componentX deb-src url distribution component1 component2 component3 [..] componentX deb \u8868\u793a\u6b64\u8f6f\u4ef6\u6e90\u5b58\u653e\u4e8c\u8fdb\u5236\u8f6f\u4ef6\u5305 deb-src \u8868\u793a\u6b64\u8f6f\u4ef6\u6e90\u5b58\u653e\u6e90\u7801\u5305 \u5b9e\u9645\u4f7f\u7528\u65f6\uff0c\u53ef\u4ee5\u4e0d\u5199 deb-src \u53ef\u52a0\u5feb\u8f6f\u4ef6\u6e90\u66f4\u65b0\u901f\u5ea6\u3002 url \u586b\u5199\u8f6f\u4ef6\u6e90\u76ee\u6807\u5730\u5740 \u8f6f\u4ef6\u6e90\u652f\u6301\u8bb8\u591a\u7f51\u7edc\u534f\u8bae\uff1a http ( s ) :// file:// ftp ( s ) :// cdrom: distribution \u6307\u5f53\u524d\u7248\u672c\u5185\u90e8\u4ee3\u7801\uff0c\u53ef\u7528 lsb_release -sc \u67e5\u770b\uff1a $ lsb_release -sc buster \u7531\u4e8e\u5404\u79cd\u5404\u6837\u7684\u539f\u56e0\uff0cDebian \u5b98\u65b9\u8f6f\u4ef6\u6e90\u5c06\u8f6f\u4ef6\u5305\u5206\u5272\u6210\u4e86\u591a\u4e2a\u5206\u652f\uff0c\u5982\u9700\u8981\u5b8c\u6574\u7684\u6240\u6709\u8f6f\u4ef6\uff0c\u5219\u9700\u8981\u63d0\u4f9b\u591a\u4e2a\u5206\u652f\u3002 Debian \u5b98\u65b9\u8f6f\u4ef6\u6e90\u7684\u5206\u652f\u6709\uff1a main contrib non-free \u5176\u4ed6\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u6e90\u4e5f\u53ef\u80fd\u5b58\u5728\u591a\u4e2a\u5206\u652f\u3002 \u5982\u4e0a\uff0c\u4e00\u4e2a\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u63d0\u4f9b\u5728\u7ebf\u8f6f\u4ef6\u6e90\u7684 /etc/apt/sources.list \u5e94\u5982\u4e0b\uff1a # /etc/apt/sources.list # Security updates deb http://security.debian.org/ buster/updates main contrib non-free deb-src http://security.debian.org/ buster/updates main contrib non-free ## Debian mirror # Base repository deb https://deb.debian.org/debian buster main contrib non-free deb-src https://deb.debian.org/debian buster main contrib non-free # Stable updates deb https://deb.debian.org/debian buster-updates main contrib non-free deb-src https://deb.debian.org/debian buster-updates main contrib non-free # Stable backports deb https://deb.debian.org/debian buster-backports main contrib non-free deb-src https://deb.debian.org/debian buster-backports main contrib non-free \u5982\u679c\u5b98\u65b9\u5730\u5740\u4ece\u56fd\u5185\u8bbf\u95ee\u901f\u5ea6\u592a\u6162\uff0c\u53ef\u4ee5\u641c\u7d22\u5e76\u6dfb\u52a0\u56fd\u5185\u955c\u50cf\u6e90\uff0c\u66ff\u6362\u4ee5\u4e0a\u7684 URL \u5373\u53ef\u3002 \u5982\u8981\u4f7f\u7528\u5149\u76d8\u4f5c\u4e3a\u8f6f\u4ef6\u6e90\uff0c\u4f7f\u7528 sudo apt-cdrom add \u547d\u4ee4\uff0c\u5c06\u81ea\u52a8\u6dfb\u52a0\u5149\u76d8\u4e3a\u8f6f\u4ef6\u6e90\u3002 \u5728\u6dfb\u52a0\u8f6f\u4ef6\u6e90\u6216\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u6bcf\u6b21\u66f4\u65b0\u7cfb\u7edf\u6216\u5b89\u88c5\u8f6f\u4ef6\u5305\u4e4b\u524d\uff0c\u987b\u66f4\u65b0 APT \u7f13\u5b58\uff1a $ sudo apt update \u5728\u6dfb\u52a0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u6e90\u65f6\uff0c\u53ef\u80fd\u8fd8\u9700\u8981\u6dfb\u52a0\u7b2c\u4e09\u65b9\u6e90\u7684\u5bc6\u94a5\uff0c\u53ef\u4f7f\u7528 apt-key \u6dfb\u52a0\u3002 \u4f8b\u5982\uff0c\u5982\u4e0b\u547d\u4ee4\u5c06\u4e0b\u8f7d Docker \u5b98\u65b9\u8f6f\u4ef6\u6e90\u7684\u5bc6\u94a5\uff0c\u5e76\u901a\u8fc7\u7ba1\u9053\u7b26\u4f20\u7ed9 apt-key \u547d\u4ee4\u6dfb\u52a0\uff1a $ curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -","title":"\u5199\u5165\u8f6f\u4ef6\u6e90"},{"location":"ch6/apt/#_2","text":"APT \u53ef\u8f7b\u677e\u7ba1\u7406\u8f6f\u4ef6\u5305\u7684\u5b89\u88c5\uff0c\u5378\u8f7d\uff0c\u5347\u7ea7\uff0c\u4ee5\u53ca\u5bf9\u6574\u4e2a\u53d1\u884c\u7248\u7684\u7248\u672c\u53f7\u8fdb\u884c\u5347\u7ea7\u3002 \u867d\u7136\u591a\u6570\u65f6\u5019\u5e76\u4e0d\u63a8\u8350\u76f4\u63a5\u5347\u7ea7\u53d1\u884c\u7248\u7248\u672c\uff0c\u5c24\u5176\u662f\u8de8\u5927\u7248\u672c\u5347\u7ea7\u3002 APT \u7684\u5e38\u7528\u5b50\u547d\u4ee4\u6709\uff1a update \u66f4\u65b0\u7f13\u5b58 upgrade \u5347\u7ea7\u73b0\u6709\u8f6f\u4ef6\u5305 install \u5b89\u88c5\u8f6f\u4ef6\u5305 remove \u5378\u8f7d\u8f6f\u4ef6\u5305 ( \u4fdd\u7559\u914d\u7f6e ) purge \u5b8c\u5168\u5378\u8f7d\u8f6f\u4ef6\u5305 ( \u6e05\u9664\u914d\u7f6e ) autoremove \u81ea\u52a8\u5378\u8f7d\u672a\u4f7f\u7528\u7684\u8f6f\u4ef6\u5305 ( \u5f53\u7cfb\u7edf\u4e2d\u5b58\u5728\u672a\u4f7f\u7528 APT \u5b89\u88c5\u5e76\u7ba1\u7406\u7684\u8f6f\u4ef6\u5305\u65f6\u614e\u7528\uff01 ) search ( \u6765\u81ea apt-cache ) \u641c\u7d22\u8f6f\u4ef6\u5305 \u4e0b\u9762\u7684\u4f8b\u5b50\u5c06\u66f4\u65b0 APT \u8f6f\u4ef6\u6e90\u7f13\u5b58\u5e76\u4e3a\u6211\u4eec\u7684\u5b9e\u9a8c\u73af\u5883\u865a\u62df\u673a\u5b89\u88c5 open-vm-tools \u5de5\u5177\uff1a $ sudo apt update && sudo apt install open-vm-tools","title":"\u7ba1\u7406\u8f6f\u4ef6\u5305"},{"location":"ch6/deb/","text":"deb \u5305 deb \u8f6f\u4ef6\u5305\u672c\u7740\u7b80\u5355\u7684\u539f\u5219\u8bbe\u8ba1\uff0c\u4ed6\u53ef\u4ee5\u76f4\u63a5\u88ab ar \u3001 tar \u3001 gzip \u8fd9\u7c7b\u5e94\u7528\u5904\u7406\uff0c\u4e5f\u5c31\u610f\u5473\u7740\uff0c deb \u5b9e\u9645\u4e0a\u53ea\u662f\u4e00\u79cd\u5355\u7eaf\u7684\u6253\u5305\u683c\u5f0f\u3002 \u8fd9\u610f\u5473\u7740\uff0c\u4e00\u65e6\u4f60\u4e0d\u5c0f\u5fc3\u5220\u9664\u4e86\u7cfb\u7edf\u7684 dpkg \u7a0b\u5e8f\uff0c\u6216\u8005\u4e3a\u6ca1\u6709 dpkg \u5305\u7ba1\u7406\u5de5\u5177\u7684 Linux \u7cfb\u7edf\u62ff\u5230\u4e86\u4e00\u4e2a deb \u8f6f\u4ef6\u5305\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u5b89\u88c5\u6216\u4fee\u590d\u7cfb\u7edf\u3002 \u5f53\u7136\u5728\u975e\u9762\u5411\u5e73\u53f0\u5f3a\u884c\u4f7f\u7528\u5305\u8fd9\u79cd\u884c\u4e3a\u662f\u6781\u4e0d\u63a8\u8350\u7684 \u4e5f\u5c31\u662f\u8bf4\uff0c\u53ef\u4ee5\u901a\u8fc7 ar \u6253\u5305\u4e0e\u89e3\u5305 deb \u6587\u4ef6\uff0c\u5e76\u4e14\u67e5\u770b\u5185\u90e8\u7ed3\u6784\u3002 \u4e00\u4e2a deb \u8f6f\u4ef6\u5305\u5305\u542b\u8fd9\u4e2a\u5305\u7684\u5143\u4fe1\u606f ( metadata )\uff0c\u4ee5\u53ca\u5b9e\u9645\u7684\u4e8c\u8fdb\u5236\u6216\u6e90\u7801\uff0c\u52a0\u4e0a\u5176\u4ed6\u6240\u9700\u6587\u4ef6\u3002 \u5143\u4fe1\u606f\u4e2d\u5305\u542b\u4e86\u5f53\u524d\u8f6f\u4ef6\u5305\u7684\u7248\u672c\u53f7\uff0c\u4f9d\u8d56\uff0c\u51b2\u7a81\uff0c\u4e0d\u517c\u5bb9\u7b49\uff0c\u4ed6\u7684\u683c\u5f0f\u7c7b\u4f3c\u4e8e\u7535\u5b50\u90ae\u4ef6\u5934 ( \u5b9a\u4e49\u4e8e RFC 2822 \uff0c) \u53ef\u4ee5\u901a\u8fc7 apt-cache \u67e5\u770b\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u4e3a apt \u8f6f\u4ef6\u5305\u7684\u5143\u4fe1\u606f\uff1a debian@debian:~$ apt-cache show apt Package: apt Version: 1.8.2.2 Installed-Size: 4064 Maintainer: APT Development Team <deity@lists.debian.org> Architecture: amd64 Replaces: apt-transport-https (<< 1.5~alpha4~), apt-utils (<< 1.3~exp2~) Provides: apt-transport-https (= 1.8.2.2) Depends: adduser, gpgv | gpgv2 | gpgv1, debian-archive-keyring, libapt-pkg5.0 (>= 1.7.0~alpha3~), libc6 (>= 2.15), libgcc1 (>= 1:3.0), libgnutls30 (>= 3.6.6), libseccomp2 (>= 1.0.1), libstdc++6 (>= 5.2) Suggests: apt-doc, aptitude | synaptic | wajig, dpkg-dev (>= 1.17.2), gnupg | gnupg2 | gnupg1, powermgmt-base Breaks: apt-transport-https (<< 1.5~alpha4~), apt-utils (<< 1.3~exp2~), aptitude (<< 0.8.10) Description-en: commandline package manager This package provides commandline tools for searching and managing as well as querying information about packages as a low-level access to all features of the libapt-pkg library. . These include: * apt-get for retrieval of packages and information about them from authenticated sources and for installation, upgrade and removal of packages together with their dependencies * apt-cache for querying available information about installed as well as installable packages * apt-cdrom to use removable media as a source for packages * apt-config as an interface to the configuration settings * apt-key as an interface to manage authentication keys Description-md5: 9fb97a88cb7383934ef963352b53b4a7 Recommends: ca-certificates Section: admin Priority: important Filename: pool/updates/main/a/apt/apt_1.8.2.2_amd64.deb Size: 1418564 MD5sum: 03e41cd6be84c762a3c255a02efa9285 SHA256: 89d691610de7c717abffd2f85932f8e48da71212a1e2e05681855f1f99d1c4f9 \u901a\u5e38\u7ba1\u7406 deb \u8f6f\u4ef6\u5305\u4f7f\u7528 dpkg \u4e0e apt \u5de5\u5177\u5305\uff0c\u524d\u8005\u662f\u66f4\u52a0\u9762\u5411\u7ba1\u7406\u5458\u7684\uff0c\u800c\u540e\u8005\u662f\u66f4\u591a\u9762\u5411\u7528\u6237\u7684\u3002\u4f46\u8fd9\u4e24\u8005\u5404\u6709\u5404\u7684\u7528\u9014\uff0c\u9700\u8981\u89c6\u60c5\u51b5\u800c\u5b9a\u4f7f\u7528\u4f55\u8005\u3002 Red Hat \u53d1\u884c\u7248\u4f7f\u7528\u7684 RPM \u8f6f\u4ef6\u5305\u4e5f\u53ef\u901a\u8fc7\u8f6c\u6362\u7684\u65b9\u5f0f\u8fd0\u884c\u5728 Debian \u4e0a\uff0c\u4f46\u8fd9\u4f1a\u5e26\u6765\u6f5c\u5728\u7684\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u4f46\u5e78\u597d deb \u683c\u5f0f\u7684\u8f6f\u4ef6\u5305\u975e\u5e38\u4e30\u5bcc\uff0c\u901a\u5e38\u60f3\u8981\u7684\u90fd\u80fd\u627e\u5f97\u5230\u3002 deb \u6253\u5305\u5e76\u4e0d\u5728\u6b64\u6559\u7a0b\u7684\u8303\u56f4\u5185\u3002","title":"deb \u5305"},{"location":"ch6/deb/#deb","text":"deb \u8f6f\u4ef6\u5305\u672c\u7740\u7b80\u5355\u7684\u539f\u5219\u8bbe\u8ba1\uff0c\u4ed6\u53ef\u4ee5\u76f4\u63a5\u88ab ar \u3001 tar \u3001 gzip \u8fd9\u7c7b\u5e94\u7528\u5904\u7406\uff0c\u4e5f\u5c31\u610f\u5473\u7740\uff0c deb \u5b9e\u9645\u4e0a\u53ea\u662f\u4e00\u79cd\u5355\u7eaf\u7684\u6253\u5305\u683c\u5f0f\u3002 \u8fd9\u610f\u5473\u7740\uff0c\u4e00\u65e6\u4f60\u4e0d\u5c0f\u5fc3\u5220\u9664\u4e86\u7cfb\u7edf\u7684 dpkg \u7a0b\u5e8f\uff0c\u6216\u8005\u4e3a\u6ca1\u6709 dpkg \u5305\u7ba1\u7406\u5de5\u5177\u7684 Linux \u7cfb\u7edf\u62ff\u5230\u4e86\u4e00\u4e2a deb \u8f6f\u4ef6\u5305\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u5b89\u88c5\u6216\u4fee\u590d\u7cfb\u7edf\u3002 \u5f53\u7136\u5728\u975e\u9762\u5411\u5e73\u53f0\u5f3a\u884c\u4f7f\u7528\u5305\u8fd9\u79cd\u884c\u4e3a\u662f\u6781\u4e0d\u63a8\u8350\u7684 \u4e5f\u5c31\u662f\u8bf4\uff0c\u53ef\u4ee5\u901a\u8fc7 ar \u6253\u5305\u4e0e\u89e3\u5305 deb \u6587\u4ef6\uff0c\u5e76\u4e14\u67e5\u770b\u5185\u90e8\u7ed3\u6784\u3002 \u4e00\u4e2a deb \u8f6f\u4ef6\u5305\u5305\u542b\u8fd9\u4e2a\u5305\u7684\u5143\u4fe1\u606f ( metadata )\uff0c\u4ee5\u53ca\u5b9e\u9645\u7684\u4e8c\u8fdb\u5236\u6216\u6e90\u7801\uff0c\u52a0\u4e0a\u5176\u4ed6\u6240\u9700\u6587\u4ef6\u3002 \u5143\u4fe1\u606f\u4e2d\u5305\u542b\u4e86\u5f53\u524d\u8f6f\u4ef6\u5305\u7684\u7248\u672c\u53f7\uff0c\u4f9d\u8d56\uff0c\u51b2\u7a81\uff0c\u4e0d\u517c\u5bb9\u7b49\uff0c\u4ed6\u7684\u683c\u5f0f\u7c7b\u4f3c\u4e8e\u7535\u5b50\u90ae\u4ef6\u5934 ( \u5b9a\u4e49\u4e8e RFC 2822 \uff0c) \u53ef\u4ee5\u901a\u8fc7 apt-cache \u67e5\u770b\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u4e3a apt \u8f6f\u4ef6\u5305\u7684\u5143\u4fe1\u606f\uff1a debian@debian:~$ apt-cache show apt Package: apt Version: 1.8.2.2 Installed-Size: 4064 Maintainer: APT Development Team <deity@lists.debian.org> Architecture: amd64 Replaces: apt-transport-https (<< 1.5~alpha4~), apt-utils (<< 1.3~exp2~) Provides: apt-transport-https (= 1.8.2.2) Depends: adduser, gpgv | gpgv2 | gpgv1, debian-archive-keyring, libapt-pkg5.0 (>= 1.7.0~alpha3~), libc6 (>= 2.15), libgcc1 (>= 1:3.0), libgnutls30 (>= 3.6.6), libseccomp2 (>= 1.0.1), libstdc++6 (>= 5.2) Suggests: apt-doc, aptitude | synaptic | wajig, dpkg-dev (>= 1.17.2), gnupg | gnupg2 | gnupg1, powermgmt-base Breaks: apt-transport-https (<< 1.5~alpha4~), apt-utils (<< 1.3~exp2~), aptitude (<< 0.8.10) Description-en: commandline package manager This package provides commandline tools for searching and managing as well as querying information about packages as a low-level access to all features of the libapt-pkg library. . These include: * apt-get for retrieval of packages and information about them from authenticated sources and for installation, upgrade and removal of packages together with their dependencies * apt-cache for querying available information about installed as well as installable packages * apt-cdrom to use removable media as a source for packages * apt-config as an interface to the configuration settings * apt-key as an interface to manage authentication keys Description-md5: 9fb97a88cb7383934ef963352b53b4a7 Recommends: ca-certificates Section: admin Priority: important Filename: pool/updates/main/a/apt/apt_1.8.2.2_amd64.deb Size: 1418564 MD5sum: 03e41cd6be84c762a3c255a02efa9285 SHA256: 89d691610de7c717abffd2f85932f8e48da71212a1e2e05681855f1f99d1c4f9 \u901a\u5e38\u7ba1\u7406 deb \u8f6f\u4ef6\u5305\u4f7f\u7528 dpkg \u4e0e apt \u5de5\u5177\u5305\uff0c\u524d\u8005\u662f\u66f4\u52a0\u9762\u5411\u7ba1\u7406\u5458\u7684\uff0c\u800c\u540e\u8005\u662f\u66f4\u591a\u9762\u5411\u7528\u6237\u7684\u3002\u4f46\u8fd9\u4e24\u8005\u5404\u6709\u5404\u7684\u7528\u9014\uff0c\u9700\u8981\u89c6\u60c5\u51b5\u800c\u5b9a\u4f7f\u7528\u4f55\u8005\u3002 Red Hat \u53d1\u884c\u7248\u4f7f\u7528\u7684 RPM \u8f6f\u4ef6\u5305\u4e5f\u53ef\u901a\u8fc7\u8f6c\u6362\u7684\u65b9\u5f0f\u8fd0\u884c\u5728 Debian \u4e0a\uff0c\u4f46\u8fd9\u4f1a\u5e26\u6765\u6f5c\u5728\u7684\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u4f46\u5e78\u597d deb \u683c\u5f0f\u7684\u8f6f\u4ef6\u5305\u975e\u5e38\u4e30\u5bcc\uff0c\u901a\u5e38\u60f3\u8981\u7684\u90fd\u80fd\u627e\u5f97\u5230\u3002 deb \u6253\u5305\u5e76\u4e0d\u5728\u6b64\u6559\u7a0b\u7684\u8303\u56f4\u5185\u3002","title":"deb \u5305"},{"location":"ch6/dpkg/","text":"dpkg \u5305\u7ba1\u7406\u5668 dpkg \u662f\u5904\u7406 deb \u8f6f\u4ef6\u5305\u7684\u5de5\u5177\uff0c\u4ed6\u88ab\u6240\u6709\u57fa\u4e8e Debian \u7684\u53d1\u884c\u7248\u9ed8\u8ba4\u9644\u5e26\u3002 dpkg \u4e0e Red Hat \u53d1\u884c\u7248\u7684 rpm \u5de5\u5177\u76f8\u4f3c\uff0c\u5c5e\u4e8e\u4e00\u7c7b\u7ba1\u7406\u5de5\u5177\u3002 dpkg \u5728\u4f7f\u7528\u65f6\u9700\u8981\u5df2\u7ecf\u5b58\u5728\u67d0\u4e2a\u8f6f\u4ef6\u5305\u3002\u8f6f\u4ef6\u5305\u53ef\u4ee5\u4ece Debian \u7684\u5b89\u88c5\u5149\u76d8\u83b7\u53d6\uff0c\u4e5f\u53ef\u4ee5\u4ece\u7f51\u7edc\u4e0a\u4e0b\u8f7d\u5f97\u5230\u3002 \u4f8b\u5982\u6211\u5f53\u524d\u6709\u4e00\u4e2a\u8f6f\u4ef6\u5305\u4e3a containerd.io_1.4.3-1_amd64.deb ( Docker \u7684\u5bb9\u5668\u8fd0\u884c\u65f6 )\uff0c\u4fdd\u5b58\u5728 /home/debian \u76ee\u5f55\u4e2d\u3002 \u8be5\u8f6f\u4ef6\u5305\u53ef\u4ece Docker \u5b98\u65b9\u6e90\u4e2d\u4e0b\u8f7d\u5f97\u5230\uff0c\u5730\u5740\u4e3a http://download.docker.com/linux/debian/dists/buster/pool/stable/amd64/containerd.io_1.4.3-1_amd64.deb \u5982\u679c Linux \u5b9e\u9a8c\u73af\u5883\u8fde\u901a\u4e92\u8054\u7f51\uff0c\u53ef\u76f4\u63a5\u4f7f\u7528 curl \u6216 wget \u5de5\u5177\u4e0b\u8f7d\u3002 \u7531\u4e8e wget \u4e3a GNU \u8f6f\u4ef6\u5305\u9644\u5e26\u7684\u8f6f\u4ef6\uff0cDebian \u4f1a\u9ed8\u8ba4\u5b89\u88c5\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528 wget \u5de5\u5177\u4e0b\u8f7d\uff1a debian@debian:~$ pwd /home/debian debian@debian:~$ wget http://download.docker.com/linux/debian/dists/buster/pool/stable/amd64/containerd.io_1.4.3-1_amd64.deb --2021-01-13 16:07:06-- http://download.docker.com/linux/debian/dists/buster/pool/stable/amd64/containerd.io_1.4.3-1_amd64.deb Resolving download.docker.com (download.docker.com)... 54.239.169.41, 54.239.169.76, 54.239.169.15, ... Connecting to download.docker.com (download.docker.com)|54.239.169.41|:80... connected. HTTP request sent, awaiting response... 301 Moved Permanently Location: https://download.docker.com/linux/debian/dists/buster/pool/stable/amd64/containerd.io_1.4.3-1_amd64.deb [following] --2021-01-13 16:07:07-- https://download.docker.com/linux/debian/dists/buster/pool/stable/amd64/containerd.io_1.4.3-1_amd64.deb Connecting to download.docker.com (download.docker.com)|54.239.169.41|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 28103678 (27M) [binary/octet-stream] Saving to: \u2018containerd.io_1.4.3-1_amd64.deb\u2019 containerd.io_1.4.3-1_amd64.d 100%[=================================================>] 26.80M 12.9MB/s in 2.1s 2021-01-13 16:07:11 (12.9 MB/s) - \u2018containerd.io_1.4.3-1_amd64.deb\u2019 saved [28103678/28103678] debian@debian:~$ ls -l total 27448 -rw-r--r-- 1 debian debian 28103678 Dec 29 00:38 containerd.io_1.4.3-1_amd64.deb \u5bf9\u5176\u7ba1\u7406\u65b9\u6cd5\u5982\u4e0b\uff1a \u5b89\u88c5\u8f6f\u4ef6\u5305 \u4f7f\u7528 dpkg -i : \u5373 --install \u53c2\u6570\u90fd\u6709 \u201c\u957f\u201d \u7248 (\u4e00\u4e2a\u6216\u591a\u4e2a\u5b57\uff0c\u524d\u7f6e\u4e24\u4e2a\u94fe\u63a5\u53f7) \u4e0e \u201c\u77ed\u201d \u7248 (\u4e00\u4e2a\u5b57\u6bcd\uff0c\u901a\u5e38\u662f\u957f\u7248\u5b57\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bcd\uff0c\u524d\u7f6e\u4e00\u4e2a\u94fe\u63a5\u53f7) \u4e24\u79cd\u5199\u6cd5\u3002\u8fd9\u662f POSIX \u6807\u51c6\u5e38\u89c1\u7684\u7528\u6cd5\u3002 $ sudo dpkg -i containerd.io_1.4.3-1_amd64.deb [sudo] password for debian: Selecting previously unselected package containerd.io. (Reading database ... 36792 files and directories currently installed.) Preparing to unpack containerd.io_1.4.3-1_amd64.deb ... Unpacking containerd.io (1.4.3-1) ... Setting up containerd.io (1.4.3-1) ... Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service \u2192 /lib/systemd/system/containerd.service. Processing triggers for man-db (2.8.5-2) ... \u6709\u65f6\u4f1a\u9047\u5230\u7279\u5b9a\u8f6f\u4ef6\u5305\u6240\u5305\u542b\u7684\u6587\u4ef6\u5df2\u7ecf\u5728\u53e6\u4e00\u4e2a\u8f6f\u4ef6\u5305\u4e2d\u88ab\u5b89\u88c5\uff0c\u5982\u679c\u80fd\u591f\u5b8c\u5168\u786e\u5b9a\u8fd9\u4e0d\u4f1a\u9020\u6210\u95ee\u9898\u7684\u8bdd\uff0c\u53ef\u4f7f\u7528 --force-overwrite \u53c2\u6570\u8fdb\u884c\u5f3a\u5236\u8986\u76d6\u3002 \u867d\u7136\u5b58\u5728\u8bb8\u591a --force-* \u53c2\u6570\uff0c\u4f46\u901a\u5e38\u90fd\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u901a\u5e38\u63a8\u8350\u4f7f\u7528 apt \u4ece\u8f6f\u4ef6\u6e90\u4e2d\u5b89\u88c5\u8f6f\u4ef6\u5305\u3002 \u5f53\u7136\uff0c\u5982\u679c\u4f60\u771f\u7684\u77e5\u9053\u4f60\u5728\u505a\u4ec0\u4e48\u7684\u8bdd\u5f53\u7136\u53ef\u4ee5\u5ffd\u7565\u8fd9\u53e5\u8bdd \u5378\u8f7d\u8f6f\u4ef6\u5305 \u6709\u4e24\u4e2a\u5378\u8f7d\u9009\u9879\uff0c\u5206\u522b\u4e3a -r ( --remove ) \u4e0e -P ( --purge )\uff0c\u524d\u8005\u4e3a\u5378\u8f7d\u8f6f\u4ef6\u5305\u4f46\u4fdd\u7559\u5e94\u7528\u914d\u7f6e\uff0c\u540e\u8005\u4e3a\u5b8c\u5168\u6e05\u9664\uff0c\u4e0d\u4fdd\u7559\u914d\u7f6e\u3002 \u9664\u53bb\u5b89\u88c5\u9700\u8981\u5b8c\u6574\u6307\u5b9a\u8981\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u7684\u6587\u4ef6\u540d\u4ee5\u5916\uff0c\u5176\u4ed6\u64cd\u4f5c\u53ea\u9700\u6307\u5b9a\u5305\u540d\u3002 debian@debian:~$ sudo dpkg -r containerd.io (Reading database ... 36808 files and directories currently installed.) Removing containerd.io (1.4.3-1) ... Processing triggers for man-db (2.8.5-2) ... debian@debian:~$ sudo dpkg -P containerd.io (Reading database ... 36794 files and directories currently installed.) Purging configuration files for containerd.io (1.4.3-1) ... \u67e5\u8be2 dpkg \u6570\u636e\u5e93\uff0c\u68c0\u67e5 deb \u6587\u4ef6 \u4e00\u4e9b\u5e38\u7528\u53c2\u6570\u6574\u7406\u5982\u4e0b\uff1a \u77ed\u53c2\u6570 \u957f\u53c2\u6570 \u529f\u80fd -L --listfiles \u5217\u51fa\u8f6f\u4ef6\u5305\u4f1a\u5b89\u88c5\u7684\u6587\u4ef6\u5217\u8868 -S --search \u5217\u51fa\u54ea\u4e00\u4e2a\u5305\u5305\u542b\u6307\u5b9a\u7684\u6587\u4ef6 -l --list \u5217\u51fa\u672c\u673a\u4e0a\u5df2\u77e5\u7684\u5305\u53ca\u5b89\u88c5\u72b6\u6001 -s --status \u5217\u51fa\u5305\u5934 ( \u5373\u5305\u7684\u8be6\u7ec6\u4fe1\u606f ) -c --contents \u5217\u51fa\u5b89\u88c5\u5305\u5305\u542b\u7684\u6587\u4ef6 -I --info \u6307\u5b9a\u6587\u4ef6\u67e5\u770b\u5305\u4fe1\u606f \u4e00\u4e9b\u4f7f\u7528\u4f8b\uff1a debian@debian:~$ dpkg -c containerd.io_1.4.3-1_amd64.deb drwxr-xr-x root/root 0 2020-12-02 22:33 ./ drwxr-xr-x root/root 0 2020-12-02 22:33 ./etc/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./etc/containerd/ -rw-r--r-- root/root 886 2020-12-02 22:33 ./etc/containerd/config.toml drwxr-xr-x root/root 0 2020-12-02 22:33 ./lib/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./lib/systemd/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./lib/systemd/system/ -rw-r--r-- root/root 1263 2020-12-02 22:33 ./lib/systemd/system/containerd.service drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/bin/ -rwxr-xr-x root/root 57193712 2020-12-02 22:33 ./usr/bin/containerd -rwxr-xr-x root/root 7264728 2020-12-02 22:33 ./usr/bin/containerd-shim -rwxr-xr-x root/root 9945400 2020-12-02 22:33 ./usr/bin/containerd-shim-runc-v1 -rwxr-xr-x root/root 9966072 2020-12-02 22:33 ./usr/bin/containerd-shim-runc-v2 -rwxr-xr-x root/root 30444912 2020-12-02 22:33 ./usr/bin/ctr -rwxr-xr-x root/root 14437328 2020-12-02 22:33 ./usr/bin/runc drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/doc/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/doc/containerd.io/ -rw-r--r-- root/root 2168 2020-12-02 22:33 ./usr/share/doc/containerd.io/changelog.Debian.gz -rw-r--r-- root/root 1055 2020-12-02 22:33 ./usr/share/doc/containerd.io/copyright drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/man/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/man/man5/ -rw-r--r-- root/root 1991 2020-12-02 22:33 ./usr/share/man/man5/containerd-config.toml.5.gz drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/man/man8/ -rw-r--r-- root/root 544 2020-12-02 22:33 ./usr/share/man/man8/containerd-config.8.gz -rw-r--r-- root/root 786 2020-12-02 22:33 ./usr/share/man/man8/containerd.8.gz -rw-r--r-- root/root 4501 2020-12-02 22:33 ./usr/share/man/man8/ctr.8.gz debian@debian:~$ dpkg -L vim-common /. /etc /etc/vim /etc/vim/vimrc /usr /usr/bin /usr/bin/helpztags /usr/lib /usr/lib/mime /usr/lib/mime/packages /usr/lib/mime/packages/vim-common /usr/share /usr/share/applications /usr/share/applications/vim.desktop /usr/share/doc /usr/share/doc/vim-common /usr/share/doc/vim-common/NEWS.Debian.gz /usr/share/doc/vim-common/README.Debian /usr/share/doc/vim-common/changelog.Debian.gz /usr/share/doc/vim-common/changelog.gz /usr/share/doc/vim-common/copyright /usr/share/icons /usr/share/icons/hicolor /usr/share/icons/hicolor/48x48 /usr/share/icons/hicolor/48x48/apps /usr/share/icons/hicolor/48x48/apps/gvim.png /usr/share/icons/hicolor/scalable /usr/share/icons/hicolor/scalable/apps /usr/share/icons/hicolor/scalable/apps/gvim.svg /usr/share/icons/locolor /usr/share/icons/locolor/16x16 /usr/share/icons/locolor/16x16/apps /usr/share/icons/locolor/16x16/apps/gvim.png /usr/share/icons/locolor/32x32 /usr/share/icons/locolor/32x32/apps /usr/share/icons/locolor/32x32/apps/gvim.png /usr/share/lintian /usr/share/lintian/overrides /usr/share/lintian/overrides/vim-common /usr/share/man /usr/share/man/da /usr/share/man/da/man1 /usr/share/man/da/man1/vim.1.gz /usr/share/man/da/man1/vimdiff.1.gz /usr/share/man/de /usr/share/man/de/man1 /usr/share/man/de/man1/vim.1.gz /usr/share/man/fr /usr/share/man/fr/man1 /usr/share/man/fr/man1/vim.1.gz /usr/share/man/fr/man1/vimdiff.1.gz /usr/share/man/it /usr/share/man/it/man1 /usr/share/man/it/man1/vim.1.gz /usr/share/man/it/man1/vimdiff.1.gz /usr/share/man/ja /usr/share/man/ja/man1 /usr/share/man/ja/man1/vim.1.gz /usr/share/man/ja/man1/vimdiff.1.gz /usr/share/man/man1 /usr/share/man/man1/helpztags.1.gz /usr/share/man/man1/vim.1.gz /usr/share/man/man1/vimdiff.1.gz /usr/share/man/pl /usr/share/man/pl/man1 /usr/share/man/pl/man1/vim.1.gz /usr/share/man/pl/man1/vimdiff.1.gz /usr/share/man/ru /usr/share/man/ru/man1 /usr/share/man/ru/man1/vim.1.gz /usr/share/man/ru/man1/vimdiff.1.gz /usr/share/pixmaps /usr/share/pixmaps/gvim.svg /usr/share/pixmaps/vim-16.xpm /usr/share/pixmaps/vim-32.xpm /usr/share/pixmaps/vim-48.xpm /usr/share/vim /usr/share/vim/vim81 /usr/share/vim/vim81/debian.vim /var /var/lib /var/lib/vim /var/lib/vim/addons /usr/share/man/da/man1/rview.1.gz /usr/share/man/da/man1/rvim.1.gz /usr/share/man/de/man1/rview.1.gz /usr/share/man/de/man1/rvim.1.gz /usr/share/man/fr/man1/rview.1.gz /usr/share/man/fr/man1/rvim.1.gz /usr/share/man/it/man1/rview.1.gz /usr/share/man/it/man1/rvim.1.gz /usr/share/man/ja/man1/rview.1.gz /usr/share/man/ja/man1/rvim.1.gz /usr/share/man/man1/rview.1.gz /usr/share/man/man1/rvim.1.gz /usr/share/man/pl/man1/rview.1.gz /usr/share/man/pl/man1/rvim.1.gz /usr/share/man/ru/man1/rview.1.gz /usr/share/man/ru/man1/rvim.1.gz /usr/share/vim/vimrc debian@debian:~$ dpkg -S /bin/busybox busybox: /bin/busybox debian@debian:~$ dpkg -s coreutils Package: coreutils Essential: yes Status: install ok installed Priority: required Section: utils Installed-Size: 15719 Maintainer: Michael Stone <mstone@debian.org> Architecture: amd64 Multi-Arch: foreign Version: 8.30-3 Pre-Depends: libacl1 (>= 2.2.23), libattr1 (>= 1:2.4.44), libc6 (>= 2.28), libselinux1 (>= 2.1.13) Description: GNU core utilities This package contains the basic file, shell and text manipulation utilities which are expected to exist on every operating system. . Specifically, this package includes: arch base64 basename cat chcon chgrp chmod chown chroot cksum comm cp csplit cut date dd df dir dircolors dirname du echo env expand expr factor false flock fmt fold groups head hostid id install join link ln logname ls md5sum mkdir mkfifo mknod mktemp mv nice nl nohup nproc numfmt od paste pathchk pinky pr printenv printf ptx pwd readlink realpath rm rmdir runcon sha*sum seq shred sleep sort split stat stty sum sync tac tail tee test timeout touch tr true truncate tsort tty uname unexpand uniq unlink users vdir wc who whoami yes Homepage: http://gnu.org/software/coreutils debian@debian:~$ dpkg -l \"base*\" Desired=Unknown/Install/Remove/Purge/Hold | Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend |/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad) ||/ Name Version Architecture Description +++-==============-============-============-================================================== un base <none> <none> (no description available) un base-config <none> <none> (no description available) ii base-files 10.3+deb10u6 amd64 Debian base system miscellaneous files ii base-passwd 3.5.46 amd64 Debian base system master password and group files debian@debian:~$ dpkg -I containerd.io_1.4.3-1_amd64.deb new Debian package, version 2.0. size 28103678 bytes: control archive=1520 bytes. 28 bytes, 1 lines conffiles 381 bytes, 13 lines control 850 bytes, 13 lines md5sums 1345 bytes, 32 lines * postinst #!/bin/sh 643 bytes, 21 lines * postrm #!/bin/sh 225 bytes, 7 lines * prerm #!/bin/sh Package: containerd.io Version: 1.4.3-1 Architecture: amd64 Maintainer: Containerd team <help@containerd.io> Installed-Size: 126263 Depends: libc6 (>= 2.14), libseccomp2 (>= 2.3.0) Conflicts: containerd, runc Replaces: containerd, runc Provides: containerd, runc Section: devel Priority: optional Homepage: https://containerd.io Description: An open and reliable container runtime","title":"\u5305\u7ba1\u7406\u5668 dpkg"},{"location":"ch6/dpkg/#dpkg","text":"dpkg \u662f\u5904\u7406 deb \u8f6f\u4ef6\u5305\u7684\u5de5\u5177\uff0c\u4ed6\u88ab\u6240\u6709\u57fa\u4e8e Debian \u7684\u53d1\u884c\u7248\u9ed8\u8ba4\u9644\u5e26\u3002 dpkg \u4e0e Red Hat \u53d1\u884c\u7248\u7684 rpm \u5de5\u5177\u76f8\u4f3c\uff0c\u5c5e\u4e8e\u4e00\u7c7b\u7ba1\u7406\u5de5\u5177\u3002 dpkg \u5728\u4f7f\u7528\u65f6\u9700\u8981\u5df2\u7ecf\u5b58\u5728\u67d0\u4e2a\u8f6f\u4ef6\u5305\u3002\u8f6f\u4ef6\u5305\u53ef\u4ee5\u4ece Debian \u7684\u5b89\u88c5\u5149\u76d8\u83b7\u53d6\uff0c\u4e5f\u53ef\u4ee5\u4ece\u7f51\u7edc\u4e0a\u4e0b\u8f7d\u5f97\u5230\u3002 \u4f8b\u5982\u6211\u5f53\u524d\u6709\u4e00\u4e2a\u8f6f\u4ef6\u5305\u4e3a containerd.io_1.4.3-1_amd64.deb ( Docker \u7684\u5bb9\u5668\u8fd0\u884c\u65f6 )\uff0c\u4fdd\u5b58\u5728 /home/debian \u76ee\u5f55\u4e2d\u3002 \u8be5\u8f6f\u4ef6\u5305\u53ef\u4ece Docker \u5b98\u65b9\u6e90\u4e2d\u4e0b\u8f7d\u5f97\u5230\uff0c\u5730\u5740\u4e3a http://download.docker.com/linux/debian/dists/buster/pool/stable/amd64/containerd.io_1.4.3-1_amd64.deb \u5982\u679c Linux \u5b9e\u9a8c\u73af\u5883\u8fde\u901a\u4e92\u8054\u7f51\uff0c\u53ef\u76f4\u63a5\u4f7f\u7528 curl \u6216 wget \u5de5\u5177\u4e0b\u8f7d\u3002 \u7531\u4e8e wget \u4e3a GNU \u8f6f\u4ef6\u5305\u9644\u5e26\u7684\u8f6f\u4ef6\uff0cDebian \u4f1a\u9ed8\u8ba4\u5b89\u88c5\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528 wget \u5de5\u5177\u4e0b\u8f7d\uff1a debian@debian:~$ pwd /home/debian debian@debian:~$ wget http://download.docker.com/linux/debian/dists/buster/pool/stable/amd64/containerd.io_1.4.3-1_amd64.deb --2021-01-13 16:07:06-- http://download.docker.com/linux/debian/dists/buster/pool/stable/amd64/containerd.io_1.4.3-1_amd64.deb Resolving download.docker.com (download.docker.com)... 54.239.169.41, 54.239.169.76, 54.239.169.15, ... Connecting to download.docker.com (download.docker.com)|54.239.169.41|:80... connected. HTTP request sent, awaiting response... 301 Moved Permanently Location: https://download.docker.com/linux/debian/dists/buster/pool/stable/amd64/containerd.io_1.4.3-1_amd64.deb [following] --2021-01-13 16:07:07-- https://download.docker.com/linux/debian/dists/buster/pool/stable/amd64/containerd.io_1.4.3-1_amd64.deb Connecting to download.docker.com (download.docker.com)|54.239.169.41|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 28103678 (27M) [binary/octet-stream] Saving to: \u2018containerd.io_1.4.3-1_amd64.deb\u2019 containerd.io_1.4.3-1_amd64.d 100%[=================================================>] 26.80M 12.9MB/s in 2.1s 2021-01-13 16:07:11 (12.9 MB/s) - \u2018containerd.io_1.4.3-1_amd64.deb\u2019 saved [28103678/28103678] debian@debian:~$ ls -l total 27448 -rw-r--r-- 1 debian debian 28103678 Dec 29 00:38 containerd.io_1.4.3-1_amd64.deb \u5bf9\u5176\u7ba1\u7406\u65b9\u6cd5\u5982\u4e0b\uff1a","title":"dpkg \u5305\u7ba1\u7406\u5668"},{"location":"ch6/dpkg/#_1","text":"\u4f7f\u7528 dpkg -i : \u5373 --install \u53c2\u6570\u90fd\u6709 \u201c\u957f\u201d \u7248 (\u4e00\u4e2a\u6216\u591a\u4e2a\u5b57\uff0c\u524d\u7f6e\u4e24\u4e2a\u94fe\u63a5\u53f7) \u4e0e \u201c\u77ed\u201d \u7248 (\u4e00\u4e2a\u5b57\u6bcd\uff0c\u901a\u5e38\u662f\u957f\u7248\u5b57\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bcd\uff0c\u524d\u7f6e\u4e00\u4e2a\u94fe\u63a5\u53f7) \u4e24\u79cd\u5199\u6cd5\u3002\u8fd9\u662f POSIX \u6807\u51c6\u5e38\u89c1\u7684\u7528\u6cd5\u3002 $ sudo dpkg -i containerd.io_1.4.3-1_amd64.deb [sudo] password for debian: Selecting previously unselected package containerd.io. (Reading database ... 36792 files and directories currently installed.) Preparing to unpack containerd.io_1.4.3-1_amd64.deb ... Unpacking containerd.io (1.4.3-1) ... Setting up containerd.io (1.4.3-1) ... Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service \u2192 /lib/systemd/system/containerd.service. Processing triggers for man-db (2.8.5-2) ... \u6709\u65f6\u4f1a\u9047\u5230\u7279\u5b9a\u8f6f\u4ef6\u5305\u6240\u5305\u542b\u7684\u6587\u4ef6\u5df2\u7ecf\u5728\u53e6\u4e00\u4e2a\u8f6f\u4ef6\u5305\u4e2d\u88ab\u5b89\u88c5\uff0c\u5982\u679c\u80fd\u591f\u5b8c\u5168\u786e\u5b9a\u8fd9\u4e0d\u4f1a\u9020\u6210\u95ee\u9898\u7684\u8bdd\uff0c\u53ef\u4f7f\u7528 --force-overwrite \u53c2\u6570\u8fdb\u884c\u5f3a\u5236\u8986\u76d6\u3002 \u867d\u7136\u5b58\u5728\u8bb8\u591a --force-* \u53c2\u6570\uff0c\u4f46\u901a\u5e38\u90fd\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u901a\u5e38\u63a8\u8350\u4f7f\u7528 apt \u4ece\u8f6f\u4ef6\u6e90\u4e2d\u5b89\u88c5\u8f6f\u4ef6\u5305\u3002 \u5f53\u7136\uff0c\u5982\u679c\u4f60\u771f\u7684\u77e5\u9053\u4f60\u5728\u505a\u4ec0\u4e48\u7684\u8bdd\u5f53\u7136\u53ef\u4ee5\u5ffd\u7565\u8fd9\u53e5\u8bdd","title":"\u5b89\u88c5\u8f6f\u4ef6\u5305"},{"location":"ch6/dpkg/#_2","text":"\u6709\u4e24\u4e2a\u5378\u8f7d\u9009\u9879\uff0c\u5206\u522b\u4e3a -r ( --remove ) \u4e0e -P ( --purge )\uff0c\u524d\u8005\u4e3a\u5378\u8f7d\u8f6f\u4ef6\u5305\u4f46\u4fdd\u7559\u5e94\u7528\u914d\u7f6e\uff0c\u540e\u8005\u4e3a\u5b8c\u5168\u6e05\u9664\uff0c\u4e0d\u4fdd\u7559\u914d\u7f6e\u3002 \u9664\u53bb\u5b89\u88c5\u9700\u8981\u5b8c\u6574\u6307\u5b9a\u8981\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u7684\u6587\u4ef6\u540d\u4ee5\u5916\uff0c\u5176\u4ed6\u64cd\u4f5c\u53ea\u9700\u6307\u5b9a\u5305\u540d\u3002 debian@debian:~$ sudo dpkg -r containerd.io (Reading database ... 36808 files and directories currently installed.) Removing containerd.io (1.4.3-1) ... Processing triggers for man-db (2.8.5-2) ... debian@debian:~$ sudo dpkg -P containerd.io (Reading database ... 36794 files and directories currently installed.) Purging configuration files for containerd.io (1.4.3-1) ...","title":"\u5378\u8f7d\u8f6f\u4ef6\u5305"},{"location":"ch6/dpkg/#dpkg-deb","text":"\u4e00\u4e9b\u5e38\u7528\u53c2\u6570\u6574\u7406\u5982\u4e0b\uff1a \u77ed\u53c2\u6570 \u957f\u53c2\u6570 \u529f\u80fd -L --listfiles \u5217\u51fa\u8f6f\u4ef6\u5305\u4f1a\u5b89\u88c5\u7684\u6587\u4ef6\u5217\u8868 -S --search \u5217\u51fa\u54ea\u4e00\u4e2a\u5305\u5305\u542b\u6307\u5b9a\u7684\u6587\u4ef6 -l --list \u5217\u51fa\u672c\u673a\u4e0a\u5df2\u77e5\u7684\u5305\u53ca\u5b89\u88c5\u72b6\u6001 -s --status \u5217\u51fa\u5305\u5934 ( \u5373\u5305\u7684\u8be6\u7ec6\u4fe1\u606f ) -c --contents \u5217\u51fa\u5b89\u88c5\u5305\u5305\u542b\u7684\u6587\u4ef6 -I --info \u6307\u5b9a\u6587\u4ef6\u67e5\u770b\u5305\u4fe1\u606f \u4e00\u4e9b\u4f7f\u7528\u4f8b\uff1a debian@debian:~$ dpkg -c containerd.io_1.4.3-1_amd64.deb drwxr-xr-x root/root 0 2020-12-02 22:33 ./ drwxr-xr-x root/root 0 2020-12-02 22:33 ./etc/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./etc/containerd/ -rw-r--r-- root/root 886 2020-12-02 22:33 ./etc/containerd/config.toml drwxr-xr-x root/root 0 2020-12-02 22:33 ./lib/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./lib/systemd/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./lib/systemd/system/ -rw-r--r-- root/root 1263 2020-12-02 22:33 ./lib/systemd/system/containerd.service drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/bin/ -rwxr-xr-x root/root 57193712 2020-12-02 22:33 ./usr/bin/containerd -rwxr-xr-x root/root 7264728 2020-12-02 22:33 ./usr/bin/containerd-shim -rwxr-xr-x root/root 9945400 2020-12-02 22:33 ./usr/bin/containerd-shim-runc-v1 -rwxr-xr-x root/root 9966072 2020-12-02 22:33 ./usr/bin/containerd-shim-runc-v2 -rwxr-xr-x root/root 30444912 2020-12-02 22:33 ./usr/bin/ctr -rwxr-xr-x root/root 14437328 2020-12-02 22:33 ./usr/bin/runc drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/doc/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/doc/containerd.io/ -rw-r--r-- root/root 2168 2020-12-02 22:33 ./usr/share/doc/containerd.io/changelog.Debian.gz -rw-r--r-- root/root 1055 2020-12-02 22:33 ./usr/share/doc/containerd.io/copyright drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/man/ drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/man/man5/ -rw-r--r-- root/root 1991 2020-12-02 22:33 ./usr/share/man/man5/containerd-config.toml.5.gz drwxr-xr-x root/root 0 2020-12-02 22:33 ./usr/share/man/man8/ -rw-r--r-- root/root 544 2020-12-02 22:33 ./usr/share/man/man8/containerd-config.8.gz -rw-r--r-- root/root 786 2020-12-02 22:33 ./usr/share/man/man8/containerd.8.gz -rw-r--r-- root/root 4501 2020-12-02 22:33 ./usr/share/man/man8/ctr.8.gz debian@debian:~$ dpkg -L vim-common /. /etc /etc/vim /etc/vim/vimrc /usr /usr/bin /usr/bin/helpztags /usr/lib /usr/lib/mime /usr/lib/mime/packages /usr/lib/mime/packages/vim-common /usr/share /usr/share/applications /usr/share/applications/vim.desktop /usr/share/doc /usr/share/doc/vim-common /usr/share/doc/vim-common/NEWS.Debian.gz /usr/share/doc/vim-common/README.Debian /usr/share/doc/vim-common/changelog.Debian.gz /usr/share/doc/vim-common/changelog.gz /usr/share/doc/vim-common/copyright /usr/share/icons /usr/share/icons/hicolor /usr/share/icons/hicolor/48x48 /usr/share/icons/hicolor/48x48/apps /usr/share/icons/hicolor/48x48/apps/gvim.png /usr/share/icons/hicolor/scalable /usr/share/icons/hicolor/scalable/apps /usr/share/icons/hicolor/scalable/apps/gvim.svg /usr/share/icons/locolor /usr/share/icons/locolor/16x16 /usr/share/icons/locolor/16x16/apps /usr/share/icons/locolor/16x16/apps/gvim.png /usr/share/icons/locolor/32x32 /usr/share/icons/locolor/32x32/apps /usr/share/icons/locolor/32x32/apps/gvim.png /usr/share/lintian /usr/share/lintian/overrides /usr/share/lintian/overrides/vim-common /usr/share/man /usr/share/man/da /usr/share/man/da/man1 /usr/share/man/da/man1/vim.1.gz /usr/share/man/da/man1/vimdiff.1.gz /usr/share/man/de /usr/share/man/de/man1 /usr/share/man/de/man1/vim.1.gz /usr/share/man/fr /usr/share/man/fr/man1 /usr/share/man/fr/man1/vim.1.gz /usr/share/man/fr/man1/vimdiff.1.gz /usr/share/man/it /usr/share/man/it/man1 /usr/share/man/it/man1/vim.1.gz /usr/share/man/it/man1/vimdiff.1.gz /usr/share/man/ja /usr/share/man/ja/man1 /usr/share/man/ja/man1/vim.1.gz /usr/share/man/ja/man1/vimdiff.1.gz /usr/share/man/man1 /usr/share/man/man1/helpztags.1.gz /usr/share/man/man1/vim.1.gz /usr/share/man/man1/vimdiff.1.gz /usr/share/man/pl /usr/share/man/pl/man1 /usr/share/man/pl/man1/vim.1.gz /usr/share/man/pl/man1/vimdiff.1.gz /usr/share/man/ru /usr/share/man/ru/man1 /usr/share/man/ru/man1/vim.1.gz /usr/share/man/ru/man1/vimdiff.1.gz /usr/share/pixmaps /usr/share/pixmaps/gvim.svg /usr/share/pixmaps/vim-16.xpm /usr/share/pixmaps/vim-32.xpm /usr/share/pixmaps/vim-48.xpm /usr/share/vim /usr/share/vim/vim81 /usr/share/vim/vim81/debian.vim /var /var/lib /var/lib/vim /var/lib/vim/addons /usr/share/man/da/man1/rview.1.gz /usr/share/man/da/man1/rvim.1.gz /usr/share/man/de/man1/rview.1.gz /usr/share/man/de/man1/rvim.1.gz /usr/share/man/fr/man1/rview.1.gz /usr/share/man/fr/man1/rvim.1.gz /usr/share/man/it/man1/rview.1.gz /usr/share/man/it/man1/rvim.1.gz /usr/share/man/ja/man1/rview.1.gz /usr/share/man/ja/man1/rvim.1.gz /usr/share/man/man1/rview.1.gz /usr/share/man/man1/rvim.1.gz /usr/share/man/pl/man1/rview.1.gz /usr/share/man/pl/man1/rvim.1.gz /usr/share/man/ru/man1/rview.1.gz /usr/share/man/ru/man1/rvim.1.gz /usr/share/vim/vimrc debian@debian:~$ dpkg -S /bin/busybox busybox: /bin/busybox debian@debian:~$ dpkg -s coreutils Package: coreutils Essential: yes Status: install ok installed Priority: required Section: utils Installed-Size: 15719 Maintainer: Michael Stone <mstone@debian.org> Architecture: amd64 Multi-Arch: foreign Version: 8.30-3 Pre-Depends: libacl1 (>= 2.2.23), libattr1 (>= 1:2.4.44), libc6 (>= 2.28), libselinux1 (>= 2.1.13) Description: GNU core utilities This package contains the basic file, shell and text manipulation utilities which are expected to exist on every operating system. . Specifically, this package includes: arch base64 basename cat chcon chgrp chmod chown chroot cksum comm cp csplit cut date dd df dir dircolors dirname du echo env expand expr factor false flock fmt fold groups head hostid id install join link ln logname ls md5sum mkdir mkfifo mknod mktemp mv nice nl nohup nproc numfmt od paste pathchk pinky pr printenv printf ptx pwd readlink realpath rm rmdir runcon sha*sum seq shred sleep sort split stat stty sum sync tac tail tee test timeout touch tr true truncate tsort tty uname unexpand uniq unlink users vdir wc who whoami yes Homepage: http://gnu.org/software/coreutils debian@debian:~$ dpkg -l \"base*\" Desired=Unknown/Install/Remove/Purge/Hold | Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend |/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad) ||/ Name Version Architecture Description +++-==============-============-============-================================================== un base <none> <none> (no description available) un base-config <none> <none> (no description available) ii base-files 10.3+deb10u6 amd64 Debian base system miscellaneous files ii base-passwd 3.5.46 amd64 Debian base system master password and group files debian@debian:~$ dpkg -I containerd.io_1.4.3-1_amd64.deb new Debian package, version 2.0. size 28103678 bytes: control archive=1520 bytes. 28 bytes, 1 lines conffiles 381 bytes, 13 lines control 850 bytes, 13 lines md5sums 1345 bytes, 32 lines * postinst #!/bin/sh 643 bytes, 21 lines * postrm #!/bin/sh 225 bytes, 7 lines * prerm #!/bin/sh Package: containerd.io Version: 1.4.3-1 Architecture: amd64 Maintainer: Containerd team <help@containerd.io> Installed-Size: 126263 Depends: libc6 (>= 2.14), libseccomp2 (>= 2.3.0) Conflicts: containerd, runc Replaces: containerd, runc Provides: containerd, runc Section: devel Priority: optional Homepage: https://containerd.io Description: An open and reliable container runtime","title":"\u67e5\u8be2 dpkg \u6570\u636e\u5e93\uff0c\u68c0\u67e5 deb \u6587\u4ef6"},{"location":"ch7/journal/","text":"Journal \u4f20\u7edf\u7684\u7cfb\u7edf\u65e5\u5fd7\u901a\u5e38\u4f7f\u7528 Syslog \uff0cSystemd \u4f7f\u7528 Journal \u7edf\u4e00\u7ba1\u7406\u7cfb\u7edf\u65e5\u5fd7\u3002 Journal \u7684\u65e5\u5fd7\u662f\u4e8c\u8fdb\u5236\u5f62\u5f0f\u4fdd\u5b58\u5728\u786c\u76d8\u4e0a\u7684\uff0c\u8fd9\u70b9\u8ba9\u5f88\u591a\u4eba\u53cd\u5bf9\u4f7f\u7528 Journal\uff0c\u5c24\u5176\u662f\u5f53\u7cfb\u7edf\u5b95\u673a\u65f6\uff0c\u65e0\u6cd5\u65b9\u4fbf\u7684\u67e5\u770b\u51fa\u9519\u65e5\u5fd7\u3002\u4f46 Journal \u4ecd\u53ef\u4ee5\u914d\u5408 Syslog \u4f7f\u7528\uff0c\u53ef\u5c06 Journal \u7684\u65e5\u5fd7\u8f6c\u53d1\u81f3 Syslog\uff0c\u4e4b\u540e\u7528\u559c\u6b22\u7684\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\u3002 \u786e\u4fdd\u91c7\u7528\u65e5\u5fd7\u6c38\u4e45\u5b58\u50a8 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cJournal \u4f1a\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5728 /var/log/journal \uff0c\u4f46\u524d\u63d0\u662f\u8fd9\u4e2a\u76ee\u5f55\u5b58\u5728\uff0c\u5982\u679c\u6b64\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219 systemd \u4e0d\u4f1a\u81ea\u52a8\u521b\u5efa\u8be5\u6587\u4ef6\u5939\uff0c\u5e76\u5c06\u65e5\u5fd7\u8f93\u51fa\u81f3 /run/systemd/journal \uff0c\u6b64\u76ee\u5f55\u4e2d\u7684\u5185\u5bb9\u4f1a\u5728\u6bcf\u6b21\u5f00\u673a\u65f6\u88ab\u6e05\u7a7a\u3002 \u91cd\u5efa\u65e5\u5fd7\u4fdd\u5b58\u76ee\u5f55 \u91cd\u5efa\u76ee\u5f55\u5e94\u786e\u4fdd\u76ee\u5f55\u6b63\u786e\uff0c\u76ee\u5f55\u6743\u9650\u6b63\u786e\u3002 $ sudo mkdir -p /var/log/journal $ sudo chown -R :systemd-journal /var/log/journal $ sudo chmod 2775 /var/log/journal $ sudo systemctl restart systemd-journald.service \u67e5\u770b\u65e5\u5fd7 \u67e5\u770b Journal \u7684\u65e5\u5fd7\u987b\u4f7f\u7528 journalctl \u547d\u4ee4\u3002 \u5982\u4e0d\u52a0\u4efb\u4f55\u53c2\u6570\uff0c\u5219\u8f93\u51fa\u6240\u6709\u65e5\u5fd7\uff0c\u4f46\u4e00\u822c\u6211\u4eec\u9700\u8981\u5bf9\u65e5\u5fd7\u8fdb\u884c\u8fc7\u6ee4\uff0c journalctl \u63d0\u4f9b\u4e86\u8bb8\u591a\u8fc7\u6ee4\u65e5\u5fd7\u7684\u9009\u9879\uff0c\u4f46\u6700\u5e38\u7528\u7684\u662f\u8f93\u51fa\u7279\u5b9a systemd \u5355\u5143\u7684\u65e5\u5fd7\u4fe1\u606f\u3002 $ journalctl -eu ntp Jan 21 03:32:07 debian ntpd[3783]: Soliciting pool server 193.182.111.142 Jan 21 03:32:18 debian ntpd[3783]: Soliciting pool server 144.76.76.107 Jan 21 03:32:39 debian ntpd[3783]: Soliciting pool server 94.237.64.20 Jan 21 03:32:57 debian ntpd[3783]: Soliciting pool server 120.25.115.20 Jan 21 03:32:58 debian ntpd[3783]: Soliciting pool server 84.16.73.33 Jan 21 03:33:14 debian ntpd[3783]: Soliciting pool server 185.255.55.20 Jan 21 03:33:24 debian ntpd[3783]: Soliciting pool server 193.182.111.14 Jan 21 03:33:43 debian ntpd[3783]: Soliciting pool server 193.182.111.12 Jan 21 03:34:04 debian ntpd[3783]: Soliciting pool server 185.255.55.20 Jan 21 03:34:19 debian ntpd[3783]: Soliciting pool server 193.182.111.142 Jan 21 03:34:28 debian ntpd[3783]: Soliciting pool server 144.76.76.107 Jan 21 03:34:48 debian ntpd[3783]: Soliciting pool server 5.79.108.34 Jan 21 03:35:10 debian ntpd[3783]: Soliciting pool server 162.159.200.123 Jan 21 03:39:09 debian ntpd[3783]: 122.117.253.246 local addr 192.168.50.157 -> <null> Jan 21 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 25 days Jan 22 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 26 days Jan 23 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 27 days Jan 24 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 28 days Jan 25 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 29 days Jan 26 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 30 days Jan 27 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 31 days Jan 28 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 32 days Jan 29 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 33 days Jan 30 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 34 days Jan 31 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 35 days Feb 01 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 36 days Feb 02 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 37 days Feb 03 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 38 days Feb 04 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 39 days \u5e38\u7528\u53c2\u6570\u8868\uff1a -f \u53ea\u663e\u793a\u6700\u8fd1\u7684\u65e5\u5fd7\u4fe1\u606f\uff0c\u53e6\u5916\uff0c\u5f53\u65b0\u7684\u65e5\u5fd7\u88ab\u5199\u5165\u65f6\u4f1a\u81ea\u52a8\u663e\u793a ( \u7c7b\u4f3c\u4e8e tail ) -e \u663e\u793a\u4fe1\u606f\u5e76\u8df3\u8f6c\u5230\u65e5\u5fd7\u7ed3\u5c3e\uff0c\u53ef\u76f4\u63a5\u770b\u5230\u6700\u8fd1\u7684\u51e0\u6761\u65e5\u5fd7 -r \u4ee5\u53cd\u5411\u987a\u5e8f\u663e\u793a\u65e5\u5fd7 -k \u53ea\u663e\u793a\u5185\u6838\u4fe1\u606f -u \u53ea\u663e\u793a\u6307\u5b9a\u7684 systemd \u5355\u5143\u4fe1\u606f \u914d\u7f6e\u6587\u4ef6\u76f8\u5173 \u5bf9 Journald \u7684\u66f4\u591a\u914d\u7f6e\u987b\u4fee\u6539 /etc/systemd/journald.conf \uff0c\u53ef\u67e5\u770b man 5 journald.conf \u83b7\u53d6\u5b8c\u6574\u4fe1\u606f\uff0c\u6bcf\u6b21\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u987b\u91cd\u542f\u670d\u52a1\uff1a $ sudo systemctl restart systemd-journald \u9650\u5236\u65e5\u5fd7\u4fdd\u5b58\u5927\u5c0f \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cJournald \u5c06\u65e5\u5fd7\u6700\u5927\u4fdd\u5b58\u5bb9\u91cf\u8bbe\u5b9a\u4e3a\u6574\u4e2a\u78c1\u76d8\u5206\u533a\u7684 10%\uff0c\u4f46\u4e0a\u9650\u4e3a 4GB \uff0c\u5982\u9700\u8981\u6539\u53d8\u8fd9\u4e00\u9879\uff0c\u5219\u53d6\u6d88\u6ce8\u91ca\u5e76\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 SystemMaxUse \u9009\u9879\uff0c\u4f8b\u5982\u8981\u9650\u5236\u6700\u591a\u4f7f\u7528 50MB\uff0c\u5219\u8bbe\u5b9a\u4e3a\uff1a SystemMaxUse=50M \u5c06\u65e5\u5fd7\u8f6c\u53d1\u81f3 Syslog Journald \u53ef\u4ee5\u4e0e Syslog \u5171\u5b58\u4e14\u540c\u65f6\u5de5\u4f5c\uff0c\u5e76\u4e14\u5411\u4e0b\u517c\u5bb9\u3002 \u8981\u5c06 Journald \u6536\u96c6\u7684\u65e5\u5fd7\u8f6c\u53d1\u81f3 Syslog\uff0c\u9996\u5148\u4fdd\u8bc1\u7cfb\u7edf\u5b89\u88c5\u4e14\u542f\u52a8\u4e86 rsyslog \uff0c\u540e\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u3002 # \u5b89\u88c5 rsyslog $ sudo apt install rsyslog # \u542f\u52a8 rsyslog \u670d\u52a1 $ sudo systemctl enable --now rsyslog # \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 $ sudo vi /etc/systemd/journald.conf \u53d6\u6d88\u6ce8\u91ca\u5e76\u4fee\u6539\u4e0b\u9762\u4e00\u884c ForwardToSyslog=yes \u522b\u5fd8\u4e86\u91cd\u542f systemd-journald.service $ sudo systemctl restart systemd-journald \u9605\u8bfb\u8d44\u6599\uff1a journalctl\uff1a\u67e5\u8be2 systemd \u65e5\u8bb0 systemd (\u7b80\u4f53\u4e2d\u6587)/Journal (\u7b80\u4f53\u4e2d\u6587)","title":"Journal \u65e5\u5fd7"},{"location":"ch7/journal/#journal","text":"\u4f20\u7edf\u7684\u7cfb\u7edf\u65e5\u5fd7\u901a\u5e38\u4f7f\u7528 Syslog \uff0cSystemd \u4f7f\u7528 Journal \u7edf\u4e00\u7ba1\u7406\u7cfb\u7edf\u65e5\u5fd7\u3002 Journal \u7684\u65e5\u5fd7\u662f\u4e8c\u8fdb\u5236\u5f62\u5f0f\u4fdd\u5b58\u5728\u786c\u76d8\u4e0a\u7684\uff0c\u8fd9\u70b9\u8ba9\u5f88\u591a\u4eba\u53cd\u5bf9\u4f7f\u7528 Journal\uff0c\u5c24\u5176\u662f\u5f53\u7cfb\u7edf\u5b95\u673a\u65f6\uff0c\u65e0\u6cd5\u65b9\u4fbf\u7684\u67e5\u770b\u51fa\u9519\u65e5\u5fd7\u3002\u4f46 Journal \u4ecd\u53ef\u4ee5\u914d\u5408 Syslog \u4f7f\u7528\uff0c\u53ef\u5c06 Journal \u7684\u65e5\u5fd7\u8f6c\u53d1\u81f3 Syslog\uff0c\u4e4b\u540e\u7528\u559c\u6b22\u7684\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\u3002","title":"Journal"},{"location":"ch7/journal/#_1","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cJournal \u4f1a\u5c06\u65e5\u5fd7\u4fdd\u5b58\u5728 /var/log/journal \uff0c\u4f46\u524d\u63d0\u662f\u8fd9\u4e2a\u76ee\u5f55\u5b58\u5728\uff0c\u5982\u679c\u6b64\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219 systemd \u4e0d\u4f1a\u81ea\u52a8\u521b\u5efa\u8be5\u6587\u4ef6\u5939\uff0c\u5e76\u5c06\u65e5\u5fd7\u8f93\u51fa\u81f3 /run/systemd/journal \uff0c\u6b64\u76ee\u5f55\u4e2d\u7684\u5185\u5bb9\u4f1a\u5728\u6bcf\u6b21\u5f00\u673a\u65f6\u88ab\u6e05\u7a7a\u3002","title":"\u786e\u4fdd\u91c7\u7528\u65e5\u5fd7\u6c38\u4e45\u5b58\u50a8"},{"location":"ch7/journal/#_2","text":"\u91cd\u5efa\u76ee\u5f55\u5e94\u786e\u4fdd\u76ee\u5f55\u6b63\u786e\uff0c\u76ee\u5f55\u6743\u9650\u6b63\u786e\u3002 $ sudo mkdir -p /var/log/journal $ sudo chown -R :systemd-journal /var/log/journal $ sudo chmod 2775 /var/log/journal $ sudo systemctl restart systemd-journald.service","title":"\u91cd\u5efa\u65e5\u5fd7\u4fdd\u5b58\u76ee\u5f55"},{"location":"ch7/journal/#_3","text":"\u67e5\u770b Journal \u7684\u65e5\u5fd7\u987b\u4f7f\u7528 journalctl \u547d\u4ee4\u3002 \u5982\u4e0d\u52a0\u4efb\u4f55\u53c2\u6570\uff0c\u5219\u8f93\u51fa\u6240\u6709\u65e5\u5fd7\uff0c\u4f46\u4e00\u822c\u6211\u4eec\u9700\u8981\u5bf9\u65e5\u5fd7\u8fdb\u884c\u8fc7\u6ee4\uff0c journalctl \u63d0\u4f9b\u4e86\u8bb8\u591a\u8fc7\u6ee4\u65e5\u5fd7\u7684\u9009\u9879\uff0c\u4f46\u6700\u5e38\u7528\u7684\u662f\u8f93\u51fa\u7279\u5b9a systemd \u5355\u5143\u7684\u65e5\u5fd7\u4fe1\u606f\u3002 $ journalctl -eu ntp Jan 21 03:32:07 debian ntpd[3783]: Soliciting pool server 193.182.111.142 Jan 21 03:32:18 debian ntpd[3783]: Soliciting pool server 144.76.76.107 Jan 21 03:32:39 debian ntpd[3783]: Soliciting pool server 94.237.64.20 Jan 21 03:32:57 debian ntpd[3783]: Soliciting pool server 120.25.115.20 Jan 21 03:32:58 debian ntpd[3783]: Soliciting pool server 84.16.73.33 Jan 21 03:33:14 debian ntpd[3783]: Soliciting pool server 185.255.55.20 Jan 21 03:33:24 debian ntpd[3783]: Soliciting pool server 193.182.111.14 Jan 21 03:33:43 debian ntpd[3783]: Soliciting pool server 193.182.111.12 Jan 21 03:34:04 debian ntpd[3783]: Soliciting pool server 185.255.55.20 Jan 21 03:34:19 debian ntpd[3783]: Soliciting pool server 193.182.111.142 Jan 21 03:34:28 debian ntpd[3783]: Soliciting pool server 144.76.76.107 Jan 21 03:34:48 debian ntpd[3783]: Soliciting pool server 5.79.108.34 Jan 21 03:35:10 debian ntpd[3783]: Soliciting pool server 162.159.200.123 Jan 21 03:39:09 debian ntpd[3783]: 122.117.253.246 local addr 192.168.50.157 -> <null> Jan 21 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 25 days Jan 22 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 26 days Jan 23 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 27 days Jan 24 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 28 days Jan 25 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 29 days Jan 26 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 30 days Jan 27 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 31 days Jan 28 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 32 days Jan 29 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 33 days Jan 30 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 34 days Jan 31 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 35 days Feb 01 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 36 days Feb 02 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 37 days Feb 03 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 38 days Feb 04 22:25:42 debian ntpd[3783]: leapsecond file ('/usr/share/zoneinfo/leap-seconds.list'): expired less than 39 days \u5e38\u7528\u53c2\u6570\u8868\uff1a -f \u53ea\u663e\u793a\u6700\u8fd1\u7684\u65e5\u5fd7\u4fe1\u606f\uff0c\u53e6\u5916\uff0c\u5f53\u65b0\u7684\u65e5\u5fd7\u88ab\u5199\u5165\u65f6\u4f1a\u81ea\u52a8\u663e\u793a ( \u7c7b\u4f3c\u4e8e tail ) -e \u663e\u793a\u4fe1\u606f\u5e76\u8df3\u8f6c\u5230\u65e5\u5fd7\u7ed3\u5c3e\uff0c\u53ef\u76f4\u63a5\u770b\u5230\u6700\u8fd1\u7684\u51e0\u6761\u65e5\u5fd7 -r \u4ee5\u53cd\u5411\u987a\u5e8f\u663e\u793a\u65e5\u5fd7 -k \u53ea\u663e\u793a\u5185\u6838\u4fe1\u606f -u \u53ea\u663e\u793a\u6307\u5b9a\u7684 systemd \u5355\u5143\u4fe1\u606f","title":"\u67e5\u770b\u65e5\u5fd7"},{"location":"ch7/journal/#_4","text":"\u5bf9 Journald \u7684\u66f4\u591a\u914d\u7f6e\u987b\u4fee\u6539 /etc/systemd/journald.conf \uff0c\u53ef\u67e5\u770b man 5 journald.conf \u83b7\u53d6\u5b8c\u6574\u4fe1\u606f\uff0c\u6bcf\u6b21\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u987b\u91cd\u542f\u670d\u52a1\uff1a $ sudo systemctl restart systemd-journald","title":"\u914d\u7f6e\u6587\u4ef6\u76f8\u5173"},{"location":"ch7/journal/#_5","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cJournald \u5c06\u65e5\u5fd7\u6700\u5927\u4fdd\u5b58\u5bb9\u91cf\u8bbe\u5b9a\u4e3a\u6574\u4e2a\u78c1\u76d8\u5206\u533a\u7684 10%\uff0c\u4f46\u4e0a\u9650\u4e3a 4GB \uff0c\u5982\u9700\u8981\u6539\u53d8\u8fd9\u4e00\u9879\uff0c\u5219\u53d6\u6d88\u6ce8\u91ca\u5e76\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 SystemMaxUse \u9009\u9879\uff0c\u4f8b\u5982\u8981\u9650\u5236\u6700\u591a\u4f7f\u7528 50MB\uff0c\u5219\u8bbe\u5b9a\u4e3a\uff1a SystemMaxUse=50M","title":"\u9650\u5236\u65e5\u5fd7\u4fdd\u5b58\u5927\u5c0f"},{"location":"ch7/journal/#syslog","text":"Journald \u53ef\u4ee5\u4e0e Syslog \u5171\u5b58\u4e14\u540c\u65f6\u5de5\u4f5c\uff0c\u5e76\u4e14\u5411\u4e0b\u517c\u5bb9\u3002 \u8981\u5c06 Journald \u6536\u96c6\u7684\u65e5\u5fd7\u8f6c\u53d1\u81f3 Syslog\uff0c\u9996\u5148\u4fdd\u8bc1\u7cfb\u7edf\u5b89\u88c5\u4e14\u542f\u52a8\u4e86 rsyslog \uff0c\u540e\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u3002 # \u5b89\u88c5 rsyslog $ sudo apt install rsyslog # \u542f\u52a8 rsyslog \u670d\u52a1 $ sudo systemctl enable --now rsyslog # \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 $ sudo vi /etc/systemd/journald.conf \u53d6\u6d88\u6ce8\u91ca\u5e76\u4fee\u6539\u4e0b\u9762\u4e00\u884c ForwardToSyslog=yes \u522b\u5fd8\u4e86\u91cd\u542f systemd-journald.service $ sudo systemctl restart systemd-journald \u9605\u8bfb\u8d44\u6599\uff1a journalctl\uff1a\u67e5\u8be2 systemd \u65e5\u8bb0 systemd (\u7b80\u4f53\u4e2d\u6587)/Journal (\u7b80\u4f53\u4e2d\u6587)","title":"\u5c06\u65e5\u5fd7\u8f6c\u53d1\u81f3 Syslog"},{"location":"ch7/target/","text":"Target \u5728\u8fc7\u53bb ( \u751a\u81f3\u5305\u62ec\u73b0\u5728 ) \u7684 *nix \u7cfb\u7edf\u4e2d\u5b58\u5728\u8fd0\u884c\u7ea7\u522b\u7684\u6982\u5ff5\u3002 systemd \u4f7f\u7528\u65b0\u7684\u76f8\u4f3c\u53c8\u4e0d\u540c\u7684\u6982\u5ff5\uff1a\u76ee\u6807 ( target ) \u53d6\u4ee3\u4e86\u8fc7\u53bb\u7684\u8fd0\u884c\u7ea7\u522b\u3002 \u76ee\u6807\u4e0d\u518d\u4f7f\u7528\u6570\u5b57\u8868\u793a\uff0c\u4e14\u53ef\u4ee5\u540c\u65f6\u542f\u7528\u591a\u4e2a\u3002\u4e14\u76ee\u6807\u95f4\u53ef\u4e92\u76f8\u7ee7\u627f\u3002 Systemd \u9ed8\u8ba4\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6a21\u4eff\u65e7\u5f0f\u6982\u5ff5\u7684\u76ee\u6807\u3002 \u67e5\u770b\u4e0e\u5207\u6362 \u867d\u7136\u65e7\u5f0f\u7684 runlevel \u547d\u4ee4\u4e0e telinit \u547d\u4ee4\u4ecd\u53ef\u7528\uff0c\u4f46\u5df2\u4e0d\u518d\u63a8\u8350\u4f7f\u7528\u4e86\u3002 \u67e5\u770b\u5f53\u524d\u76ee\u6807 \u4f7f\u7528\uff1a $ systemctl list-units --type=target UNIT LOAD ACTIVE SUB DESCRIPTION basic.target loaded active active Basic System cryptsetup.target loaded active active Local Encrypted Volumes getty.target loaded active active Login Prompts graphical.target loaded active active Graphical Interface local-fs-pre.target loaded active active Local File Systems (Pre) local-fs.target loaded active active Local File Systems multi-user.target loaded active active Multi-User System network.target loaded active active Network paths.target loaded active active Paths remote-fs.target loaded active active Remote File Systems slices.target loaded active active Slices sockets.target loaded active active Sockets swap.target loaded active active Swap sysinit.target loaded active active System Initialization time-sync.target loaded active active System Time Synchronized timers.target loaded active active Timers LOAD = Reflects whether the unit definition was properly loaded. ACTIVE = The high-level unit activation state, i.e. generalization of SUB. SUB = The low-level unit activation state, values depend on unit type. 16 loaded units listed. Pass --all to see loaded but inactive units, too. To show all installed unit files use 'systemctl list-unit-files'. \u4e0a\u6587\u5df2\u5199\u51fa\uff0c\u7531\u4e8e Systemd \u76ee\u6807\u7684\u6982\u5ff5\u4e0e\u65e7\u7684\u8fd0\u884c\u7ea7\u522b\u6982\u5ff5\u5e76\u4e0d\u5b8c\u5168\u76f8\u540c\uff0c\u6240\u4ee5\u5b58\u5728\u591a\u79cd\u5df2\u52a0\u8f7d\u7684\u76ee\u6807\u662f\u6b63\u5e38\u7684\u3002 \u8fd9\u4e2a\u4f8b\u5b50\u5145\u5206\u4f53\u73b0\u4e86 Systemd \u7684\u76ee\u6807\u95f4 \u7ee7\u627f \u7684\u5173\u7cfb\u3002 \u5207\u6362 \u8981\u5207\u6362\u5f53\u524d\u76ee\u6807\uff0c\u4f7f\u7528\uff1a $ # \u5207\u6362\u81f3\u5e26\u6709\u56fe\u5f62\u754c\u9762\u7684\u76ee\u6807 $ sudo systemctl isolate graphical.target Systemd \u7684\u76ee\u6807\u6709\u4e00\u90e8\u5206\u4e0e SysV \u8fd0\u884c\u7ea7\u522b\u4e00\u4e00\u5bf9\u5e94\uff0c\u53ef\u53c2\u7167\u4ee5\u4e0b\u8868\u683c\uff1a SysV \u8fd0\u884c\u7ea7\u522b Systemd \u76ee\u6807 \u6ce8\u91ca 0 runlevel0.target, poweroff.target \u4e2d\u65ad\u7cfb\u7edf ( halt ) 1, s, single runlevel1.target, rescue.target \u5355\u7528\u6237\u6a21\u5f0f 2, 4 runlevel2.target, runlevel4.target, multi-user.target \u7528\u6237\u81ea\u5b9a\u4e49\u8fd0\u884c\u7ea7\u522b\uff0c\u901a\u5e38\u8bc6\u522b\u4e3a\u7ea7\u522b3\u3002 3 runlevel3.target, multi-user.target \u591a\u7528\u6237\uff0c\u65e0\u56fe\u5f62\u754c\u9762\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7ec8\u7aef\u6216\u7f51\u7edc\u767b\u5f55\u3002 5 runlevel5.target, graphical.target \u591a\u7528\u6237\uff0c\u56fe\u5f62\u754c\u9762\u3002\u7ee7\u627f\u7ea7\u522b3\u7684\u670d\u52a1\uff0c\u5e76\u542f\u52a8\u56fe\u5f62\u754c\u9762\u670d\u52a1\u3002 6 runlevel6.target, reboot.target \u91cd\u542f emergency emergency.target \u6025\u6551\u6a21\u5f0f ( Emergency shell ) \u8981\u66f4\u6539\u5f00\u673a\u542f\u52a8\u7684\u9ed8\u8ba4\u76ee\u6807\uff0c\u4f7f\u7528\uff1a $ # \u8bbe\u7f6e\u5f00\u673a\u542f\u52a8\u81f3\u6587\u672c\u591a\u7528\u6237\u6a21\u5f0f $ sudo systemctl set-default multi-user.target $ # \u67e5\u770b\u5f53\u524d\u9ed8\u8ba4\u542f\u52a8\u76ee\u6807 $ systemctl get-default","title":"Target \u76ee\u6807"},{"location":"ch7/target/#target","text":"\u5728\u8fc7\u53bb ( \u751a\u81f3\u5305\u62ec\u73b0\u5728 ) \u7684 *nix \u7cfb\u7edf\u4e2d\u5b58\u5728\u8fd0\u884c\u7ea7\u522b\u7684\u6982\u5ff5\u3002 systemd \u4f7f\u7528\u65b0\u7684\u76f8\u4f3c\u53c8\u4e0d\u540c\u7684\u6982\u5ff5\uff1a\u76ee\u6807 ( target ) \u53d6\u4ee3\u4e86\u8fc7\u53bb\u7684\u8fd0\u884c\u7ea7\u522b\u3002 \u76ee\u6807\u4e0d\u518d\u4f7f\u7528\u6570\u5b57\u8868\u793a\uff0c\u4e14\u53ef\u4ee5\u540c\u65f6\u542f\u7528\u591a\u4e2a\u3002\u4e14\u76ee\u6807\u95f4\u53ef\u4e92\u76f8\u7ee7\u627f\u3002 Systemd \u9ed8\u8ba4\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6a21\u4eff\u65e7\u5f0f\u6982\u5ff5\u7684\u76ee\u6807\u3002","title":"Target"},{"location":"ch7/target/#_1","text":"\u867d\u7136\u65e7\u5f0f\u7684 runlevel \u547d\u4ee4\u4e0e telinit \u547d\u4ee4\u4ecd\u53ef\u7528\uff0c\u4f46\u5df2\u4e0d\u518d\u63a8\u8350\u4f7f\u7528\u4e86\u3002","title":"\u67e5\u770b\u4e0e\u5207\u6362"},{"location":"ch7/target/#_2","text":"\u4f7f\u7528\uff1a $ systemctl list-units --type=target UNIT LOAD ACTIVE SUB DESCRIPTION basic.target loaded active active Basic System cryptsetup.target loaded active active Local Encrypted Volumes getty.target loaded active active Login Prompts graphical.target loaded active active Graphical Interface local-fs-pre.target loaded active active Local File Systems (Pre) local-fs.target loaded active active Local File Systems multi-user.target loaded active active Multi-User System network.target loaded active active Network paths.target loaded active active Paths remote-fs.target loaded active active Remote File Systems slices.target loaded active active Slices sockets.target loaded active active Sockets swap.target loaded active active Swap sysinit.target loaded active active System Initialization time-sync.target loaded active active System Time Synchronized timers.target loaded active active Timers LOAD = Reflects whether the unit definition was properly loaded. ACTIVE = The high-level unit activation state, i.e. generalization of SUB. SUB = The low-level unit activation state, values depend on unit type. 16 loaded units listed. Pass --all to see loaded but inactive units, too. To show all installed unit files use 'systemctl list-unit-files'. \u4e0a\u6587\u5df2\u5199\u51fa\uff0c\u7531\u4e8e Systemd \u76ee\u6807\u7684\u6982\u5ff5\u4e0e\u65e7\u7684\u8fd0\u884c\u7ea7\u522b\u6982\u5ff5\u5e76\u4e0d\u5b8c\u5168\u76f8\u540c\uff0c\u6240\u4ee5\u5b58\u5728\u591a\u79cd\u5df2\u52a0\u8f7d\u7684\u76ee\u6807\u662f\u6b63\u5e38\u7684\u3002 \u8fd9\u4e2a\u4f8b\u5b50\u5145\u5206\u4f53\u73b0\u4e86 Systemd \u7684\u76ee\u6807\u95f4 \u7ee7\u627f \u7684\u5173\u7cfb\u3002","title":"\u67e5\u770b\u5f53\u524d\u76ee\u6807"},{"location":"ch7/target/#_3","text":"\u8981\u5207\u6362\u5f53\u524d\u76ee\u6807\uff0c\u4f7f\u7528\uff1a $ # \u5207\u6362\u81f3\u5e26\u6709\u56fe\u5f62\u754c\u9762\u7684\u76ee\u6807 $ sudo systemctl isolate graphical.target Systemd \u7684\u76ee\u6807\u6709\u4e00\u90e8\u5206\u4e0e SysV \u8fd0\u884c\u7ea7\u522b\u4e00\u4e00\u5bf9\u5e94\uff0c\u53ef\u53c2\u7167\u4ee5\u4e0b\u8868\u683c\uff1a SysV \u8fd0\u884c\u7ea7\u522b Systemd \u76ee\u6807 \u6ce8\u91ca 0 runlevel0.target, poweroff.target \u4e2d\u65ad\u7cfb\u7edf ( halt ) 1, s, single runlevel1.target, rescue.target \u5355\u7528\u6237\u6a21\u5f0f 2, 4 runlevel2.target, runlevel4.target, multi-user.target \u7528\u6237\u81ea\u5b9a\u4e49\u8fd0\u884c\u7ea7\u522b\uff0c\u901a\u5e38\u8bc6\u522b\u4e3a\u7ea7\u522b3\u3002 3 runlevel3.target, multi-user.target \u591a\u7528\u6237\uff0c\u65e0\u56fe\u5f62\u754c\u9762\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7ec8\u7aef\u6216\u7f51\u7edc\u767b\u5f55\u3002 5 runlevel5.target, graphical.target \u591a\u7528\u6237\uff0c\u56fe\u5f62\u754c\u9762\u3002\u7ee7\u627f\u7ea7\u522b3\u7684\u670d\u52a1\uff0c\u5e76\u542f\u52a8\u56fe\u5f62\u754c\u9762\u670d\u52a1\u3002 6 runlevel6.target, reboot.target \u91cd\u542f emergency emergency.target \u6025\u6551\u6a21\u5f0f ( Emergency shell ) \u8981\u66f4\u6539\u5f00\u673a\u542f\u52a8\u7684\u9ed8\u8ba4\u76ee\u6807\uff0c\u4f7f\u7528\uff1a $ # \u8bbe\u7f6e\u5f00\u673a\u542f\u52a8\u81f3\u6587\u672c\u591a\u7528\u6237\u6a21\u5f0f $ sudo systemctl set-default multi-user.target $ # \u67e5\u770b\u5f53\u524d\u9ed8\u8ba4\u542f\u52a8\u76ee\u6807 $ systemctl get-default","title":"\u5207\u6362"},{"location":"ch7/timers/","text":"Timers systemd \u81ea\u5e26\u5b9a\u65f6\u5668\u529f\u80fd\uff0c\u53ef\u7528\u6765\u53d6\u4ee3 cron \u6765\u6267\u884c\u8ba1\u5212\u4efb\u52a1\u3002 \u6bd4\u8d77 cron\uff0csystemd \u7684 timers \u5b58\u5728\u4e00\u4e9b\u4f18\u52bf\u5982\u4e0b\uff1a \u7b80\u5316\u8c03\u8bd5\uff0c systemctl \u53ef\u4ee5\u76f4\u63a5\u5217\u51fa\u9000\u51fa\u4ee3\u7801\uff0c\u65e5\u5fd7\uff0c\u4ee5\u53ca\u8ba1\u5212\u4efb\u52a1\u6267\u884c\u7684\u5386\u53f2 \u53ef\u4ee5\u914d\u7f6e\u4e3a\u8fd0\u884c\u5728\u7279\u5b9a\u73af\u5883\u4e2d \u53ef\u4ee5\u4f9d\u8d56\u5176\u4ed6 systemd \u5355\u5143 \u53ef\u4ee5\u5bf9\u8ba1\u5212\u4efb\u52a1\u7684 CPU \u4e0e\u5185\u5b58\u4f7f\u7528\u91cf\u8fdb\u884c\u9650\u5236 \u5bf9\u4e8e\u719f\u6089 cron \u7684\u4eba\u6765\u8bf4\uff0c\u53ef\u4ee5\u5b89\u88c5 systemd-cron \u8f6f\u4ef6\u5305\uff0c\u8fd9\u6837\u4f7f\u7528 crontab \u8bbe\u5b9a\u8ba1\u5212\u4efb\u52a1\u4f1a\u81ea\u52a8\u8f6c\u6362\u6210 .timer \u5e76\u7528 systemd \u7ba1\u7406\u3002 \u5b89\u88c5\u6b64\u8f6f\u4ef6\u5305\u4e4b\u540e\uff0c\u542f\u52a8 cron.target \uff0c\u5e76\u6b63\u5e38\u4f7f\u7528 crontab \u5373\u53ef\u3002\u6b64\u811a\u672c\u5c06\u81ea\u52a8\u5c06 cron \u914d\u7f6e\u8f6c\u6362\u6210 systemd \u811a\u672c\u3002 $ sudo apt install systemd-cron $ sudo systemctl enable cron.target $ sudo systemctl start cron.target \u5f53\u7136\u4e5f\u53ef\u4ee5\u624b\u5199 .timer \u6587\u4ef6\uff0c\u6ce8\u610f\uff0c\u6587\u4ef6\u540d\u5e94\u548c\u5bf9\u5e94\u7684 .service \u6587\u4ef6\u76f8\u540c\u3002 \u672c\u6587\u4e0d\u6253\u7b97\u8be6\u89e3 .timer \u6587\u4ef6\u7684\u5199\u6cd5\uff0c\u53ef\u67e5\u770b\u53c2\u8003\u6587\u732e\uff1a systemd.timer(5) man page systemd.time(7) man page Using systemd as a better cron","title":"Timers \u8ba1\u65f6\u5668"},{"location":"ch7/timers/#timers","text":"systemd \u81ea\u5e26\u5b9a\u65f6\u5668\u529f\u80fd\uff0c\u53ef\u7528\u6765\u53d6\u4ee3 cron \u6765\u6267\u884c\u8ba1\u5212\u4efb\u52a1\u3002 \u6bd4\u8d77 cron\uff0csystemd \u7684 timers \u5b58\u5728\u4e00\u4e9b\u4f18\u52bf\u5982\u4e0b\uff1a \u7b80\u5316\u8c03\u8bd5\uff0c systemctl \u53ef\u4ee5\u76f4\u63a5\u5217\u51fa\u9000\u51fa\u4ee3\u7801\uff0c\u65e5\u5fd7\uff0c\u4ee5\u53ca\u8ba1\u5212\u4efb\u52a1\u6267\u884c\u7684\u5386\u53f2 \u53ef\u4ee5\u914d\u7f6e\u4e3a\u8fd0\u884c\u5728\u7279\u5b9a\u73af\u5883\u4e2d \u53ef\u4ee5\u4f9d\u8d56\u5176\u4ed6 systemd \u5355\u5143 \u53ef\u4ee5\u5bf9\u8ba1\u5212\u4efb\u52a1\u7684 CPU \u4e0e\u5185\u5b58\u4f7f\u7528\u91cf\u8fdb\u884c\u9650\u5236 \u5bf9\u4e8e\u719f\u6089 cron \u7684\u4eba\u6765\u8bf4\uff0c\u53ef\u4ee5\u5b89\u88c5 systemd-cron \u8f6f\u4ef6\u5305\uff0c\u8fd9\u6837\u4f7f\u7528 crontab \u8bbe\u5b9a\u8ba1\u5212\u4efb\u52a1\u4f1a\u81ea\u52a8\u8f6c\u6362\u6210 .timer \u5e76\u7528 systemd \u7ba1\u7406\u3002 \u5b89\u88c5\u6b64\u8f6f\u4ef6\u5305\u4e4b\u540e\uff0c\u542f\u52a8 cron.target \uff0c\u5e76\u6b63\u5e38\u4f7f\u7528 crontab \u5373\u53ef\u3002\u6b64\u811a\u672c\u5c06\u81ea\u52a8\u5c06 cron \u914d\u7f6e\u8f6c\u6362\u6210 systemd \u811a\u672c\u3002 $ sudo apt install systemd-cron $ sudo systemctl enable cron.target $ sudo systemctl start cron.target \u5f53\u7136\u4e5f\u53ef\u4ee5\u624b\u5199 .timer \u6587\u4ef6\uff0c\u6ce8\u610f\uff0c\u6587\u4ef6\u540d\u5e94\u548c\u5bf9\u5e94\u7684 .service \u6587\u4ef6\u76f8\u540c\u3002 \u672c\u6587\u4e0d\u6253\u7b97\u8be6\u89e3 .timer \u6587\u4ef6\u7684\u5199\u6cd5\uff0c\u53ef\u67e5\u770b\u53c2\u8003\u6587\u732e\uff1a systemd.timer(5) man page systemd.time(7) man page Using systemd as a better cron","title":"Timers"},{"location":"ch7/unit/","text":"Unit Unit ( \u5355\u5143 ) \u662f Systemd \u7ba1\u7406\u7cfb\u7edf\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u5206\u4e3a\uff1a \u7cfb\u7edf\u670d\u52a1 ( .service ) \u6302\u8f7d\u70b9 ( .mount ) Sockets \u5957\u63a5\u5b57 ( .sockets ) \u7cfb\u7edf\u8bbe\u5907 ( .device ) \u4ea4\u6362\u5206\u533a ( .swap ) \u6587\u4ef6\u8def\u5f84 ( .path ) \u542f\u52a8\u76ee\u6807 ( .target ) \u8ba1\u65f6\u5668 ( .timer ) \u6700\u5e38\u7528\u7684\u4e3a\u7cfb\u7edf\u670d\u52a1\u5355\u5143\uff0c\u4f5c\u4e3a\u5b88\u62a4\u8fdb\u7a0b\u4f7f\u7528\u3002 \u901a\u5e38\u5728\u63a7\u5236\u5355\u5143\u65f6\u4f7f\u7528\u6587\u4ef6\u5168\u540d\uff0c\u4f46\u5728\u6307\u7cfb\u7edf\u670d\u52a1\u5355\u5143\u65f6\u53ef\u7701\u7565 .service \u6269\u5c55\u540d\u3002 systemctl \u63a7\u5236 systemd \u7684\u4e3b\u8981\u547d\u4ee4\u4e3a systemctl \uff0c\u6b64\u547d\u4ee4\u53ef\u7528\u4e8e\u67e5\u770b\u7cfb\u7edf\u72b6\u6001\u4ee5\u53ca\u7ba1\u7406\u7cfb\u7edf\u4e0e\u670d\u52a1\u3002 \u5e38\u7528\u7684\u5b50\u547d\u4ee4\u6709\uff1a start \u6fc0\u6d3b\u5355\u5143 stop \u505c\u6b62\u5355\u5143 restart \u91cd\u542f\u5355\u5143 reload \u5728\u4e0d\u91cd\u542f\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6 status \u8f93\u51fa\u5355\u5143\u8fd0\u884c\u72b6\u6001 enable \u8bbe\u7f6e\u5f00\u673a\u81ea\u542f disable \u53d6\u6d88\u5f00\u673a\u81ea\u542f is-enabled \u67e5\u770b\u662f\u5426\u8bbe\u4e3a\u5f00\u673a\u81ea\u542f cat \u67e5\u770b\u5355\u5143\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9 daemon-reload \u91cd\u65b0\u8f7d\u5165 systemd \u7cfb\u7edf\u914d\u7f6e\uff0c\u4f46\u4e0d\u4f1a\u91cd\u65b0\u52a0\u8f7d\u53d8\u66f4\u7684\u5355\u5143\u6587\u4ef6 \u4e00\u4e9b\u793a\u4f8b\uff1a # \u542f\u52a8 SSH \u670d\u52a1 $ sudo systemctl start ssh.service # \u5982\u8fd0\u884c\u6b63\u5e38\u4e0d\u4f1a\u6709\u989d\u5916\u63d0\u793a # \u67e5\u770b ntpd \u8fd0\u884c\u72b6\u6001 $ systemctl status ntp.service \u25cf ntp.service - Network Time Service Loaded: loaded (/lib/systemd/system/ntp.service; enabled; vendor preset: enabled) Active: active (running) since Tue 2021-01-12 22:25:41 CST; 2 weeks 5 days ago Docs: man:ntpd(8) Main PID: 3783 (ntpd) Tasks: 2 (limit: 2258) Memory: 2.1M CGroup: /system.slice/ntp.service \u2514\u25003783 /usr/sbin/ntpd -p /var/run/ntpd.pid -g -u 107:112 # \u8bbe\u7f6e open-vm-tools \u5f00\u673a\u81ea\u542f $ sudo systemctl enable open-vm-tools.service # \u91cd\u8f7d\u914d\u7f6e\u6587\u4ef6\uff0c\u5f53\u6dfb\u52a0\u65b0\u5355\u5143\u6587\u4ef6\u65f6\u987b\u6267\u884c $ sudo systemctl daemon-reload \u521b\u5efa\u6216\u4fee\u6539\u5355\u5143\u6587\u4ef6 \u521b\u5efa\u5355\u5143 systemd \u7684\u7cfb\u7edf\u7ea7\u5355\u5143\u653e\u5728\u4ee5\u4e0b\u4e24\u4e2a\u76ee\u5f55\u4e2d\uff1a /usr/lib/systemd/system/ \u8f6f\u4ef6\u5305\u5b89\u88c5\u7684\u5355\u5143 /etc/systemd/system/ \u81ea\u884c\u5b89\u88c5\u7684\u5355\u5143 systemd \u53ef\u4ee5\u4f7f\u7528\u7528\u6237\u6a21\u5f0f\u8fd0\u884c\uff0c\u5b58\u653e\u5355\u5143\u7684\u76ee\u5f55\u4e5f\u6709\u6240\u4e0d\u540c\u3002 \u4e66\u5199\u5355\u5143\u6309\u7167\u5176\u4ed6\u5355\u5143\u7684\u683c\u5f0f\u4eff\u5199\u5373\u53ef\uff0c\u4f8b\u5982\uff0c\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u5355\u5143\u5185\u5bb9\u5982\u4e0b\uff1a [Unit] # \u6307\u5b9a\u540d\u79f0 Description=Foo [Service] # \u8bbe\u7f6e\u542f\u52a8\u5355\u5143\u65f6\u6240\u8981\u542f\u52a8\u7684\u9879\u76ee\uff0c\u53ef\u4e3a\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u6216 Shell \u811a\u672c\u3002 # \u5fc5\u987b\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84\uff0c\u4f8b\u5982\u9700\u8981\u4f7f\u7528 Python \u811a\u672c\u9700\u8981\u5199\u6210 # /usr/bin/python3 /root/scripts.py ExecStart=/usr/sbin/foo-daemon [Install] # \u6307\u5b9a\u6b64\u5355\u5143\u5728\u54ea\u79cd target \u542f\u52a8 WantedBy=multi-user.target \u4fee\u6539 \u5982\u8981\u4fee\u6539\u8f6f\u4ef6\u5305\u5b89\u88c5\u540e\u9644\u5e26\u7684\u5355\u5143\uff0c\u6700\u597d\u4e0d\u8981\u5728\u539f\u59cb\u6587\u4ef6\u8fdb\u884c\u4fee\u6539\uff0c\u800c\u662f\u5728 /etc/systemd/system/<\u5355\u5143\u540d>.d/ \u76ee\u5f55\u4e2d\u65b0\u5efa *.conf \u6587\u4ef6\uff0c\u5728\u6587\u4ef6\u5185\u90e8\u5199\u5165\u8981\u65b0\u589e\u6216\u4fee\u6539\u7684\u53c2\u6570\u3002 \u6ce8\uff1a\u53ef\u80fd\u88ab\u591a\u6b21\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u5982 Execstart \u7b49\uff0c\u5728\u4fee\u6539\u524d\u9700\u8981\u5148\u7528\u4e00\u884c\u5c06\u53d8\u91cf\u5236\u7a7a \u5982\u8981\u4fee\u6539\u81ea\u884c\u5efa\u7acb\u7684\u5355\u5143\uff0c\u4f7f\u7528 systemctl edit \u5355\u5143\u540d \u5373\u53ef\u6253\u5f00\u7f16\u8f91\u5668\uff0c\u4fee\u6539\u5b8c\u6210\u540e\u4f1a\u81ea\u52a8\u91cd\u65b0\u52a0\u8f7d\u3002","title":"Unit \u5355\u5143"},{"location":"ch7/unit/#unit","text":"Unit ( \u5355\u5143 ) \u662f Systemd \u7ba1\u7406\u7cfb\u7edf\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u5206\u4e3a\uff1a \u7cfb\u7edf\u670d\u52a1 ( .service ) \u6302\u8f7d\u70b9 ( .mount ) Sockets \u5957\u63a5\u5b57 ( .sockets ) \u7cfb\u7edf\u8bbe\u5907 ( .device ) \u4ea4\u6362\u5206\u533a ( .swap ) \u6587\u4ef6\u8def\u5f84 ( .path ) \u542f\u52a8\u76ee\u6807 ( .target ) \u8ba1\u65f6\u5668 ( .timer ) \u6700\u5e38\u7528\u7684\u4e3a\u7cfb\u7edf\u670d\u52a1\u5355\u5143\uff0c\u4f5c\u4e3a\u5b88\u62a4\u8fdb\u7a0b\u4f7f\u7528\u3002 \u901a\u5e38\u5728\u63a7\u5236\u5355\u5143\u65f6\u4f7f\u7528\u6587\u4ef6\u5168\u540d\uff0c\u4f46\u5728\u6307\u7cfb\u7edf\u670d\u52a1\u5355\u5143\u65f6\u53ef\u7701\u7565 .service \u6269\u5c55\u540d\u3002","title":"Unit"},{"location":"ch7/unit/#systemctl","text":"\u63a7\u5236 systemd \u7684\u4e3b\u8981\u547d\u4ee4\u4e3a systemctl \uff0c\u6b64\u547d\u4ee4\u53ef\u7528\u4e8e\u67e5\u770b\u7cfb\u7edf\u72b6\u6001\u4ee5\u53ca\u7ba1\u7406\u7cfb\u7edf\u4e0e\u670d\u52a1\u3002 \u5e38\u7528\u7684\u5b50\u547d\u4ee4\u6709\uff1a start \u6fc0\u6d3b\u5355\u5143 stop \u505c\u6b62\u5355\u5143 restart \u91cd\u542f\u5355\u5143 reload \u5728\u4e0d\u91cd\u542f\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6 status \u8f93\u51fa\u5355\u5143\u8fd0\u884c\u72b6\u6001 enable \u8bbe\u7f6e\u5f00\u673a\u81ea\u542f disable \u53d6\u6d88\u5f00\u673a\u81ea\u542f is-enabled \u67e5\u770b\u662f\u5426\u8bbe\u4e3a\u5f00\u673a\u81ea\u542f cat \u67e5\u770b\u5355\u5143\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9 daemon-reload \u91cd\u65b0\u8f7d\u5165 systemd \u7cfb\u7edf\u914d\u7f6e\uff0c\u4f46\u4e0d\u4f1a\u91cd\u65b0\u52a0\u8f7d\u53d8\u66f4\u7684\u5355\u5143\u6587\u4ef6 \u4e00\u4e9b\u793a\u4f8b\uff1a # \u542f\u52a8 SSH \u670d\u52a1 $ sudo systemctl start ssh.service # \u5982\u8fd0\u884c\u6b63\u5e38\u4e0d\u4f1a\u6709\u989d\u5916\u63d0\u793a # \u67e5\u770b ntpd \u8fd0\u884c\u72b6\u6001 $ systemctl status ntp.service \u25cf ntp.service - Network Time Service Loaded: loaded (/lib/systemd/system/ntp.service; enabled; vendor preset: enabled) Active: active (running) since Tue 2021-01-12 22:25:41 CST; 2 weeks 5 days ago Docs: man:ntpd(8) Main PID: 3783 (ntpd) Tasks: 2 (limit: 2258) Memory: 2.1M CGroup: /system.slice/ntp.service \u2514\u25003783 /usr/sbin/ntpd -p /var/run/ntpd.pid -g -u 107:112 # \u8bbe\u7f6e open-vm-tools \u5f00\u673a\u81ea\u542f $ sudo systemctl enable open-vm-tools.service # \u91cd\u8f7d\u914d\u7f6e\u6587\u4ef6\uff0c\u5f53\u6dfb\u52a0\u65b0\u5355\u5143\u6587\u4ef6\u65f6\u987b\u6267\u884c $ sudo systemctl daemon-reload","title":"systemctl"},{"location":"ch7/unit/#_1","text":"","title":"\u521b\u5efa\u6216\u4fee\u6539\u5355\u5143\u6587\u4ef6"},{"location":"ch7/unit/#_2","text":"systemd \u7684\u7cfb\u7edf\u7ea7\u5355\u5143\u653e\u5728\u4ee5\u4e0b\u4e24\u4e2a\u76ee\u5f55\u4e2d\uff1a /usr/lib/systemd/system/ \u8f6f\u4ef6\u5305\u5b89\u88c5\u7684\u5355\u5143 /etc/systemd/system/ \u81ea\u884c\u5b89\u88c5\u7684\u5355\u5143 systemd \u53ef\u4ee5\u4f7f\u7528\u7528\u6237\u6a21\u5f0f\u8fd0\u884c\uff0c\u5b58\u653e\u5355\u5143\u7684\u76ee\u5f55\u4e5f\u6709\u6240\u4e0d\u540c\u3002 \u4e66\u5199\u5355\u5143\u6309\u7167\u5176\u4ed6\u5355\u5143\u7684\u683c\u5f0f\u4eff\u5199\u5373\u53ef\uff0c\u4f8b\u5982\uff0c\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u5355\u5143\u5185\u5bb9\u5982\u4e0b\uff1a [Unit] # \u6307\u5b9a\u540d\u79f0 Description=Foo [Service] # \u8bbe\u7f6e\u542f\u52a8\u5355\u5143\u65f6\u6240\u8981\u542f\u52a8\u7684\u9879\u76ee\uff0c\u53ef\u4e3a\u4e8c\u8fdb\u5236\u7a0b\u5e8f\u6216 Shell \u811a\u672c\u3002 # \u5fc5\u987b\u6307\u5b9a\u7edd\u5bf9\u8def\u5f84\uff0c\u4f8b\u5982\u9700\u8981\u4f7f\u7528 Python \u811a\u672c\u9700\u8981\u5199\u6210 # /usr/bin/python3 /root/scripts.py ExecStart=/usr/sbin/foo-daemon [Install] # \u6307\u5b9a\u6b64\u5355\u5143\u5728\u54ea\u79cd target \u542f\u52a8 WantedBy=multi-user.target","title":"\u521b\u5efa\u5355\u5143"},{"location":"ch7/unit/#_3","text":"\u5982\u8981\u4fee\u6539\u8f6f\u4ef6\u5305\u5b89\u88c5\u540e\u9644\u5e26\u7684\u5355\u5143\uff0c\u6700\u597d\u4e0d\u8981\u5728\u539f\u59cb\u6587\u4ef6\u8fdb\u884c\u4fee\u6539\uff0c\u800c\u662f\u5728 /etc/systemd/system/<\u5355\u5143\u540d>.d/ \u76ee\u5f55\u4e2d\u65b0\u5efa *.conf \u6587\u4ef6\uff0c\u5728\u6587\u4ef6\u5185\u90e8\u5199\u5165\u8981\u65b0\u589e\u6216\u4fee\u6539\u7684\u53c2\u6570\u3002 \u6ce8\uff1a\u53ef\u80fd\u88ab\u591a\u6b21\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u5982 Execstart \u7b49\uff0c\u5728\u4fee\u6539\u524d\u9700\u8981\u5148\u7528\u4e00\u884c\u5c06\u53d8\u91cf\u5236\u7a7a \u5982\u8981\u4fee\u6539\u81ea\u884c\u5efa\u7acb\u7684\u5355\u5143\uff0c\u4f7f\u7528 systemctl edit \u5355\u5143\u540d \u5373\u53ef\u6253\u5f00\u7f16\u8f91\u5668\uff0c\u4fee\u6539\u5b8c\u6210\u540e\u4f1a\u81ea\u52a8\u91cd\u65b0\u52a0\u8f7d\u3002","title":"\u4fee\u6539"},{"location":"ch8/basics/","text":"SSH SSH \u53ef\u4ee5\u8fdc\u7a0b\u8fde\u63a5\u8fdb\u884c\u5f00 Shell\uff0c\u4f20\u8f93\u6587\u4ef6\u7b49\u64cd\u4f5c\uff0c\u5176\u4e2d\u8fdc\u7a0b\u8fde\u63a5\u4e3b\u673a\u4f7f\u7528 ssh \uff0c\u800c\u6587\u4ef6\u4f20\u8f93\u4f7f\u7528 scp \u3002 SSH \u8fdc\u7a0b\u8fde\u63a5 \u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f\u8fde\u63a5\u8fdc\u7a0b\u8ba1\u7b97\u673a\uff1a $ ssh \u7528\u6237\u540d@\u8ba1\u7b97\u673a\u540d\u6216 IP \u5730\u5740 -p \u7aef\u53e3\u53f7 # \u5176\u4e2d\u82e5\u4f7f\u7528\u9ed8\u8ba4\u7684 22 \u53f7\u7aef\u53e3\u5219\u53ef\u7701\u7565\u7aef\u53e3\u53f7 # \u5982\uff1a # \u4f7f\u7528\u7528\u6237\u540d debian \u8fde\u63a5 192.168.50.153\uff0c\u7aef\u53e3\u53f7\u4e3a 22 $ ssh debian@192.168.50.153 # \u6216\uff0c\u4f7f\u7528 root \u8fde\u63a5 us.ddupan.top,\u7aef\u53e3\u53f7\u4e3a 1234 $ ssh root@us.ddupan.top -p 1234 \u9664\u53bb -p \u53c2\u6570\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u5e38\u7528\u53c2\u6570\uff0c\u5982\u6253\u5f00 X11 \u8f6c\u53d1\uff0c\u5efa\u7acb SSH \u96a7\u9053\u8f6c\u53d1\u7b49\uff1a \u53c2\u6570 \u8bf4\u660e -X \u6253\u5f00 X11 \u8f6c\u53d1 -L \u6253\u5f00\u4e00\u4e2a TCP \u672c\u5730\u8f6c\u53d1 -R \u6253\u5f00\u4e00\u4e2a TCP \u8fdc\u7a0b\u8f6c\u53d1 -J \u6309\u7167\u5148\u540e\u987a\u5e8f\u8fdb\u884c\u8fde\u63a5 ( \u4f7f\u7528\u8df3\u677f\u673a\u7684\u573a\u666f ) -T \u4e0d\u5206\u914d\u4f2a\u7ec8\u7aef (\u901a\u5e38\u4e0e -N \u53c2\u6570\u914d\u5408\u4f7f\u7528) -N \u4e0d\u91c7\u7528\u4ea4\u4e92\u63d0\u793a ( \u901a\u5e38\u4e0e -T \u53c2\u6570\u914d\u5408\u4f7f\u7528 ) TCP \u8f6c\u53d1 SSH \u53ef\u4ee5\u8f6c\u53d1\u4efb\u610f TCP \u6d41\u91cf\uff0c\u6709\u4e24\u79cd\u8f6c\u53d1\u65b9\u5f0f\uff0c\u672c\u5730\u8f6c\u53d1\u4e0e\u8fdc\u7a0b\u8f6c\u53d1 \u672c\u5730\u8f6c\u53d1\uff1a\u5728\u672c\u673a\u5f00\u4e00\u4e2a\u7aef\u53e3\uff0c\u5c06\u8fde\u63a5\u5230\u672c\u673a\u7684\u6b64\u7aef\u53e3\u7684\u6240\u6709 TCP \u6d41\u91cf\u8f6c\u53d1\u81f3\u8fdc\u7a0b\u76ee\u6807\u7aef\u53e3 \u8fdc\u7a0b\u8f6c\u53d1\uff1a\u5c06\u8fde\u63a5\u5230\u8fdc\u7a0b\u4e3b\u673a\u6307\u5b9a\u7aef\u53e3\u7684 TCP \u6d41\u91cf\u901a\u8fc7\u672c\u673a\u8f6c\u53d1\u81f3\u76ee\u6807 \u8fdc\u7a0b\u8f6c\u53d1\u53ef\u7528\u4e8e\u5c06 NAT \u540e\u7684\u4e3b\u673a\u6d41\u91cf\u8f6c\u53d1\u81f3\u4e00\u4e2a\u4e2d\u7ee7\u3002 \u53c2\u6570\u7684\u683c\u5f0f\u4e3a\uff1a <\u672c\u5730\u7aef\u53e3>:<\u8fdc\u7a0b\u76ee\u6807\u5730\u5740>:<\u8fdc\u7a0b\u7aef\u53e3> \u4f8b\u5982\uff1a $ ssh -TNL 8080:us.ddupan.top:8080 root@us.ddupan.top -p 1234 # \u5c06\u8fde\u63a5\u5230\u672c\u673a\u7684 8080 \u7aef\u53e3\u7684\u6d41\u91cf\u8f6c\u53d1\u81f3 us.ddupan.top \u7684 8080 \u7aef\u53e3\uff0c\u4e0d\u5206\u914d\u4f2a\u7ec8\u7aef\uff0c\u4e0d\u91c7\u7528\u4ea4\u4e92\u6a21\u5f0f \u5f53\u9700\u8981\u5f00\u673a\u542f\u52a8\uff0c\u6216\u8005\u5e38\u9a7b\u540e\u53f0\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 nohup \u6216\u4f5c\u4e3a service \u5355\u5143\u5199\u5165 systemd.","title":"\u57fa\u672c\u4f7f\u7528"},{"location":"ch8/basics/#ssh","text":"SSH \u53ef\u4ee5\u8fdc\u7a0b\u8fde\u63a5\u8fdb\u884c\u5f00 Shell\uff0c\u4f20\u8f93\u6587\u4ef6\u7b49\u64cd\u4f5c\uff0c\u5176\u4e2d\u8fdc\u7a0b\u8fde\u63a5\u4e3b\u673a\u4f7f\u7528 ssh \uff0c\u800c\u6587\u4ef6\u4f20\u8f93\u4f7f\u7528 scp \u3002","title":"SSH"},{"location":"ch8/basics/#ssh_1","text":"\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f\u8fde\u63a5\u8fdc\u7a0b\u8ba1\u7b97\u673a\uff1a $ ssh \u7528\u6237\u540d@\u8ba1\u7b97\u673a\u540d\u6216 IP \u5730\u5740 -p \u7aef\u53e3\u53f7 # \u5176\u4e2d\u82e5\u4f7f\u7528\u9ed8\u8ba4\u7684 22 \u53f7\u7aef\u53e3\u5219\u53ef\u7701\u7565\u7aef\u53e3\u53f7 # \u5982\uff1a # \u4f7f\u7528\u7528\u6237\u540d debian \u8fde\u63a5 192.168.50.153\uff0c\u7aef\u53e3\u53f7\u4e3a 22 $ ssh debian@192.168.50.153 # \u6216\uff0c\u4f7f\u7528 root \u8fde\u63a5 us.ddupan.top,\u7aef\u53e3\u53f7\u4e3a 1234 $ ssh root@us.ddupan.top -p 1234 \u9664\u53bb -p \u53c2\u6570\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u5e38\u7528\u53c2\u6570\uff0c\u5982\u6253\u5f00 X11 \u8f6c\u53d1\uff0c\u5efa\u7acb SSH \u96a7\u9053\u8f6c\u53d1\u7b49\uff1a \u53c2\u6570 \u8bf4\u660e -X \u6253\u5f00 X11 \u8f6c\u53d1 -L \u6253\u5f00\u4e00\u4e2a TCP \u672c\u5730\u8f6c\u53d1 -R \u6253\u5f00\u4e00\u4e2a TCP \u8fdc\u7a0b\u8f6c\u53d1 -J \u6309\u7167\u5148\u540e\u987a\u5e8f\u8fdb\u884c\u8fde\u63a5 ( \u4f7f\u7528\u8df3\u677f\u673a\u7684\u573a\u666f ) -T \u4e0d\u5206\u914d\u4f2a\u7ec8\u7aef (\u901a\u5e38\u4e0e -N \u53c2\u6570\u914d\u5408\u4f7f\u7528) -N \u4e0d\u91c7\u7528\u4ea4\u4e92\u63d0\u793a ( \u901a\u5e38\u4e0e -T \u53c2\u6570\u914d\u5408\u4f7f\u7528 )","title":"SSH \u8fdc\u7a0b\u8fde\u63a5"},{"location":"ch8/basics/#tcp","text":"SSH \u53ef\u4ee5\u8f6c\u53d1\u4efb\u610f TCP \u6d41\u91cf\uff0c\u6709\u4e24\u79cd\u8f6c\u53d1\u65b9\u5f0f\uff0c\u672c\u5730\u8f6c\u53d1\u4e0e\u8fdc\u7a0b\u8f6c\u53d1 \u672c\u5730\u8f6c\u53d1\uff1a\u5728\u672c\u673a\u5f00\u4e00\u4e2a\u7aef\u53e3\uff0c\u5c06\u8fde\u63a5\u5230\u672c\u673a\u7684\u6b64\u7aef\u53e3\u7684\u6240\u6709 TCP \u6d41\u91cf\u8f6c\u53d1\u81f3\u8fdc\u7a0b\u76ee\u6807\u7aef\u53e3 \u8fdc\u7a0b\u8f6c\u53d1\uff1a\u5c06\u8fde\u63a5\u5230\u8fdc\u7a0b\u4e3b\u673a\u6307\u5b9a\u7aef\u53e3\u7684 TCP \u6d41\u91cf\u901a\u8fc7\u672c\u673a\u8f6c\u53d1\u81f3\u76ee\u6807 \u8fdc\u7a0b\u8f6c\u53d1\u53ef\u7528\u4e8e\u5c06 NAT \u540e\u7684\u4e3b\u673a\u6d41\u91cf\u8f6c\u53d1\u81f3\u4e00\u4e2a\u4e2d\u7ee7\u3002 \u53c2\u6570\u7684\u683c\u5f0f\u4e3a\uff1a <\u672c\u5730\u7aef\u53e3>:<\u8fdc\u7a0b\u76ee\u6807\u5730\u5740>:<\u8fdc\u7a0b\u7aef\u53e3> \u4f8b\u5982\uff1a $ ssh -TNL 8080:us.ddupan.top:8080 root@us.ddupan.top -p 1234 # \u5c06\u8fde\u63a5\u5230\u672c\u673a\u7684 8080 \u7aef\u53e3\u7684\u6d41\u91cf\u8f6c\u53d1\u81f3 us.ddupan.top \u7684 8080 \u7aef\u53e3\uff0c\u4e0d\u5206\u914d\u4f2a\u7ec8\u7aef\uff0c\u4e0d\u91c7\u7528\u4ea4\u4e92\u6a21\u5f0f \u5f53\u9700\u8981\u5f00\u673a\u542f\u52a8\uff0c\u6216\u8005\u5e38\u9a7b\u540e\u53f0\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 nohup \u6216\u4f5c\u4e3a service \u5355\u5143\u5199\u5165 systemd.","title":"TCP \u8f6c\u53d1"},{"location":"ch8/config/","text":"SSH \u670d\u52a1\u7aef\u914d\u7f6e sshd \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e3a /etc/ssh/sshd_config \u5176\u4e2d\u5e38\u7528\u5230\u7684\u914d\u7f6e\u9879\u76ee\u4e3a\uff1a Ports \u914d\u7f6e\u7aef\u53e3 ListenAddress \u914d\u7f6e\u5728\u54ea\u4e2a\u7f51\u7edc\u76d1\u542c PermitRootLogin \u662f\u5426\u5141\u8bb8 root \u8d26\u6237\u767b\u5f55 AllowUsers \u5141\u8bb8\u767b\u5f55\u7684\u7528\u6237\u4e0e\u4e3b\u673a \u8fd8\u6709\u4e00\u4e9b\u529f\u80fd\u662f\u5426\u5f00\u653e\u7684\u9879\u76ee\u4e0d\u518d\u4e00\u4e00\u4ecb\u7ecd ListenAddress \u8bf7\u914d\u7f6e\u672c\u673a\u7f51\u5361\u63a5\u53e3\uff0c\u6ce8\u610f \u76d1\u542c \u5730\u5740\u4e0e\u5ba2\u6237\u7aef\u5730\u5740\u7684\u533a\u522b PermitRootLogin \u9ed8\u8ba4\u8bbe\u5b9a\u4e3a\u4e0d\u5141\u8bb8 root \u7528\u6237\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\uff0c\u5982\u9700\u8981\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\u8bf7\u6539\u4e3a no AllowUsers \u53ef\u586b\u5165\u4e3b\u673a\uff0c\u5f62\u5982 root@10.10.10.51 \uff0c\u610f\u4e3a\u5141\u8bb8 root \u8d26\u6237\u4ece 10.10.10.51 \u767b\u5f55\uff0c\u4e5f\u53ef\u53ea\u5199\u7528\u6237\uff0c\u610f\u4e3a\u5141\u8bb8\u7528\u6237\u4ece\u4efb\u4f55\u5730\u65b9\u767b\u5f55\u3002 \u7c7b\u4f3c\u7684\uff0c\u4e5f\u5b58\u5728 DenyUsers \u7684\u8bbe\u7f6e\u9879\u76ee\uff0c\u4f46\u4e8c\u8005\u53ea\u80fd\u7528\u4e00\u4e2a\u3002 \u5982\u60f3\u7981\u6b62\u4e00\u90e8\u5206\u5730\u5740\u767b\u5f55\uff0c\u9664\u4e86\u4f7f\u7528 sshd \u914d\u7f6e\u6587\u4ef6\u5916\uff0c\u4e5f\u53ef\u914d\u5408\u4f7f\u7528 /etc/hosts.allow \u4e0e /etc/hosts.deny \u4ed6\u4eec\u5206\u522b\u4ee3\u8868\u5141\u8bb8\u7684\u4e3b\u673a\u4e0e\u7981\u6b62\u7684\u4e3b\u673a\u3002 hosts.allow \u4e0e hosts.deny \u4f7f\u7528\u7684\u662f\u7cfb\u7edf\u5e95\u5c42\u7684 TCP wrapper\uff0c\u7c7b\u4f3c\u4e8e\u9632\u706b\u5899\uff0c\u56e0\u6b64\u4ed6\u4e0d\u4f46\u80fd\u5bf9 SSH \u8fdb\u884c\u9650\u5236\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u9650\u5236\u5f88\u591a\u670d\u52a1\u3002 \u8bed\u6cd5\u89c4\u5219\u6bd4\u8f83\u7279\u6b8a\uff0c\u8d34\u4e0a man \u624b\u518c\uff1a man 5 hosts_options man 5 hosts_access \u89c4\u5219\u57fa\u672c\u683c\u5f0f\u4e3a\uff1a daemon, daemon, ...: client, client, ...: option daemon \u4ee3\u8868\u8981\u76d1\u63a7\u7684\u670d\u52a1\uff0c\u53ef\u7528\u9017\u53f7\u9694\u5f00\uff0c\u6216\u7528 ALL \u4ee3\u8868\u6240\u6709 client \u4ee3\u8868\u8981\u767b\u5f55\u7684\u5ba2\u6237\u7aef\u4e3b\u673a\uff0c\u53ef\u4e3a\u4e3b\u673a\u540d\uff0cIP/CIDR\uff0c\u5355\u72ec\u7684 IP \u6216\u57df\u540d\uff0c\u4e5f\u53ef\u7528 ALL \u4ee3\u8868\u6240\u6709\u4efb\u610f\u5ba2\u6237\u7aef \u6709 allow \uff0c deny \uff0c except \u4ee3\u8868\u5141\u8bb8\uff0c\u62d2\u7edd\u4ee5\u53ca\u9664\u53bb\uff0c except \u50cf\u8fd9\u4e48\u5199\uff1a sshd:ALL except 10.10.10.51\uff1adeny \u610f\u4e3a\uff1a\u9664\u4e86 10.10.10.51 \u4ee5\u5916\uff0c\u6240\u6709\u5176\u4ed6\u4e3b\u673a\u7981\u6b62\u8bbf\u95ee sshd \u670d\u52a1\u3002","title":"\u4fee\u6539\u914d\u7f6e"},{"location":"ch8/config/#ssh","text":"sshd \u670d\u52a1\u7684\u914d\u7f6e\u6587\u4ef6\u4e3a /etc/ssh/sshd_config \u5176\u4e2d\u5e38\u7528\u5230\u7684\u914d\u7f6e\u9879\u76ee\u4e3a\uff1a Ports \u914d\u7f6e\u7aef\u53e3 ListenAddress \u914d\u7f6e\u5728\u54ea\u4e2a\u7f51\u7edc\u76d1\u542c PermitRootLogin \u662f\u5426\u5141\u8bb8 root \u8d26\u6237\u767b\u5f55 AllowUsers \u5141\u8bb8\u767b\u5f55\u7684\u7528\u6237\u4e0e\u4e3b\u673a \u8fd8\u6709\u4e00\u4e9b\u529f\u80fd\u662f\u5426\u5f00\u653e\u7684\u9879\u76ee\u4e0d\u518d\u4e00\u4e00\u4ecb\u7ecd ListenAddress \u8bf7\u914d\u7f6e\u672c\u673a\u7f51\u5361\u63a5\u53e3\uff0c\u6ce8\u610f \u76d1\u542c \u5730\u5740\u4e0e\u5ba2\u6237\u7aef\u5730\u5740\u7684\u533a\u522b PermitRootLogin \u9ed8\u8ba4\u8bbe\u5b9a\u4e3a\u4e0d\u5141\u8bb8 root \u7528\u6237\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\uff0c\u5982\u9700\u8981\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\u8bf7\u6539\u4e3a no AllowUsers \u53ef\u586b\u5165\u4e3b\u673a\uff0c\u5f62\u5982 root@10.10.10.51 \uff0c\u610f\u4e3a\u5141\u8bb8 root \u8d26\u6237\u4ece 10.10.10.51 \u767b\u5f55\uff0c\u4e5f\u53ef\u53ea\u5199\u7528\u6237\uff0c\u610f\u4e3a\u5141\u8bb8\u7528\u6237\u4ece\u4efb\u4f55\u5730\u65b9\u767b\u5f55\u3002 \u7c7b\u4f3c\u7684\uff0c\u4e5f\u5b58\u5728 DenyUsers \u7684\u8bbe\u7f6e\u9879\u76ee\uff0c\u4f46\u4e8c\u8005\u53ea\u80fd\u7528\u4e00\u4e2a\u3002 \u5982\u60f3\u7981\u6b62\u4e00\u90e8\u5206\u5730\u5740\u767b\u5f55\uff0c\u9664\u4e86\u4f7f\u7528 sshd \u914d\u7f6e\u6587\u4ef6\u5916\uff0c\u4e5f\u53ef\u914d\u5408\u4f7f\u7528 /etc/hosts.allow \u4e0e /etc/hosts.deny \u4ed6\u4eec\u5206\u522b\u4ee3\u8868\u5141\u8bb8\u7684\u4e3b\u673a\u4e0e\u7981\u6b62\u7684\u4e3b\u673a\u3002 hosts.allow \u4e0e hosts.deny \u4f7f\u7528\u7684\u662f\u7cfb\u7edf\u5e95\u5c42\u7684 TCP wrapper\uff0c\u7c7b\u4f3c\u4e8e\u9632\u706b\u5899\uff0c\u56e0\u6b64\u4ed6\u4e0d\u4f46\u80fd\u5bf9 SSH \u8fdb\u884c\u9650\u5236\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u9650\u5236\u5f88\u591a\u670d\u52a1\u3002 \u8bed\u6cd5\u89c4\u5219\u6bd4\u8f83\u7279\u6b8a\uff0c\u8d34\u4e0a man \u624b\u518c\uff1a man 5 hosts_options man 5 hosts_access \u89c4\u5219\u57fa\u672c\u683c\u5f0f\u4e3a\uff1a daemon, daemon, ...: client, client, ...: option daemon \u4ee3\u8868\u8981\u76d1\u63a7\u7684\u670d\u52a1\uff0c\u53ef\u7528\u9017\u53f7\u9694\u5f00\uff0c\u6216\u7528 ALL \u4ee3\u8868\u6240\u6709 client \u4ee3\u8868\u8981\u767b\u5f55\u7684\u5ba2\u6237\u7aef\u4e3b\u673a\uff0c\u53ef\u4e3a\u4e3b\u673a\u540d\uff0cIP/CIDR\uff0c\u5355\u72ec\u7684 IP \u6216\u57df\u540d\uff0c\u4e5f\u53ef\u7528 ALL \u4ee3\u8868\u6240\u6709\u4efb\u610f\u5ba2\u6237\u7aef \u6709 allow \uff0c deny \uff0c except \u4ee3\u8868\u5141\u8bb8\uff0c\u62d2\u7edd\u4ee5\u53ca\u9664\u53bb\uff0c except \u50cf\u8fd9\u4e48\u5199\uff1a sshd:ALL except 10.10.10.51\uff1adeny \u610f\u4e3a\uff1a\u9664\u4e86 10.10.10.51 \u4ee5\u5916\uff0c\u6240\u6709\u5176\u4ed6\u4e3b\u673a\u7981\u6b62\u8bbf\u95ee sshd \u670d\u52a1\u3002","title":"SSH \u670d\u52a1\u7aef\u914d\u7f6e"},{"location":"ch8/ssh-keygen/","text":"SSH \u5bc6\u94a5\u5bf9 SSH \u4e0d\u4ec5\u652f\u6301\u5bc6\u7801\u8ba4\u8bc1\uff0c\u540c\u65f6\u652f\u6301\u4f7f\u7528\u5bc6\u94a5\u5bf9\u8ba4\u8bc1\uff0c\u8fd9\u79cd\u8ba4\u8bc1\u65b9\u5f0f\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\uff0c\u6bd4\u8d77\u5bc6\u7801\u65b9\u5f0f\u767b\u5f55\u66f4\u52a0\u5b89\u5168\uff0c\u4e14\u65e0\u9700\u6bcf\u6b21\u767b\u5f55\u65f6\u8f93\u5165\u5bc6\u7801\u3002 \u4f7f\u7528 ssh-keygen \u5de5\u5177\u5373\u53ef\u751f\u6210\u4e00\u5bf9\u5bc6\u94a5\u5bf9\uff0c\u9ed8\u8ba4\u4fdd\u5b58\u5728 ~/.ssh/ \u76ee\u5f55\u4e0b\uff0c\u53ef\u53d1\u73b0 id_rsa \u6587\u4ef6\u4e0e id_rsa.pub \u6587\u4ef6\u3002 \u5176\u4e2d id_rsa \u4e3a\u79c1\u94a5\uff0c\u9700\u59a5\u5584\u4fdd\u5b58\uff0c id_rsa.pub \u4e3a\u516c\u94a5\uff0c\u63a5\u4e0b\u6765\u5c06\u4f1a\u628a\u516c\u94a5\u4f20\u9001\u5230\u8981\u8bbf\u95ee\u7684\u4e3b\u673a\u4e0a\u3002 SSH \u63d0\u4f9b\u4e86\u4e00\u4e2a\u5de5\u5177\u540d\u4e3a ssh-copy-id \u53ef\u4ee5\u65b9\u4fbf\u7684\u5b8c\u6210\u4f20\u8f93\u516c\u94a5\u5230\u5bf9\u7aef\u4e3b\u673a\u7684\u5de5\u4f5c\u3002 \u4f8b\u5982 \u8bbf\u95ee 192.168.100.10 $ ssh-copy-id -P 22 username@192.168.100.10 $ # \u6b63\u5e38 SSH \u5373\u53ef\uff0c\u73b0\u5728\u4e0d\u9700\u8981\u5bc6\u7801 \u8fd9\u5c31\u662f\u6240\u8c13\u7684\u514d\u5bc6\u767b\u5f55 \u82e5\u8981\u7981\u7528\u5bc6\u7801\u767b\u5f55\uff0c\u4fee\u6539 /etc/ssh/sshd_config \u67e5\u627e PasswordAuthentication \u4fee\u6539\u4e3a no \u540e\u91cd\u542f ssh \u670d\u52a1\u3002","title":"\u79d8\u94a5\u767b\u5f55"},{"location":"ch8/ssh-keygen/#ssh","text":"SSH \u4e0d\u4ec5\u652f\u6301\u5bc6\u7801\u8ba4\u8bc1\uff0c\u540c\u65f6\u652f\u6301\u4f7f\u7528\u5bc6\u94a5\u5bf9\u8ba4\u8bc1\uff0c\u8fd9\u79cd\u8ba4\u8bc1\u65b9\u5f0f\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\uff0c\u6bd4\u8d77\u5bc6\u7801\u65b9\u5f0f\u767b\u5f55\u66f4\u52a0\u5b89\u5168\uff0c\u4e14\u65e0\u9700\u6bcf\u6b21\u767b\u5f55\u65f6\u8f93\u5165\u5bc6\u7801\u3002 \u4f7f\u7528 ssh-keygen \u5de5\u5177\u5373\u53ef\u751f\u6210\u4e00\u5bf9\u5bc6\u94a5\u5bf9\uff0c\u9ed8\u8ba4\u4fdd\u5b58\u5728 ~/.ssh/ \u76ee\u5f55\u4e0b\uff0c\u53ef\u53d1\u73b0 id_rsa \u6587\u4ef6\u4e0e id_rsa.pub \u6587\u4ef6\u3002 \u5176\u4e2d id_rsa \u4e3a\u79c1\u94a5\uff0c\u9700\u59a5\u5584\u4fdd\u5b58\uff0c id_rsa.pub \u4e3a\u516c\u94a5\uff0c\u63a5\u4e0b\u6765\u5c06\u4f1a\u628a\u516c\u94a5\u4f20\u9001\u5230\u8981\u8bbf\u95ee\u7684\u4e3b\u673a\u4e0a\u3002 SSH \u63d0\u4f9b\u4e86\u4e00\u4e2a\u5de5\u5177\u540d\u4e3a ssh-copy-id \u53ef\u4ee5\u65b9\u4fbf\u7684\u5b8c\u6210\u4f20\u8f93\u516c\u94a5\u5230\u5bf9\u7aef\u4e3b\u673a\u7684\u5de5\u4f5c\u3002 \u4f8b\u5982 \u8bbf\u95ee 192.168.100.10 $ ssh-copy-id -P 22 username@192.168.100.10 $ # \u6b63\u5e38 SSH \u5373\u53ef\uff0c\u73b0\u5728\u4e0d\u9700\u8981\u5bc6\u7801 \u8fd9\u5c31\u662f\u6240\u8c13\u7684\u514d\u5bc6\u767b\u5f55 \u82e5\u8981\u7981\u7528\u5bc6\u7801\u767b\u5f55\uff0c\u4fee\u6539 /etc/ssh/sshd_config \u67e5\u627e PasswordAuthentication \u4fee\u6539\u4e3a no \u540e\u91cd\u542f ssh \u670d\u52a1\u3002","title":"SSH \u5bc6\u94a5\u5bf9"},{"location":"ch9/iptables/","text":"iptables iptables \u9632\u706b\u5899\u4e3a Linux \u5b89\u5168\u7684\u91cd\u8981\u5185\u5bb9\u3002 iptables \u9632\u706b\u5899\u5b8c\u5168\u7406\u89e3\u9700\u8981\u4e00\u4e9b\u6570\u901a\u77e5\u8bc6\uff0c\u4e0d\u8fc7\u76f8\u4fe1\u5404\u4f4d\u4e5f\u90fd\u9700\u8981\u5b66\u4e60\u8fd9\u65b9\u9762\u5185\u5bb9\uff0c\u5173\u4e8e NAT \u662f\u4ec0\u4e48\u4e4b\u7c7b\u7684\u5185\u5bb9\u5c31\u4e0d\u518d\u9610\u8ff0\u4e86\u3002 \u53c2\u8003\u8d44\u6599\uff1a \u9e1f\u54e5 Debian Wiki:iptables iptables \u7684\u89c4\u5219\u662f\u6709\u987a\u5e8f\u7684\uff01 \u6570\u636e\u5305\u4f1a\u6309\u89c4\u5219\u7684\u6392\u5217\u987a\u5e8f\u4f9d\u6b21\u5224\u65ad\u901a\u8fc7\u3002 iptables \u9ed8\u8ba4\u5206 3 \u5f20 table ( \u8868 ) \u800c\u89c4\u5219\u4f5c\u4e3a chain \u5b58\u50a8\u5728\u5bf9\u5e94\u7684\u8868\u4e2d\u3002 \u9ed8\u8ba4\u7684\u8868\u4e3a\uff1a filter \u5f71\u54cd\u8fdb\u5165\u672c\u673a\u7684\u6570\u636e\u5305 nat \u8fdb\u884c NAT \u65f6\u7528\u5230\u7684\u8868 mangle \u4e0e\u6253\u6807\u8bb0\u7684\u5305\u6709\u5173\uff0c\u672c\u4f8b\u4e0d\u8bb2\u8ff0 \u57fa\u672c iptables \u8bed\u6cd5 \u9884\u8bbe\u89c4\u5219 \u9884\u8bbe\u89c4\u5219\u6307\uff1a\u5f53\u6570\u636e\u5305\u4e0d\u6ee1\u8db3\u8bbe\u5b9a\u7684\u89c4\u5219\u65f6\uff0c\u5219\u6267\u884c\u7684\u9ed8\u8ba4\u64cd\u4f5c\u3002 \u5982\uff1a\u8bbe\u5b9a INPUT \u7684\u9ed8\u8ba4\u89c4\u5219\u4e3a DROP $ iptables -P INPUT DROP \u6dfb\u52a0\u89c4\u5219 \u4ec5\u9488\u5bf9\u7f51\u5361 ( \u6e90\u4e0e\u76ee\u6807 IP \u5730\u5740 ) $ iptables [-A keychain] [-i interfaces] [-s ip/cidr] -j [ACCEPT | REJECT | DROP] keychain: \u952e\u540d interfaces: \u7f51\u5361\u540d ip/cidr \u6e90 IP \u5730\u5740 ( \u652f\u6301\u4f7f\u7528 IP/CIDR \u683c\u5f0f ) ACCEPT/REJECT/DROP \u6570\u636e\u5305\u52a8\u4f5c\uff1a\u63a5\u53d7/\u62d2\u7edd/\u4e22\u5f03 \u4f8b\uff1a\u653e\u884c\u6765\u81ea\u672c\u673a\u56de\u73af\u5730\u5740\u7684\u6240\u6709\u7f51\u7edc\u6570\u636e\u5305\uff1a $ iptables -A INPUT -i lo -j ACCEPT \u9488\u5bf9\u7aef\u53e3 ( TCP \u4e0e UDP \u534f\u8bae ) $ iptables [-A \u952e\u540d] [-i \u540d] [-p tcp,udp] \\ > [-s \u6e90 IP \u5730\u5740/CIDR] [--sport \u7aef\u53e3\u8303\u56f4] \\ > [-d \u76ee\u6807 IP \u5730\u5740/CIDR] [--dport \u7aef\u53e3\u8303\u56f4] -j [ACCEPT|DROP|REJECT] \u6309\u72b6\u6001\u653e\u884c\u6570\u636e\u5305\uff1a iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT \u8fd9\u4e00\u6761\u5728\u9ed8\u8ba4\u89c4\u5219\u4e3a DROP \u65f6\u4fdd\u8bc1\u6570\u636e\u6b63\u5e38\u6d41\u901a\u975e\u5e38\u91cd\u8981\uff01\u4e00\u822c\u5c06\u6b64\u6761\u5199\u5728\u524d\u9762 \u67e5\u770b\u9632\u706b\u5899\u89c4\u5219\u4f7f\u7528 iptables -L \u6e05\u9664\u9632\u706b\u5899\u89c4\u5219\u4f7f\u7528 iptables -F \u4e0d\u8981\u5fd8\u8bb0\u9002\u5f53\u65f6\u5019\u653e\u884c ICMP \u534f\u8bae\u6570\u636e\u5305\uff01 \u5982\u679c\u60f3\u7981 ping \u7684\u8bdd\uff0c\u6700\u597d\u4e0d\u8981\u7981\u6389\u6240\u6709 ICMP \u6570\u636e\u5305\uff0c\u800c\u4ec5 DROP \u6389 ICMP type 8. \u4f8b\u5982\uff1a $ iptables -A INPUT -i ens33 -p icmp --icmp-type 8 -j DROP NAT \u4e00\u5207\u7684\u4e00\u5207\u4e0d\u8981\u5fd8\u4e86\u6253\u5f00 IP Forwarding! \u4fee\u6539 /etc/sysctl.conf \u628a net.ipv4.ip_forward \u6539\u4e3a 1 \u5e76\u91cd\u542f\u3002 \u7ed3\u679c\u5e94\u4e3a\uff1a $ sysctl net.ipv4.ip_forward net.ipv4.ip_forward = 1 iptable NAT \u8def\u5f84 \u5148\u7ecf\u8fc7 NAT Table \u7684 PREROUTING Key \u5982\u679c\u5305\u4e0d\u8fdb\u5165\u672c\u673a\uff0c\u5219\u7ee7\u7eed\u5904\u7406 \u518d\u7ecf\u8fc7 Filter Table \u7684 FORWARD Key \u6700\u540e\u7ecf\u8fc7 NAT Table \u7684 POSTROUTING Key\uff0c\u518d\u53d1\u9001\u51fa\u53bb \u8981\u5c06\u5185\u7f51\u6d41\u91cf\u901a\u8fc7 NAT \u8f6c\u53d1\u81f3 WAN\uff0c\u5373\u5c06\u5185\u7f51\u7684 RFC1918 \u79c1\u6709\u5730\u5740\u8f6c\u6362\u4e3a\u516c\u7f51\u5730\u5740\uff0c\u9700\u8981\u4f7f\u7528 Source NAT\uff0c\u5373\u5bf9\u539f\u5730\u5740\u8fdb\u884c\u8f6c\u6362\u3002 Source NAT \u4f7f\u7528 POSTROUTING Key $ iptables -t nat -A POSTROUTING -s $INNET -o $EXTIF -j MASQUERADE \u5176\u4e2d $INNET \u4e3a NAT \u540e\u7684\u5185\u90e8 IP \u5730\u5740\uff0c $EXTIF \u4e3a NAT \u540e\u7684\u51fa\u53e3 IP \u5730\u5740\u6216\u7f51\u5361\u540d\u3002 \u5c06\u5185\u7f51\u7684\u670d\u52a1\u6620\u5c04\u5230 WAN\uff0c\u5373\u505a\u7aef\u53e3\u6620\u5c04\uff0c\u9700\u8981\u914d\u7f6e Destination NAT\u3002 DNAT \u4f7f\u7528 PREROUTING Key \u4f8b\u5982\uff0c\u5c06 Web \u670d\u52a1\u7684 80 \u7aef\u53e3\u8f6c\u53d1\u5230\u5185\u7f51\u7684 192.168.100.10 \u7684 80 \u7aef\u53e3\u4e0a\uff1a $ iptables -t nat -A PREROUTING -i $EXTIF -p tcp --dport 80 -j DNAT --to-destination 192.168.100.10:80 \u7531\u4e8e iptables \u9700\u8981\u6309\u987a\u5e8f\u5199\u5165\uff0c\u4e3a\u51cf\u5c0f\u91cd\u590d\u8c03\u8bd5\u7684\u5de5\u4f5c\u91cf\uff0c\u5f3a\u70c8\u5efa\u8bae\u5199\u4e00\u4e2a Shell \u811a\u672c\uff0c\u5728\u811a\u672c\u4e2d\u4fee\u6539 iptables \u89c4\u5219\u3002 \u867d\u7136\u5b8c\u5168\u53ef\u4ee5\u63d2\u5165\u89c4\u5219\uff0c\u4f46\u662f\u5220\u6389\u91cd\u5199\u6bd4\u8f83\u3002\u3002\u3002\u5c11\u8bb0\u4e00\u70b9\u70b9\u4e1c\u897f\u3002 #!/bin/bash # A Shell Script for editing iptables # Written by Xiao Pan 2021 # Clear iptables # Delete all User-defined roles,chains and zones IFNAME=\"ens33\" iptables -F iptables -X iptables -Z # Set default policy iptables -P INPUT DROP iptables -P OUTPUT ACCEPT iptables -P FORWARD ACCEPT # Set Rules iptables -A INPUT -i lo -j ACCEPT iptables -A INPUT -i $IFNAME -m state --state RELATED,ESTABLISHED -j ACCEPT # \u6211\u77e5\u9053\u4f60\u4eec\u8fd9\u4e9b\u4e2d\u6587\u73a9\u5bb6\u5927\u6982\u7387\u8bb0\u4e0d\u4f4f\u8fd9\u5355\u8bcd\uff0c\u5982\u679c\u5fd8\u6389\u8bf7 \"man iptables-extensions\" # Uncommunt this if you want to block ping # iptables -A INPUT -i #IFNAME -p icmp --icmp-type 8 -j DROP iptables -A INPUT -i $IFNAME -p icmp -j ACCEPT # Add Accept rules iptables -A INPUT -i $IFNAME -p tcp --sport 22 -j ACCEPT # Set NAT EXTIF=\"ens192\" INIFONE=\"ens224\" INNETONE=\"192.168.100.0/24\" INITTWO=\"ens256\" INNETTWO=\"192.168.200.0/24\" # Clear NAT table rules iptables -F -t nat iptables -X -t nat iptables -Z -t nat iptables -t nat -P PREROUTING ACCEPT iptables -t nat -P POSTROUTING ACCEPT iptables -t nat -P OUTPUT ACCEPT # Enable Source NAT if [ \"$INIFONE\" != \"\" ]; then iptables -t nat -A POSTROUTING -s $INNETONE -o $EXTIF -j MASQUERADE fi # Like this # \u6211\u77e5\u9053\u8fd9\u4e2a\u4f60\u4eec\u5927\u6982\u7387\u8fd8\u662f\u8bb0\u4e0d\u4f4f\uff0c\u8bf7 \"man iptables-extensions\" \u540e\u641c\u7d22 \u201cSNAT\u201d \u5168\u5927\u5199\uff0c\u6216\u8005\u641c\u7d22 \u201cTARGET\u201d \u5728 TARGET EXTENSIONS \u4e2d\u4f60\u4eec\u4e5f\u4f1a\u627e\u5f97\u5230\u7684\u3002 # \u6ce8\u610f\uff1a\u8fd9\u4e2a\u53ea\u9002\u5408\u7528\u5728\u52a8\u6001 IP \u5730\u5740\u7684\u573a\u5408\uff0c\u5176\u4ed6\u60c5\u51b5\u4f9d\u7136\u63a8\u8350\u4f7f\u7528\u4f20\u7edf\u7684 SNAT \u5373\uff1a #iptables -t nat -A POSTROUTING -s $INNETONE -o $EXTIF -j SNAT --to-source 123.186.228.222 # Add DNAT Rules # Such as Web service on 192.168.100.10:80 iptables -t nat -A PREROUTING -p tcp -i $EXTIF --dport 80 -j DNAT --to-destination 192.168.100.10:80 # Like this # Save this, and run \"bash ./firewall.sh\" # or \"chmod +x ./firewall.sh && ./firewall.sh # Run As ROOT! \u4fdd\u5b58 iptables \u914d\u7f6e \u65b9\u6cd5\u4e00 \u5bfc\u51fa\u914d\u7f6e\u4f7f\u7528 iptables-save \uff0c\u76f4\u63a5\u8fd0\u884c\u5373\u53ef\u5c06\u914d\u7f6e\u8f93\u51fa\u81f3\u6807\u51c6\u8f93\u51fa \u5c06\u6587\u4ef6\u5bfc\u51fa\u5e76\u4fdd\u5b58\u540e\uff0c\u7f16\u8f91 /etc/network/if-pre-up.d/iptables \u52a0\u5165\u4ee5\u4e0b\u5185\u5bb9 # /etc/network/if-pre-up.d/iptables #!/bin/sh # EDIT THIS!!! RULES=\"/path/to/rules/file\" /sbin/iptables-restore < \"$RULES\" \u7ed9\u8fd9\u4e2a\u811a\u672c\u52a0\u4e0a\u8fd0\u884c\u6743\u9650\uff1a $ chmod +x /etc/network/if-pre-up.d/iptables \u65b9\u6cd5\u4e8c \u5b89\u88c5 iptables-persistent \u540e\u8fd0\u884c\uff1a $ iptables-save > /etc/iptables/rules.v4 \u4e00\u4e9b\u53c2\u8003\uff1a iptables\u9632\u706b\u5899\u7684\u5e94\u7528\u548cSNAT/DNAT\u7b56\u7565","title":"IPtables"},{"location":"ch9/iptables/#iptables","text":"iptables \u9632\u706b\u5899\u4e3a Linux \u5b89\u5168\u7684\u91cd\u8981\u5185\u5bb9\u3002 iptables \u9632\u706b\u5899\u5b8c\u5168\u7406\u89e3\u9700\u8981\u4e00\u4e9b\u6570\u901a\u77e5\u8bc6\uff0c\u4e0d\u8fc7\u76f8\u4fe1\u5404\u4f4d\u4e5f\u90fd\u9700\u8981\u5b66\u4e60\u8fd9\u65b9\u9762\u5185\u5bb9\uff0c\u5173\u4e8e NAT \u662f\u4ec0\u4e48\u4e4b\u7c7b\u7684\u5185\u5bb9\u5c31\u4e0d\u518d\u9610\u8ff0\u4e86\u3002 \u53c2\u8003\u8d44\u6599\uff1a \u9e1f\u54e5 Debian Wiki:iptables iptables \u7684\u89c4\u5219\u662f\u6709\u987a\u5e8f\u7684\uff01 \u6570\u636e\u5305\u4f1a\u6309\u89c4\u5219\u7684\u6392\u5217\u987a\u5e8f\u4f9d\u6b21\u5224\u65ad\u901a\u8fc7\u3002 iptables \u9ed8\u8ba4\u5206 3 \u5f20 table ( \u8868 ) \u800c\u89c4\u5219\u4f5c\u4e3a chain \u5b58\u50a8\u5728\u5bf9\u5e94\u7684\u8868\u4e2d\u3002 \u9ed8\u8ba4\u7684\u8868\u4e3a\uff1a filter \u5f71\u54cd\u8fdb\u5165\u672c\u673a\u7684\u6570\u636e\u5305 nat \u8fdb\u884c NAT \u65f6\u7528\u5230\u7684\u8868 mangle \u4e0e\u6253\u6807\u8bb0\u7684\u5305\u6709\u5173\uff0c\u672c\u4f8b\u4e0d\u8bb2\u8ff0","title":"iptables"},{"location":"ch9/iptables/#iptables_1","text":"","title":"\u57fa\u672c iptables \u8bed\u6cd5"},{"location":"ch9/iptables/#_1","text":"\u9884\u8bbe\u89c4\u5219\u6307\uff1a\u5f53\u6570\u636e\u5305\u4e0d\u6ee1\u8db3\u8bbe\u5b9a\u7684\u89c4\u5219\u65f6\uff0c\u5219\u6267\u884c\u7684\u9ed8\u8ba4\u64cd\u4f5c\u3002 \u5982\uff1a\u8bbe\u5b9a INPUT \u7684\u9ed8\u8ba4\u89c4\u5219\u4e3a DROP $ iptables -P INPUT DROP","title":"\u9884\u8bbe\u89c4\u5219"},{"location":"ch9/iptables/#_2","text":"\u4ec5\u9488\u5bf9\u7f51\u5361 ( \u6e90\u4e0e\u76ee\u6807 IP \u5730\u5740 ) $ iptables [-A keychain] [-i interfaces] [-s ip/cidr] -j [ACCEPT | REJECT | DROP] keychain: \u952e\u540d interfaces: \u7f51\u5361\u540d ip/cidr \u6e90 IP \u5730\u5740 ( \u652f\u6301\u4f7f\u7528 IP/CIDR \u683c\u5f0f ) ACCEPT/REJECT/DROP \u6570\u636e\u5305\u52a8\u4f5c\uff1a\u63a5\u53d7/\u62d2\u7edd/\u4e22\u5f03 \u4f8b\uff1a\u653e\u884c\u6765\u81ea\u672c\u673a\u56de\u73af\u5730\u5740\u7684\u6240\u6709\u7f51\u7edc\u6570\u636e\u5305\uff1a $ iptables -A INPUT -i lo -j ACCEPT \u9488\u5bf9\u7aef\u53e3 ( TCP \u4e0e UDP \u534f\u8bae ) $ iptables [-A \u952e\u540d] [-i \u540d] [-p tcp,udp] \\ > [-s \u6e90 IP \u5730\u5740/CIDR] [--sport \u7aef\u53e3\u8303\u56f4] \\ > [-d \u76ee\u6807 IP \u5730\u5740/CIDR] [--dport \u7aef\u53e3\u8303\u56f4] -j [ACCEPT|DROP|REJECT] \u6309\u72b6\u6001\u653e\u884c\u6570\u636e\u5305\uff1a iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT \u8fd9\u4e00\u6761\u5728\u9ed8\u8ba4\u89c4\u5219\u4e3a DROP \u65f6\u4fdd\u8bc1\u6570\u636e\u6b63\u5e38\u6d41\u901a\u975e\u5e38\u91cd\u8981\uff01\u4e00\u822c\u5c06\u6b64\u6761\u5199\u5728\u524d\u9762 \u67e5\u770b\u9632\u706b\u5899\u89c4\u5219\u4f7f\u7528 iptables -L \u6e05\u9664\u9632\u706b\u5899\u89c4\u5219\u4f7f\u7528 iptables -F \u4e0d\u8981\u5fd8\u8bb0\u9002\u5f53\u65f6\u5019\u653e\u884c ICMP \u534f\u8bae\u6570\u636e\u5305\uff01 \u5982\u679c\u60f3\u7981 ping \u7684\u8bdd\uff0c\u6700\u597d\u4e0d\u8981\u7981\u6389\u6240\u6709 ICMP \u6570\u636e\u5305\uff0c\u800c\u4ec5 DROP \u6389 ICMP type 8. \u4f8b\u5982\uff1a $ iptables -A INPUT -i ens33 -p icmp --icmp-type 8 -j DROP","title":"\u6dfb\u52a0\u89c4\u5219"},{"location":"ch9/iptables/#nat","text":"\u4e00\u5207\u7684\u4e00\u5207\u4e0d\u8981\u5fd8\u4e86\u6253\u5f00 IP Forwarding! \u4fee\u6539 /etc/sysctl.conf \u628a net.ipv4.ip_forward \u6539\u4e3a 1 \u5e76\u91cd\u542f\u3002 \u7ed3\u679c\u5e94\u4e3a\uff1a $ sysctl net.ipv4.ip_forward net.ipv4.ip_forward = 1 iptable NAT \u8def\u5f84 \u5148\u7ecf\u8fc7 NAT Table \u7684 PREROUTING Key \u5982\u679c\u5305\u4e0d\u8fdb\u5165\u672c\u673a\uff0c\u5219\u7ee7\u7eed\u5904\u7406 \u518d\u7ecf\u8fc7 Filter Table \u7684 FORWARD Key \u6700\u540e\u7ecf\u8fc7 NAT Table \u7684 POSTROUTING Key\uff0c\u518d\u53d1\u9001\u51fa\u53bb \u8981\u5c06\u5185\u7f51\u6d41\u91cf\u901a\u8fc7 NAT \u8f6c\u53d1\u81f3 WAN\uff0c\u5373\u5c06\u5185\u7f51\u7684 RFC1918 \u79c1\u6709\u5730\u5740\u8f6c\u6362\u4e3a\u516c\u7f51\u5730\u5740\uff0c\u9700\u8981\u4f7f\u7528 Source NAT\uff0c\u5373\u5bf9\u539f\u5730\u5740\u8fdb\u884c\u8f6c\u6362\u3002 Source NAT \u4f7f\u7528 POSTROUTING Key $ iptables -t nat -A POSTROUTING -s $INNET -o $EXTIF -j MASQUERADE \u5176\u4e2d $INNET \u4e3a NAT \u540e\u7684\u5185\u90e8 IP \u5730\u5740\uff0c $EXTIF \u4e3a NAT \u540e\u7684\u51fa\u53e3 IP \u5730\u5740\u6216\u7f51\u5361\u540d\u3002 \u5c06\u5185\u7f51\u7684\u670d\u52a1\u6620\u5c04\u5230 WAN\uff0c\u5373\u505a\u7aef\u53e3\u6620\u5c04\uff0c\u9700\u8981\u914d\u7f6e Destination NAT\u3002 DNAT \u4f7f\u7528 PREROUTING Key \u4f8b\u5982\uff0c\u5c06 Web \u670d\u52a1\u7684 80 \u7aef\u53e3\u8f6c\u53d1\u5230\u5185\u7f51\u7684 192.168.100.10 \u7684 80 \u7aef\u53e3\u4e0a\uff1a $ iptables -t nat -A PREROUTING -i $EXTIF -p tcp --dport 80 -j DNAT --to-destination 192.168.100.10:80 \u7531\u4e8e iptables \u9700\u8981\u6309\u987a\u5e8f\u5199\u5165\uff0c\u4e3a\u51cf\u5c0f\u91cd\u590d\u8c03\u8bd5\u7684\u5de5\u4f5c\u91cf\uff0c\u5f3a\u70c8\u5efa\u8bae\u5199\u4e00\u4e2a Shell \u811a\u672c\uff0c\u5728\u811a\u672c\u4e2d\u4fee\u6539 iptables \u89c4\u5219\u3002 \u867d\u7136\u5b8c\u5168\u53ef\u4ee5\u63d2\u5165\u89c4\u5219\uff0c\u4f46\u662f\u5220\u6389\u91cd\u5199\u6bd4\u8f83\u3002\u3002\u3002\u5c11\u8bb0\u4e00\u70b9\u70b9\u4e1c\u897f\u3002 #!/bin/bash # A Shell Script for editing iptables # Written by Xiao Pan 2021 # Clear iptables # Delete all User-defined roles,chains and zones IFNAME=\"ens33\" iptables -F iptables -X iptables -Z # Set default policy iptables -P INPUT DROP iptables -P OUTPUT ACCEPT iptables -P FORWARD ACCEPT # Set Rules iptables -A INPUT -i lo -j ACCEPT iptables -A INPUT -i $IFNAME -m state --state RELATED,ESTABLISHED -j ACCEPT # \u6211\u77e5\u9053\u4f60\u4eec\u8fd9\u4e9b\u4e2d\u6587\u73a9\u5bb6\u5927\u6982\u7387\u8bb0\u4e0d\u4f4f\u8fd9\u5355\u8bcd\uff0c\u5982\u679c\u5fd8\u6389\u8bf7 \"man iptables-extensions\" # Uncommunt this if you want to block ping # iptables -A INPUT -i #IFNAME -p icmp --icmp-type 8 -j DROP iptables -A INPUT -i $IFNAME -p icmp -j ACCEPT # Add Accept rules iptables -A INPUT -i $IFNAME -p tcp --sport 22 -j ACCEPT # Set NAT EXTIF=\"ens192\" INIFONE=\"ens224\" INNETONE=\"192.168.100.0/24\" INITTWO=\"ens256\" INNETTWO=\"192.168.200.0/24\" # Clear NAT table rules iptables -F -t nat iptables -X -t nat iptables -Z -t nat iptables -t nat -P PREROUTING ACCEPT iptables -t nat -P POSTROUTING ACCEPT iptables -t nat -P OUTPUT ACCEPT # Enable Source NAT if [ \"$INIFONE\" != \"\" ]; then iptables -t nat -A POSTROUTING -s $INNETONE -o $EXTIF -j MASQUERADE fi # Like this # \u6211\u77e5\u9053\u8fd9\u4e2a\u4f60\u4eec\u5927\u6982\u7387\u8fd8\u662f\u8bb0\u4e0d\u4f4f\uff0c\u8bf7 \"man iptables-extensions\" \u540e\u641c\u7d22 \u201cSNAT\u201d \u5168\u5927\u5199\uff0c\u6216\u8005\u641c\u7d22 \u201cTARGET\u201d \u5728 TARGET EXTENSIONS \u4e2d\u4f60\u4eec\u4e5f\u4f1a\u627e\u5f97\u5230\u7684\u3002 # \u6ce8\u610f\uff1a\u8fd9\u4e2a\u53ea\u9002\u5408\u7528\u5728\u52a8\u6001 IP \u5730\u5740\u7684\u573a\u5408\uff0c\u5176\u4ed6\u60c5\u51b5\u4f9d\u7136\u63a8\u8350\u4f7f\u7528\u4f20\u7edf\u7684 SNAT \u5373\uff1a #iptables -t nat -A POSTROUTING -s $INNETONE -o $EXTIF -j SNAT --to-source 123.186.228.222 # Add DNAT Rules # Such as Web service on 192.168.100.10:80 iptables -t nat -A PREROUTING -p tcp -i $EXTIF --dport 80 -j DNAT --to-destination 192.168.100.10:80 # Like this # Save this, and run \"bash ./firewall.sh\" # or \"chmod +x ./firewall.sh && ./firewall.sh # Run As ROOT!","title":"NAT"},{"location":"ch9/iptables/#iptables_2","text":"","title":"\u4fdd\u5b58 iptables \u914d\u7f6e"},{"location":"ch9/iptables/#_3","text":"\u5bfc\u51fa\u914d\u7f6e\u4f7f\u7528 iptables-save \uff0c\u76f4\u63a5\u8fd0\u884c\u5373\u53ef\u5c06\u914d\u7f6e\u8f93\u51fa\u81f3\u6807\u51c6\u8f93\u51fa \u5c06\u6587\u4ef6\u5bfc\u51fa\u5e76\u4fdd\u5b58\u540e\uff0c\u7f16\u8f91 /etc/network/if-pre-up.d/iptables \u52a0\u5165\u4ee5\u4e0b\u5185\u5bb9 # /etc/network/if-pre-up.d/iptables #!/bin/sh # EDIT THIS!!! RULES=\"/path/to/rules/file\" /sbin/iptables-restore < \"$RULES\" \u7ed9\u8fd9\u4e2a\u811a\u672c\u52a0\u4e0a\u8fd0\u884c\u6743\u9650\uff1a $ chmod +x /etc/network/if-pre-up.d/iptables","title":"\u65b9\u6cd5\u4e00"},{"location":"ch9/iptables/#_4","text":"\u5b89\u88c5 iptables-persistent \u540e\u8fd0\u884c\uff1a $ iptables-save > /etc/iptables/rules.v4 \u4e00\u4e9b\u53c2\u8003\uff1a iptables\u9632\u706b\u5899\u7684\u5e94\u7528\u548cSNAT/DNAT\u7b56\u7565","title":"\u65b9\u6cd5\u4e8c"},{"location":"ch9/ssl/","text":"\u8bc1\u4e66\u8ba4\u8bc1\u4e0e OpenSSL \u53c2\u8003\u8d44\u6599\uff1a \u5982\u4f55\u4f7f\u7528 OpenSSL \u5efa\u7acb\u958b\u767c\u6e2c\u8a66\u7528\u9014\u7684\u81ea\u7c3d\u6191\u8b49 (Self-Signed Certificate) Create a self-signed certificate using OpenSSL OpenSSL Certification Authority (CA) on Ubuntu Server Create your own Certificate Authority \u73b0\u5728\u751f\u4ea7\u73af\u5883\u6700\u6b21\u5176\u5b9e\u4e5f\u5e94\u8be5\u6709\u4e2a Let\u2018s Encrypt\uff0c\u800c\u4e14\u80fd\u591f\u88ab\u6d4f\u89c8\u5668\u4fe1\u4efb\uff0c\u81ea\u7b7e\u8bc1\u4e66\u9664\u4e86\u6d4b\u8bd5\u73af\u5883\u5176\u5b9e\u6ca1\u5565\u7528\uff08 \u5b9e\u9a8c \u672c\u4f8b\u6211\u4eec\u9700\u8981\u81ea\u5df1\u626e\u6f14\u4e00\u4e2a\u6839\u8bc1\u4e66\u9881\u53d1\u673a\u6784 ( CA )\uff0c\u6765\u81ea\u5df1\u7ed9\u81ea\u5df1\u7b7e\u53d1\u4e00\u4e2a\u6839\u8bc1\u4e66\uff0c\u5e76\u7528\u8fd9\u4e2a\u6839\u8bc1\u4e66\u4e3a\u5176\u4ed6\u8bc1\u4e66\u7b7e\u540d\u3002 \u8fd9\u4e2a\u5b9e\u9a8c\u9700\u8981\u4f7f\u7528 OpenSSL \u6765\u7b7e\u53d1\u8bc1\u4e66\u3002 \u8fd9\u4e2a\u5b9e\u9a8c\u9700\u8981\u51e0\u4e2a\u6b65\u9aa4\uff0c\u5206\u522b\u4e3a: \u751f\u6210\u6839\u8bc1\u4e66\u6240\u9700\u7684\u79c1\u94a5 \u7528\u8fd9\u4e2a\u79c1\u94a5\u7b7e\u53d1\u8bc1\u4e66\uff0c\u4f5c\u4e3a\u6839\u8bc1\u4e66 \u751f\u6210\u9700\u8981\u8bc1\u4e66\u7684\u5ba2\u6237\u7aef\u7684\u79c1\u94a5 \u4f7f\u7528\u5ba2\u6237\u7aef\u79c1\u94a5\u521b\u5efa\u8bc1\u4e66\u7b7e\u53d1\u8bf7\u6c42 \u5728\u6839\u8bc1\u4e66\u670d\u52a1\u5668\u4e0a\u7b7e\u53d1\u8bc1\u4e66 \u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u8981\u7b7e\u53d1\u5b9e\u9645\u4f7f\u7528\u7684\u8bc1\u4e66\u901a\u5e38\u5728\u6211\u4eec\u7684\u672c\u673a\u4e0a\u751f\u6210\u79c1\u94a5\uff0c\u6765\u786e\u4fdd\u79c1\u94a5\u7684\u5b89\u5168\u6027\uff0c\u4f46\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u628a\u6240\u6709\u73af\u8282\u5747\u5728 CA \u670d\u52a1\u5668\u4e0a\u5b8c\u6210\uff0c\u8fd9\u6837\u53ef\u4ee5\u7701\u4e0b\u8bb8\u591a\u628a\u6587\u4ef6\u4f20\u6765\u4f20\u53bb\u7684\u65f6\u95f4\u3002 \u6839\u8bc1\u4e66\u7684\u7b7e\u53d1 \u7b7e\u53d1\u6839\u8bc1\u4e66\u524d\uff0c\u5148\u505a\u4e00\u4e9b\u914d\u7f6e\u3002 \u4fee\u6539 /usr/lib/ssl/openssl.cnf \uff0c\u5728 48 \u884c\uff0c [CA_default] \u4e2d\uff0c\u4fee\u6539 dir \u4e3a\u5b58\u653e CA \u9700\u8981\u6587\u4ef6\u7684\u6839\u76ee\u5f55\uff0c\u672c\u4f8b\u4e3a /CA \u4fee\u6539\u540e\uff0c\u521b\u5efa\u4e24\u4e2a\u6587\u4ef6 $ # \u7528\u4e8e\u5b9a\u4f4d\u6839\u76ee\u5f55\u4f4d\u7f6e $ touch /CA/index.txt $ # \u4e00\u4e2a\u521d\u59cb\u6570\u5b57\u7528\u4e8e\u4ee3\u8868\u7b7e\u53d1\u8bc1\u4e66\u7684\u6570\u91cf\uff0c\u6bcf\u7b7e\u53d1\u4e00\u5f20\u8bc1\u4e66\uff0c\u6570\u5b57\u4fbf\u4f1a +1 $ echo 1000 > /CA/serial \u521b\u5efa\u597d\u76ee\u5f55\u7ed3\u6784 $ cd /CA $ mkdir newcerts private certs \u63a5\u4e0b\u6765\u5207\u6362\u5230 CA \u7684\u6839\u76ee\u5f55\uff0c\u5f00\u59cb\u751f\u6210 CA \u6839\u8bc1\u4e66 $ cd /CA $ # \u6839\u8bc1\u4e66\u7684\u79c1\u94a5\uff0c\u5373 key \u6587\u4ef6\uff0c\u957f\u5ea6\u4e3a 4096 bit $ openssl genrsa -out cakey.pem 4096 $ mv cakey.pem ./private/ $ # \u7528\u521a\u624d\u751f\u6210\u7684\u79c1\u94a5\u7b7e\u53d1\u8bc1\u4e66 $ openssl req -new -x509 -key ./private/cakey.pem -out ./cacert.pem $ # \u6839\u636e\u9700\u6c42\u8f93\u5165\u8bc1\u4e66\u4fe1\u606f You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:CN State or Province Name (full name) [Some-State]:Liaoning Locality Name (eg, city) []:Dandong Organization Name (eg, company) [Internet Widgits Pty Ltd]:Inc Organizational Unit Name (eg, section) []: Common Name (e.g. server FQDN or YOUR name) []:Skill Global Root CA Email Address []: \u751f\u6210\u7684 cacert.pem \u5373\u4e3a\u6839\u8bc1\u4e66\uff0c\u9700\u8981\u5c06\u5176\u5bfc\u5165\u6240\u6709\u4e3b\u673a\u7684\u4fe1\u4efb\u5217\u8868 \u5176\u4ed6\u8bc1\u4e66\u7684\u7b7e\u53d1 \u7b7e\u53d1\u5176\u4ed6\u8bc1\u4e66\u65f6\uff0c\u4f9d\u7136\u9700\u8981\u751f\u6210\u79c1\u94a5\uff0c\u4f46\u7b2c\u4e8c\u6b65\u9700\u8981\u751f\u6210\u8bc1\u4e66\u7b7e\u53d1\u8bf7\u6c42\uff0c\u7136\u540e\u4f7f\u7528 CA \u6839\u8bc1\u4e66\u7b7e\u540d $ # \u751f\u6210\u4e00\u4e2a\u79c1\u94a5 $ openssl genrsa -out server01key.pem 4096 $ # \u4f7f\u7528\u79c1\u94a5\u751f\u6210\u4e00\u4e2a\u8bc1\u4e66\u7b7e\u53d1\u8bf7\u6c42 $ openssl req -new -key server01key.pem -out server01.csr ou are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:CN State or Province Name (full name) [Some-State]:Liaoning Locality Name (eg, city) []:Dandong Organization Name (eg, company) [Internet Widgits Pty Ltd]:Inc Organizational Unit Name (eg, section) []: Common Name (e.g. server FQDN or YOUR name) []:server01.sdskills.com Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []: $ # \u7528\u6839\u8bc1\u4e66\u4e0e\u79c1\u94a5\u7b7e\u53d1\u8bc1\u4e66 $ openssl ca -in server01.csr -out server01.pem Using configuration from /usr/lib/ssl/openssl.cnf Check that the request matches the signature Signature ok Certificate Details: Serial Number: 4096 (0x1000) Validity Not Before: Mar 28 14:36:39 2021 GMT Not After : Mar 28 14:36:39 2022 GMT Subject: countryName = CN stateOrProvinceName = Liaoning organizationName = Inc commonName = server01.sdskills.com X509v3 extensions: X509v3 Basic Constraints: CA:FALSE Netscape Comment: OpenSSL Generated Certificate X509v3 Subject Key Identifier: 29:55:53:D7:48:A6:93:6A:56:9C:E5:38:C3:92:6A:2F:3C:AC:B7:06 X509v3 Authority Key Identifier: keyid:18:D9:48:2B:0E:D2:F4:FF:0C:0D:67:E8:CB:26:4C:30:CE:F2:6D:60 Certificate is to be certified until Mar 28 14:36:39 2022 GMT (365 days) Sign the certificate? [y/n]:y 1 out of 1 certificate requests certified, commit? [y/n]y Write out database with 1 new entries Data Base Updated \u8fde\u6572\u4e24\u4e2a y \u5373\u53ef \u751f\u6210\u7684 server01.pem \u5373\u4e3a\u8bc1\u4e66 \u5728\u914d\u7f6e\u8bc1\u4e66\u65f6\uff0c\u9700\u8981\u751f\u6210\u7684\u5ba2\u6237\u673a\u81ea\u5df1\u7684\u79c1\u94a5\uff0c\u4e0e\u7ecf\u8fc7\u6839\u8bc1\u4e66\u7b7e\u540d\u7684\u8bc1\u4e66\uff0c\u6839\u8bc1\u4e66\u81ea\u5df1\u7684\u79c1\u94a5\u9700\u5728 CA \u670d\u52a1\u5668\u4e0a\u81ea\u5df1\u4fdd\u5b58\u597d\u3002 \u4e4b\u540e\u8981\u7b7e\u53d1\u8bc1\u4e66\uff0c\u6309\u7167\u751f\u6210\u79c1\u94a5 -> \u751f\u6210\u7b7e\u53d1\u8bf7\u6c42 -> \u5728 CA \u4e0a\u7b7e\u540d \u8fd9\u4e09\u6b65\u5373\u53ef\u3002 \u7531\u4e8e\u603b\u662f\u8981\u4f20\u4e00\u4e9b\u7b7e\u53d1\u597d\u7684\u8bc1\u4e66\uff0c\u6240\u4ee5\u5efa\u8bae\u8fd9\u65f6\u5148\u4e0d\u8981\u963b\u6321 CA \u670d\u52a1\u5668\u7684 SSH \u8bbf\u95ee\uff0c\u80fd\u5927\u5927\u52a0\u5feb\u5b9e\u9645\u505a\u9898\u7684\u901f\u5ea6 \u6307\u7528 SCP \u4f20\u6587\u4ef6 \u8bc1\u4e66\u9700\u8981\u5bfc\u5165\u8fdb\u5176\u4ed6\u4e3b\u673a\u7684\u6839\u8bc1\u4e66\u4fe1\u4efb\u5217\u8868\uff0c\u6211\u4e2a\u4eba\u5efa\u8bae\u7528 Ansible\uff0c\u53cd\u6b63 APT \u6e90\u91cc\u6709 \u5c06 CA \u6839\u8bc1\u4e66\u590d\u5236\u5230\u4e3b\u673a\u7684 /usr/local/share/ca-certificates/ \u6587\u4ef6\u5939\uff0c\u4e4b\u540e\u8fd0\u884c update-ca-certificates Ansible Playbook \u5982\u4e0b\uff1a --- - hosts: all vars: ca: - cacert.pem tasks: - name: copy ca file copy: src: '{{ item }}' dest: /usr/local/share/ca-certificates mode: 0644 owner: root group: root loop: '{{ ca }}' notify: update trusted-ca handlers: - name: update trusted-ca shell: /usr/sbin/update-ca-certificates \u53e6\u5916\u8fd8\u9700\u8981\u5bfc\u5165\u8fdb Firefox \u7684\u8bc1\u4e66\u4fe1\u4efb\u5217\u8868\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u5728\u8bbf\u95ee\u65f6\u5f39\u51fa\u5b89\u5168\u8b66\u544a\u4e86\u3002","title":"\u8bc1\u4e66\u8ba4\u8bc1\u4e0e OpenSSL"},{"location":"ch9/ssl/#openssl","text":"\u53c2\u8003\u8d44\u6599\uff1a \u5982\u4f55\u4f7f\u7528 OpenSSL \u5efa\u7acb\u958b\u767c\u6e2c\u8a66\u7528\u9014\u7684\u81ea\u7c3d\u6191\u8b49 (Self-Signed Certificate) Create a self-signed certificate using OpenSSL OpenSSL Certification Authority (CA) on Ubuntu Server Create your own Certificate Authority \u73b0\u5728\u751f\u4ea7\u73af\u5883\u6700\u6b21\u5176\u5b9e\u4e5f\u5e94\u8be5\u6709\u4e2a Let\u2018s Encrypt\uff0c\u800c\u4e14\u80fd\u591f\u88ab\u6d4f\u89c8\u5668\u4fe1\u4efb\uff0c\u81ea\u7b7e\u8bc1\u4e66\u9664\u4e86\u6d4b\u8bd5\u73af\u5883\u5176\u5b9e\u6ca1\u5565\u7528\uff08","title":"\u8bc1\u4e66\u8ba4\u8bc1\u4e0e OpenSSL"},{"location":"ch9/ssl/#_1","text":"\u672c\u4f8b\u6211\u4eec\u9700\u8981\u81ea\u5df1\u626e\u6f14\u4e00\u4e2a\u6839\u8bc1\u4e66\u9881\u53d1\u673a\u6784 ( CA )\uff0c\u6765\u81ea\u5df1\u7ed9\u81ea\u5df1\u7b7e\u53d1\u4e00\u4e2a\u6839\u8bc1\u4e66\uff0c\u5e76\u7528\u8fd9\u4e2a\u6839\u8bc1\u4e66\u4e3a\u5176\u4ed6\u8bc1\u4e66\u7b7e\u540d\u3002 \u8fd9\u4e2a\u5b9e\u9a8c\u9700\u8981\u4f7f\u7528 OpenSSL \u6765\u7b7e\u53d1\u8bc1\u4e66\u3002 \u8fd9\u4e2a\u5b9e\u9a8c\u9700\u8981\u51e0\u4e2a\u6b65\u9aa4\uff0c\u5206\u522b\u4e3a: \u751f\u6210\u6839\u8bc1\u4e66\u6240\u9700\u7684\u79c1\u94a5 \u7528\u8fd9\u4e2a\u79c1\u94a5\u7b7e\u53d1\u8bc1\u4e66\uff0c\u4f5c\u4e3a\u6839\u8bc1\u4e66 \u751f\u6210\u9700\u8981\u8bc1\u4e66\u7684\u5ba2\u6237\u7aef\u7684\u79c1\u94a5 \u4f7f\u7528\u5ba2\u6237\u7aef\u79c1\u94a5\u521b\u5efa\u8bc1\u4e66\u7b7e\u53d1\u8bf7\u6c42 \u5728\u6839\u8bc1\u4e66\u670d\u52a1\u5668\u4e0a\u7b7e\u53d1\u8bc1\u4e66 \u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u8981\u7b7e\u53d1\u5b9e\u9645\u4f7f\u7528\u7684\u8bc1\u4e66\u901a\u5e38\u5728\u6211\u4eec\u7684\u672c\u673a\u4e0a\u751f\u6210\u79c1\u94a5\uff0c\u6765\u786e\u4fdd\u79c1\u94a5\u7684\u5b89\u5168\u6027\uff0c\u4f46\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u628a\u6240\u6709\u73af\u8282\u5747\u5728 CA \u670d\u52a1\u5668\u4e0a\u5b8c\u6210\uff0c\u8fd9\u6837\u53ef\u4ee5\u7701\u4e0b\u8bb8\u591a\u628a\u6587\u4ef6\u4f20\u6765\u4f20\u53bb\u7684\u65f6\u95f4\u3002","title":"\u5b9e\u9a8c"},{"location":"ch9/ssl/#_2","text":"\u7b7e\u53d1\u6839\u8bc1\u4e66\u524d\uff0c\u5148\u505a\u4e00\u4e9b\u914d\u7f6e\u3002 \u4fee\u6539 /usr/lib/ssl/openssl.cnf \uff0c\u5728 48 \u884c\uff0c [CA_default] \u4e2d\uff0c\u4fee\u6539 dir \u4e3a\u5b58\u653e CA \u9700\u8981\u6587\u4ef6\u7684\u6839\u76ee\u5f55\uff0c\u672c\u4f8b\u4e3a /CA \u4fee\u6539\u540e\uff0c\u521b\u5efa\u4e24\u4e2a\u6587\u4ef6 $ # \u7528\u4e8e\u5b9a\u4f4d\u6839\u76ee\u5f55\u4f4d\u7f6e $ touch /CA/index.txt $ # \u4e00\u4e2a\u521d\u59cb\u6570\u5b57\u7528\u4e8e\u4ee3\u8868\u7b7e\u53d1\u8bc1\u4e66\u7684\u6570\u91cf\uff0c\u6bcf\u7b7e\u53d1\u4e00\u5f20\u8bc1\u4e66\uff0c\u6570\u5b57\u4fbf\u4f1a +1 $ echo 1000 > /CA/serial \u521b\u5efa\u597d\u76ee\u5f55\u7ed3\u6784 $ cd /CA $ mkdir newcerts private certs \u63a5\u4e0b\u6765\u5207\u6362\u5230 CA \u7684\u6839\u76ee\u5f55\uff0c\u5f00\u59cb\u751f\u6210 CA \u6839\u8bc1\u4e66 $ cd /CA $ # \u6839\u8bc1\u4e66\u7684\u79c1\u94a5\uff0c\u5373 key \u6587\u4ef6\uff0c\u957f\u5ea6\u4e3a 4096 bit $ openssl genrsa -out cakey.pem 4096 $ mv cakey.pem ./private/ $ # \u7528\u521a\u624d\u751f\u6210\u7684\u79c1\u94a5\u7b7e\u53d1\u8bc1\u4e66 $ openssl req -new -x509 -key ./private/cakey.pem -out ./cacert.pem $ # \u6839\u636e\u9700\u6c42\u8f93\u5165\u8bc1\u4e66\u4fe1\u606f You are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:CN State or Province Name (full name) [Some-State]:Liaoning Locality Name (eg, city) []:Dandong Organization Name (eg, company) [Internet Widgits Pty Ltd]:Inc Organizational Unit Name (eg, section) []: Common Name (e.g. server FQDN or YOUR name) []:Skill Global Root CA Email Address []: \u751f\u6210\u7684 cacert.pem \u5373\u4e3a\u6839\u8bc1\u4e66\uff0c\u9700\u8981\u5c06\u5176\u5bfc\u5165\u6240\u6709\u4e3b\u673a\u7684\u4fe1\u4efb\u5217\u8868","title":"\u6839\u8bc1\u4e66\u7684\u7b7e\u53d1"},{"location":"ch9/ssl/#_3","text":"\u7b7e\u53d1\u5176\u4ed6\u8bc1\u4e66\u65f6\uff0c\u4f9d\u7136\u9700\u8981\u751f\u6210\u79c1\u94a5\uff0c\u4f46\u7b2c\u4e8c\u6b65\u9700\u8981\u751f\u6210\u8bc1\u4e66\u7b7e\u53d1\u8bf7\u6c42\uff0c\u7136\u540e\u4f7f\u7528 CA \u6839\u8bc1\u4e66\u7b7e\u540d $ # \u751f\u6210\u4e00\u4e2a\u79c1\u94a5 $ openssl genrsa -out server01key.pem 4096 $ # \u4f7f\u7528\u79c1\u94a5\u751f\u6210\u4e00\u4e2a\u8bc1\u4e66\u7b7e\u53d1\u8bf7\u6c42 $ openssl req -new -key server01key.pem -out server01.csr ou are about to be asked to enter information that will be incorporated into your certificate request. What you are about to enter is what is called a Distinguished Name or a DN. There are quite a few fields but you can leave some blank For some fields there will be a default value, If you enter '.', the field will be left blank. ----- Country Name (2 letter code) [AU]:CN State or Province Name (full name) [Some-State]:Liaoning Locality Name (eg, city) []:Dandong Organization Name (eg, company) [Internet Widgits Pty Ltd]:Inc Organizational Unit Name (eg, section) []: Common Name (e.g. server FQDN or YOUR name) []:server01.sdskills.com Email Address []: Please enter the following 'extra' attributes to be sent with your certificate request A challenge password []: An optional company name []: $ # \u7528\u6839\u8bc1\u4e66\u4e0e\u79c1\u94a5\u7b7e\u53d1\u8bc1\u4e66 $ openssl ca -in server01.csr -out server01.pem Using configuration from /usr/lib/ssl/openssl.cnf Check that the request matches the signature Signature ok Certificate Details: Serial Number: 4096 (0x1000) Validity Not Before: Mar 28 14:36:39 2021 GMT Not After : Mar 28 14:36:39 2022 GMT Subject: countryName = CN stateOrProvinceName = Liaoning organizationName = Inc commonName = server01.sdskills.com X509v3 extensions: X509v3 Basic Constraints: CA:FALSE Netscape Comment: OpenSSL Generated Certificate X509v3 Subject Key Identifier: 29:55:53:D7:48:A6:93:6A:56:9C:E5:38:C3:92:6A:2F:3C:AC:B7:06 X509v3 Authority Key Identifier: keyid:18:D9:48:2B:0E:D2:F4:FF:0C:0D:67:E8:CB:26:4C:30:CE:F2:6D:60 Certificate is to be certified until Mar 28 14:36:39 2022 GMT (365 days) Sign the certificate? [y/n]:y 1 out of 1 certificate requests certified, commit? [y/n]y Write out database with 1 new entries Data Base Updated \u8fde\u6572\u4e24\u4e2a y \u5373\u53ef \u751f\u6210\u7684 server01.pem \u5373\u4e3a\u8bc1\u4e66 \u5728\u914d\u7f6e\u8bc1\u4e66\u65f6\uff0c\u9700\u8981\u751f\u6210\u7684\u5ba2\u6237\u673a\u81ea\u5df1\u7684\u79c1\u94a5\uff0c\u4e0e\u7ecf\u8fc7\u6839\u8bc1\u4e66\u7b7e\u540d\u7684\u8bc1\u4e66\uff0c\u6839\u8bc1\u4e66\u81ea\u5df1\u7684\u79c1\u94a5\u9700\u5728 CA \u670d\u52a1\u5668\u4e0a\u81ea\u5df1\u4fdd\u5b58\u597d\u3002 \u4e4b\u540e\u8981\u7b7e\u53d1\u8bc1\u4e66\uff0c\u6309\u7167\u751f\u6210\u79c1\u94a5 -> \u751f\u6210\u7b7e\u53d1\u8bf7\u6c42 -> \u5728 CA \u4e0a\u7b7e\u540d \u8fd9\u4e09\u6b65\u5373\u53ef\u3002 \u7531\u4e8e\u603b\u662f\u8981\u4f20\u4e00\u4e9b\u7b7e\u53d1\u597d\u7684\u8bc1\u4e66\uff0c\u6240\u4ee5\u5efa\u8bae\u8fd9\u65f6\u5148\u4e0d\u8981\u963b\u6321 CA \u670d\u52a1\u5668\u7684 SSH \u8bbf\u95ee\uff0c\u80fd\u5927\u5927\u52a0\u5feb\u5b9e\u9645\u505a\u9898\u7684\u901f\u5ea6 \u6307\u7528 SCP \u4f20\u6587\u4ef6 \u8bc1\u4e66\u9700\u8981\u5bfc\u5165\u8fdb\u5176\u4ed6\u4e3b\u673a\u7684\u6839\u8bc1\u4e66\u4fe1\u4efb\u5217\u8868\uff0c\u6211\u4e2a\u4eba\u5efa\u8bae\u7528 Ansible\uff0c\u53cd\u6b63 APT \u6e90\u91cc\u6709 \u5c06 CA \u6839\u8bc1\u4e66\u590d\u5236\u5230\u4e3b\u673a\u7684 /usr/local/share/ca-certificates/ \u6587\u4ef6\u5939\uff0c\u4e4b\u540e\u8fd0\u884c update-ca-certificates Ansible Playbook \u5982\u4e0b\uff1a --- - hosts: all vars: ca: - cacert.pem tasks: - name: copy ca file copy: src: '{{ item }}' dest: /usr/local/share/ca-certificates mode: 0644 owner: root group: root loop: '{{ ca }}' notify: update trusted-ca handlers: - name: update trusted-ca shell: /usr/sbin/update-ca-certificates \u53e6\u5916\u8fd8\u9700\u8981\u5bfc\u5165\u8fdb Firefox \u7684\u8bc1\u4e66\u4fe1\u4efb\u5217\u8868\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u5728\u8bbf\u95ee\u65f6\u5f39\u51fa\u5b89\u5168\u8b66\u544a\u4e86\u3002","title":"\u5176\u4ed6\u8bc1\u4e66\u7684\u7b7e\u53d1"}]}